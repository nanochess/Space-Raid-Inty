00000100 SCRATCH                    00000100 ISRVEC                     
00000102 WFLAG                      00000103 cuadro                     
00000104 x_jugador                  00000105 y_jugador                  
00000106 sprite_nave                00000107 ajuste_nave                
00000108 x_bala                     00000109 y_bala                     
0000010A bala_x3d                   0000010B bala_y3d                   
0000010C xj3d                       0000010D yj3d                       
0000010E x_bala2                    0000010F y_bala2                    
00000110 nivel_bala2                00000111 bala_der                   
00000112 inicia_sprites             00000113 gasolina                   
00000114 x_enemigo1                 00000115 x_enemigo2                 
00000116 x_enemigo3                 00000117 y_enemigo1                 
00000118 y_enemigo2                 00000119 y_enemigo3                 
0000011A xe3d0                      0000011B xe3d1                      
0000011C xe3d2                      0000011D xe3d3                      
0000011E ye3d0                      0000011F ye3d1                      
00000120 ye3d2                      00000121 ye3d3                      
00000122 ye3d4                      00000123 offset9                    
00000124 offset0                    00000125 offset1                    
00000126 offset2                    00000127 offset3                    
00000128 offset0temp                00000129 offset1temp                
0000012A offset2temp                0000012B offset3temp                
0000012C offset4temp                0000012D dificultad                 
0000012E nivel                      0000012F tiempo                     
00000130 electrico                  00000131 lector                     
00000133 byte                       00000134 ola                        
00000135 secuencia                  00000136 proximo                    
00000137 explosion                  00000138 vida_extra                 
00000139 rand                       0000013A boton_previo               
0000013B colision0                  0000013C colision2                  
0000013D colision6                  0000013E titulo                     
0000013F demo                       00000140 ciclo_demo                 
00000141 estado_demo                00000142 pixel                      
00000143 montaje                    00000144 montaje_x                  
00000145 montaje_y                  00000146 sonido_base0               
00000147 sonido_ap0                 00000148 sonido_d0                  
00000149 sonido_base1               0000014A sonido_ap1                 
0000014B sonido_d1                  0000014C psg_copia                  
0000015A def_nivel                  00000160 def_nivel2                 
00000161 califica                   00000162 puntos_nombres             
00000180 _SCRATCH                   000002F0 SYSTEM                     
000002F0 STACK                      00000310 avance                     
00000311 vidas                      00000312 puntos                     
00000313 puntos_vida                00000314 puntos_records             
0000031E _SYSTEM                    00000000 MEMMAP                     
000001F0 PSG0                       000000F0 PSG1                       
00000000 PSG                        00000000 STIC                       
00005000 ROMHDR                     0000500D ZERO                       
00005051 MAIN                       0000500F ONES                       
00005014 TITLE                      00006E66 PRINT.FLS                  
00005054 MAIN.0                     00005D1A FILLZERO                   
00005D1B FILLMEM                    00005D16 CLRSCR                     
00005FE7 vector_int                 000051E2 reinicio                   
00005080 reinicio3                  00005083 MAIN.180                   
00005091 MAIN.181                   0000508F reinicio2                  
00005FD3 espera_int                 000050CE MAIN.184                   
000050A5 MAIN.183                   000050BC MAIN.182                   
00006E58 mensaje_4                  000050D7 MAIN.174                   
000050E4 MAIN.175                   00005110 MAIN.176                   
0000514E MAIN.197                   00005188 MAIN.185                   
00005169 MAIN.204                   00005F47 letra_iniciales            
00005172 MAIN.206                   0000517B MAIN.205                   
0000518A MAIN.177                   00005192 MAIN.178                   
000051A5 MAIN.179                   00005FC1 boton_oprimido             
000051B6 MAIN.170                   00006CDC mensaje_3                  
000051C7 MAIN.198                   00006DCC mensaje_5                  
000051C7 MAIN.169                   000051F7 MAIN.147                   
00005203 MAIN.149                   00006AD7 logo_pantalla              
0000520A MAIN.148                   00005252 MAIN.156                   
00005262 MAIN.157                   0000527A MAIN.150                   
00006CD2 mensaje_2                  00005273 MAIN.158                   
00005293 MAIN.159                   000052A3 MAIN.160                   
000052C1 MAIN.166                   000052C2 MAIN.167                   
00005EB5 sel_nivel2                 000052CF MAIN.195                   
00005E28 graficos_nivel             000052DE MAIN.153                   
000052E6 bucle                      000053E3 MAIN.55                    
00005310 MAIN.56                    0000530E MAIN.57                    
00005318 MAIN.58                    0000532A MAIN.59                    
000057EF MAIN.60                    000053CE MAIN.61                    
0000539C MAIN.172                   00006CC7 mensaje_1                  
0000535A MAIN.145                   0000692C sonido_9                   
000068D5 base_sonido                0000536F MAIN.143                   
00005D20 reproduce_sonido           000053BF voz_doble                  
0000537F MAIN.144                   00005392 MAIN.164                   
000053DB MAIN.62                    00005F01 adelanta_lector            
00005677 MAIN.15                    00005412 MAIN.84                    
00005410 MAIN.85                    0000550A MAIN.86                    
00005EF1 lee_byte                   0000542A MAIN.87                    
00005469 MAIN.89                    000054C1 MAIN.88                    
00005447 MAIN.90                    00005E17 adelanta_nivel             
000057EF MAIN.16                    00005451 MAIN.91                    
00005457 MAIN.92                    000054B6 MAIN.93                    
00005465 MAIN.152                   000054AE MAIN.94                    
00005494 MAIN.95                    00005491 MAIN.96                    
00005DBD insercion                  00006901 sonido_4                   
00005DAE efecto_sonido_prioridad    000069A9 offset_y                   
000054C8 MAIN.97                    000054E7 MAIN.154                   
000054EC MAIN.155                   000054F8 MAIN.99                    
00005529 MAIN.100                   0000555B MAIN.101                   
000055A7 MAIN.102                   0000554B MAIN.103                   
000068E1 sonido_2                   00005DA0 efecto_sonido              
00005566 MAIN.104                   0000556F MAIN.105                   
00005589 MAIN.106                   0000558F MAIN.107                   
000055B0 MAIN.108                   0000562F MAIN.109                   
000055C6 MAIN.196                   000055D2 MAIN.110                   
000055DB MAIN.111                   0000560C MAIN.112                   
00005605 MAIN.113                   00005620 MAIN.114                   
00005675 MAIN.115                   00005659 MAIN.116                   
00005653 MAIN.117                   0000572B MAIN.17                    
00005699 MAIN.18                    0000569F MAIN.19                    
000056D6 MAIN.20                    000056F6 MAIN.23                    
00005701 MAIN.25                    000056C5 MAIN.27                    
0000571D MAIN.24                    000056EA MAIN.21                    
0000571F MAIN.22                    00005715 MAIN.26                    
00005736 MAIN.28                    00005750 MAIN.29                    
00005755 MAIN.31                    000057E9 MAIN.30                    
0000576E MAIN.32                    00005790 MAIN.33                    
000057A8 MAIN.35                    000057AD MAIN.34                    
000057DF MAIN.36                    000057E7 MAIN.37                    
000057FF MAIN.53                    00005802 MAIN.63                    
0000581C MAIN.49                    0000580C MAIN.52                    
00005815 MAIN.50                    00005818 MAIN.51                    
000058F7 MAIN.11                    00005C22 MAIN.54                    
0000585A MAIN.161                   0000585E MAIN.162                   
00005868 MAIN.1                     00005876 MAIN.2                     
00005880 MAIN.3                     0000588E MAIN.4                     
0000589E MAIN.165                   000058A3 MAIN.163                   
000058C0 MAIN.6                     000058B6 MAIN.7                     
000068D6 sonido_1                   000058D0 MAIN.12                    
000058D6 MAIN.13                    000058F2 MAIN.14                    
00005F18 inicia_explosion           00005913 MAIN.8                     
0000590C MAIN.10                    0000590F MAIN.9                     
00005914 MAIN.64                    00005916 MAIN.65                    
000059CD MAIN.66                    00005A81 MAIN.67                    
00005992 MAIN.118                   00005960 MAIN.125                   
00005A11 MAIN.124                   0000594C MAIN.126                   
00005958 MAIN.127                   0000597E MAIN.128                   
0000598A MAIN.129                   000059AE MAIN.119                   
000059C0 MAIN.120                   000059AA MAIN.121                   
000059D4 MAIN.131                   000059BC MAIN.130                   
00005A84 MAIN.122                   000059C7 MAIN.123                   
000059DB MAIN.70                    000059DD MAIN.71                    
000059F4 MAIN.72                    000059FC MAIN.73                    
00005A0B MAIN.68                    00005A0F MAIN.69                    
00005A30 MAIN.74                    00005DD6 gana_puntos                
00005A88 MAIN.75                    00005A50 MAIN.78                    
00005A7C MAIN.77                    00005A4E MAIN.79                    
00005A5D MAIN.80                    00005A6E MAIN.76                    
000068EC sonido_3                   00005A97 MAIN.5                     
00005AAB MAIN.173                   00005AB9 MAIN.138                   
00006908 sonido_5                   00005ADB MAIN.139                   
00006911 sonido_6                   00006918 sonido_7                   
0000691F sonido_8                   0000696F sonido_10                  
000069A0 sonido_11                  00005AEE MAIN.140                   
00005AEC MAIN.141                   00005AF6 MAIN.209                   
00005BB0 MAIN.38                    00005B0D MAIN.200                   
00005B22 MAIN.39                    00005B69 MAIN.40                    
00005B1A MAIN.41                    00005B9B MAIN.42                    
00005B2F MAIN.43                    00005B41 MAIN.44                    
00005B59 MAIN.46                    00005B55 MAIN.47                    
00005B65 MAIN.48                    00005B75 MAIN.142                   
00005B83 MAIN.203                   00005B8E MAIN.199                   
00005BA2 MAIN.201                   00005BA9 MAIN.202                   
00005BFB MAIN.132                   00005BD2 MAIN.133                   
00005BC1 MAIN.134                   00005BE3 MAIN.135                   
00005C14 MAIN.82                    00005C1F MAIN.83                    
00005C28 MAIN.136                   00005C36 MAIN.137                   
00006AC3 antena                     00005C7C MAIN.in1                   
00005C85 MAIN.in7                   00005C93 MAIN.in2                   
00005C9C MAIN.in8                   00005CAA MAIN.in3                   
00005CB3 MAIN.in9                   00005CC1 MAIN.in4                   
00005CCA MAIN.in10                  00005CD8 MAIN.in5                   
00005CE1 MAIN.in11                  00005CEA MAIN.in6                   
00005CF3 MAIN.in12                  00005D6C @@1                        
00005D4A @@4                        00005D59 @@3                        
00005D65 @@2                        00005D9F @@5                        
00005D9B @@6                        00005DA9 efecto_sonido.1            
00005DAD efecto_sonido.2            00005DE0 gana_puntos.1              
00005E05 gana_puntos.2              00005DE5 gana_puntos.3              
00005E06 tabla_puntos               00005E21 adelanta_nivel.1           
00005E5C graficos_nivel.s6          000069B1 borde_fortaleza_12         
00005E3C graficos_nivel.s14         00006A3A borde_fortaleza_34         
00005E3E graficos_nivel.s1          00005E4F graficos_nivel.s2          
00005E48 graficos_nivel.s3          00005E5A graficos_nivel.s4          
00005E54 graficos_nivel.s5          00005EB2 graficos_nivel.s12         
00006ACB tabla_estrellas            00005E75 graficos_nivel.s7          
00005E78 graficos_nivel.s10         00005E81 graficos_nivel.s8          
00005E89 graficos_nivel.s9          00000007 COLOR_ESTRELLA             
00005E91 graficos_nivel.s11         00005EBD sel_nivel                  
0000683C niveles                    00005F00 lee_byte.1                 
00005F17 adelanta_lector.2          00005F13 adelanta_lector.1          
00005F4C letra_iniciales.186        00005F58 letra_iniciales.187        
00005F7B letra_iniciales.189        00005F78 letra_iniciales.188        
00005F8E letra_iniciales.190        00005F8B letra_iniciales.191        
00005FA1 letra_iniciales.207        00005F9F letra_iniciales.208        
00005FAF letra_iniciales.192        00005FBA letra_iniciales.193        
00005FB4 letra_iniciales.194        00005FD2 boton_oprimido.bo1         
00005FD6 espera_int.1               00005FE0 espera_int.2               
00006007 vector_int.0               000060F6 vector_int.vi0             
0000601F vector_int.vi20            00006619 dibujo_estrellas           
000060C4 vector_int.vi3             0000602E vector_int.vi28            
00006669 dibujo_abismos             0000603D vector_int.vi29            
000066A9 dibujo_muros               0000604D vector_int.vi41            
00006BC7 logo_bitmap                0000605D vector_int.vi43            
0000606C vector_int.vi48            0000607B vector_int.vi40            
000066F1 dibujo_muros_ancho         000060B5 vector_int.vi49            
00006086 vector_int.vi50            00006769 graficos_nivel_sup         
0000608E vector_int.vi51            00006799 graficos_nivel_inf         
000060D7 vector_int.vi52            00006591 tabla_sprites              
000064F7 vector_int.vi2             000062E8 vector_int.vi26            
00006164 vector_int.vi27            00006130 vector_int.vi31            
00006209 vector_int.viflicker       00006739 tabla_paredes              
000064FD sprites_x_nave             00006533 sprites_y_nave             
0000622F vector_int.vip1            0000623A vector_int.vip3            
00006245 vector_int.vip4            00006250 vector_int.vip2            
0000625B vector_int.vip5            00006266 vector_int.vip6            
00006271 vector_int.vip7            0000627C vector_int.vip8            
00006287 vector_int.vip9            00006292 vector_int.vip10           
00006543 sprites_color_nave         000067B9 color_sprites              
000063AF vector_int.vipuntos        00006302 vector_int.vi44            
0000631B vector_int.vi4             00006328 vector_int.vi5             
00006332 vector_int.vi18            00006334 vector_int.vi17            
00006343 vector_int.vi45            00006349 vector_int.vi6             
0000634F vector_int.vi19            0000634D vector_int.vi32            
0000635A vector_int.vi7             00006367 vector_int.vi8             
0000638E vector_int.vi47            0000639D vector_int.vi46            
0000645E vector_int.vi42            000063F1 vector_int.vi21            
000063D9 vector_int.vi22            000063E5 vector_int.vi23            
000063E1 vector_int.vi24            00006561 sprites_nave               
00006419 vector_int.vi1             00006436 vector_int.vi54            
00006444 vector_int.vi53            0000645E vector_int.vi56            
00006459 vector_int.vi55            00006479 vector_int.vi99            
000064B9 vector_int.vi98            000064DD vector_int.168             
000064E3 vector_int.vi15            000064F3 vector_int.vi16            
0000651F sprites_x_nave.vi25        0000652B sprites_x_nave.vi12        
0000652C sprites_x_nave.vi10        0000653F sprites_y_nave.vi9         
00006557 sprites_color_nave.vi14    00006559 sprites_color_nave.vi11    
00006844 espacio_1                  00006850 fortaleza_1                
00006868 espacio_2                  00006875 fortaleza_2                
0000688E espacio_3                  00006898 fortaleza_3                
000068B0 espacio_4                  000068BC fortaleza_4                
00000004 COLOR_RAYA                 00000004 COLOR_FON2                 
00000001 COLOR_RAY2                 00006E66 PRINT                      
00006E67 PRINT.LS                   00006E71 PRINT.S                    
00006E6A PRINT.FLP                  00006E6B PRINT.LP                   
00006E6C PRINT.P                    00006E6D PRINT.R                    
00006E7C PRINT.1st                  00006E76 PRINT.tloop                
00006E84 PRINT.pulr                 
			        ;
			        ; Space Raid para Intellivision
			        ;
			        ; por Oscar Toledo Gutiérrez
			        ;
			        ; (c) Copyright 2013-2014 Oscar Toledo Gutiérrez
			        ;
			        ; Creación: 22-nov-2013.
			        ; Revisión: 27-nov-2013. Se agrega la nave y su sombra.
			        ; Revisión: 28-nov-2013. La nave ya se mueve usando el controlador izq.
			        ; Revisión: 29-nov-2013. La nave ya puede disparar.
			        ; Revisión: 14-dic-2013. Se implementa código para mover bala enemigos.
			        ; Revisión: 16-dic-2013. Se agrega código para crear enemigos del
			        ;                        espacio y los dibujos de los sprites.
			        ; Revisión: 19-dic-2013. Se integra código para visualizar aviones en
			        ;                        el espacio, generar movimiento de ataque y
			        ;                        disparar.
			        ; Revisión: 20-dic-2013. El jugador explota cuando toca un enemigo o
			        ;                        una bala. Los enemigos explotan cuando los
			        ;                        toca una bala. Se asignan colores a los
			        ;                        sprites. Se pone indicador de puntuación,
			        ;                        vidas y combustible. Ya gasta combustible. Se
			        ;                        integran los datos para todos los niveles.
				; Revisión: 21-dic-2013. Ya salen los elementos de las fortalezas y
				;                        cohetes funcionales, y pueden ser destruidos.
				;                        Ya funcionan los campos eléctricos. Las
				;                        antenas ya están animadas.
				; Revisión: 23-dic-2013. Se agregan efectos de sonido y de fondo.
				; Revisión: 24-dic-2013. Primer experimento de fondo para la fortaleza.
				; Revisión: 25-dic-2013. Ajuste en mensaje de presentación.
				; Revisión: 26-dic-2013. Se integran los gráficos para los abismos y
				;                        las paredes. Se pone una raya en la fortaleza,
				;                        y se prepara la pantalla del espacio donde
				;                        se pondran estrellas.
				; Revisión: 27-dic-2013. Ya visualiza correctamente el robotote. Fondo
				;                        de estrellas que se desplazan suavemente en
				;                        el espacio. Los planetoides se desplazan más
				;                        despacio. Se agrega sonido para la mirilla.
				; Revisión: 28-dic-2013. Se incorpora mensaje de Game Over. Se elimina
				;                        basura al perder juego en espacio. Se agrega
				;                        pantalla de presentación.
				; Revisión: 02-ene-2014. Ya visualiza abismos, falta por corregir la
				;                        posición Y.
				; Revisión: 03-ene-2014. Ya visualiza paredes. Faltan ajustes.
				; Revisión: 04-ene-2014. Se integra música de Game Over. Se soluciona
				;                        un bug de sprites falsos, otro de paredes
				;                        cortadas, otro de primer disparo en lugar
				;                        incorrecto, otro de explosiones que
				;                        destruían al jugador, otro de avance de
				;                        página incorrecto al leer nivel, y otro al
				;                        pasar de 255 puntos.
				; Revisión: 05-ene-2014. Color diferente para fortalezas 3 y 4. Forza
				;                        al jugador a oprimir continuamente disparo.
				; Revisión: 23-ene-2014. Se integra una pantalla de título mejor.
				; Revisión: 24-ene-2014. Se integra un mensaje de "PRESS FIRE". Se
				;                        agrega demo. Se agregan creditos.
				; Revision: 25-ene-2014. Se quita un bug en que lanzar un cohete
				;                        hacía desaparecer elementos. Ya evita la
				;                        presentación tipo Mattel Intellivision
				;                        (basta irse directo de TITLE a MAIN)
				; Revisión: 28-ene-2014. Evita poner sonido de fondo en demos.
				; Revisión: 04-feb-2014. El proyectil teledirigido ya tiene sombra.
				;                        Las vidas ahora son cada 200 puntos en lugar
				;                        de 256. Se agrega un cero extra a los puntos.
				; Revisión: 05-feb-2014. La pared ya tiene menos flicker (usa 5
				;                        sprites en lugar de 4, así que toda la
				;                        pared parpadea a 20 cuadros por segundo en
				;                        lugar de 15 cuadros). Ya se nota la sombra
				;                        del misil teledirigido cuando la nave está
				;                        pegada a tierra.
				; Revision: 07-feb-2014. Ya visualiza la tabla de récords.
				; Revisión: 08-feb-2014. Permite introducir récords.
				; Revisión: 13-feb-2014. Se ahorra espacio en GRAM teniendo un bitmap
				;                        separado para la pared con hueco amplio. Los
				;                        elementos de las fortalezas entran
				;                        suavemente por la derecha. Se integra un
				;                        indicador de altitud.
				; Revisión: 14-feb-2014. Los nombres de los beta-testers se ponen como
				;                        sus alias en AtariAge, se agrega ed1475. La
				;                        última letra puesta en las iniciales se usa
				;                        para la siguiente. Se intercambia la
				;                        dirección de selección para letras. Se evita
				;                        que desaparezcan objetos intempestivamente
				;                        en la fortaleza. Los elementos ya desaparecen
				;                        suavemente a la izquierda.
				; Revisión: 27-feb-2014. Al entrar iniciales empieza con una letra ‘A’.
				;                        Colores alternados en tabla de puntuaciones.
				;                        Se divide la pantalla de créditos en dos. Se
				;                        evita pop en sonido. Se optimiza un poco el
				;                        código. Mejoras en aparición de enemigos en el
				;                        espacio para que entren/salgan más suave.
				;                        Permite corregir al introducir iniciales.
				; Revisión: 01-mar-2014. Permite usar ambos controladores para el juego.
				;                        Se elimina nota final en música Game Over para
				;                        evitar un poc al final. Game Over solo se
				;                        muestra 10 segundos.
				; Revisión: 03-mar-2014. Se agregan efectos de sonido por vida extra y
				;                        gasolina baja, también parpadea indicador. Se
				;                        agrega "adorno" en creditos. Se corrige un
				;                        bug al abortar demo con botón, iba a
				;                        calificación. Solucionado bug donde al iniciar
				;                        el juego se disparaba una bala que quedaba de
				;                        la demo.
				; Revisión: 04-mar-2014. Cuando se acaban las vidas pone un espacio.
				;                        En Game Over deja de parpadear el indicador
				;                        de combustible. Corrección en puntos para
				;                        satélite y robotote, seguían en BCD (resto del
				;                        traslado de Atari). Cada vez que obtiene una
				;                        vida duplica los puntos requeridos.
				; Revisión: 05-mar-2014. Solucionado bug en inicialización de memoria
				;                        (detectado sobre hardware real).
				;

				; Próxima etiqueta: @@210
			        
				; Por hacer:
				;
				; Mejoras posibles:
				; o Mejorar el dibujo del robotote.
				;
				; Demasiada carga:
				; o Fondo que rola en fortalezas.
				; o Columnas en fortalezas.
				; o Elementos desapareciendo suavemente a la izquierda
				;   o Técnica 1: Hacerlos caracteres redefinibles
				;   o Técnica 2: MOBS en un sólo GRAM, redefinir GRAM para cambiar patrón
				;                Eso liberaría mucha GRAM para más fondos.
				;   o Técnica 3: Llevar MOBS por la izquierda. (hecho)
				;
				; Cosas posibles pero que alteran el "feeling" del juego:
				; o Posible pantalla intermedia entre espacio y fortaleza.

			        ROMW    16              ; ROM de 16 bits

0x100                   SCRATCH:        ORG     $100, $100, "-RWBN"
0x100                   ISRVEC:     RMB     2               ; Always at $100 / $101
0x102                   WFLAG:      RMB     1               ; ISR wait flag: ISR clears, fg task sets.
0x103                   cuadro:         RMB 1           ; Contador de cuadros visualizados
0x104                   x_jugador:      RMB 1           ; Coordenada X 3D del jugador
0x105                   y_jugador:      RMB 1           ; Coordenada Y 3D del jugador
0x106                   sprite_nave:    RMB 1           ; Sprite de la nave
0x107                   ajuste_nave:    RMB 1           ; Ajuste de nave para animación :)
0x108                   x_bala:         RMB 1           ; Coordenada X de bala
0x109                   y_bala:         RMB 1           ; Coordenada Y de bala
0x10A                   bala_x3d:       RMB 1           ; Coordenada X 3D de bala al ser disparada
0x10B                   bala_y3d:       RMB 1           ; Coordenada Y 3D de bala al ser disparada
0x10C                   xj3d:           RMB 1           ; Temporal
0x10D                   yj3d:           RMB 1           ; Coordenada Y del jugador
0x10E                   x_bala2:        RMB 1           ; Coordenada X de bala enemigo
0x10F                   y_bala2:        RMB 1           ; Coordenada Y de bala enemigo
0x110                   nivel_bala2:    RMB 1           ; Nivel de bala enemigo
0x111                   bala_der:       RMB 1           ; Indica si bala enemigo va a la derecha
0x112                   inicia_sprites: RMB 1           ; Indica si inicia sprites
0x113                   gasolina:       RMB 1           ; Gasolina restante
0x114                   x_enemigo1:     RMB 1           ; Posición X 3D de enemigo 1
0x115                   x_enemigo2:     RMB 1           ; Posición X 3D de enemigo 2
0x116                   x_enemigo3:     RMB 1           ; Posición X 3D de enemigo 3
0x117                   y_enemigo1:     RMB 1           ; Posición Y 3D de enemigo 1
0x118                   y_enemigo2:     RMB 1           ; Posición Y 3D de enemigo 2
0x119                   y_enemigo3:     RMB 1           ; Posición Y 3D de enemigo 3
0x11A                   xe3d0:          RMB 1
0x11B                   xe3d1:          RMB 1
0x11C                   xe3d2:          RMB 1
0x11D                   xe3d3:          RMB 1
0x11E                   ye3d0:          RMB 1
0x11F                   ye3d1:          RMB 1
0x120                   ye3d2:          RMB 1
0x121                   ye3d3:          RMB 1
0x122                   ye3d4:          RMB 1
0x123                   offset9:        RMB 1
0x124                   offset0:        RMB 1
0x125                   offset1:        RMB 1
0x126                   offset2:        RMB 1
0x127                   offset3:        RMB 1
0x128                   offset0temp:	RMB 1
0x129                   offset1temp:	RMB 1
0x12A                   offset2temp:	RMB 1
0x12B                   offset3temp: 	RMB 1
0x12C                   offset4temp:	RMB 1
0x12D                   dificultad:     RMB 1           ; Dificultad actual
0x12E                   nivel:          RMB 1           ; Nivel actual
0x12F                   tiempo:         RMB 1           ; Tiempo para que aparezca otro enemigo
0x130                   electrico:	 RMB 1		  ; Indica si hay campo eléctrico o cuenta impactos
0x131                   lector:         RMB 2           ; Offset a nivel
0x133                   byte:           RMB 1           ; Byte en lectura
0x134                   ola:            RMB 1           ; Ola de ataque actual
0x135                   secuencia:      RMB 1           ; Secuencia de ataque actual
0x136                   proximo:        RMB 1           ; Próximo avión que disparará
0x137                   explosion:      RMB 1           ; Indica si el jugador está explotando
0x138                   vida_extra:	RMB 1		; Indica si dio vida extra
0x139                   rand:           RMB 1           ; Número seudoaleatorio
0x13A                   boton_previo:	RMB 1		; Estado previo de botón
0x13B                   colision0:	 RMB 1		  ; Colisión de nave con demás
0x13C                   colision2:	 RMB 1		  ; Colisión de bala con demás
0x13D                   colision6:	 RMB 1		  ; Colisión de bala enemigo con demás
0x13E                   titulo:		RMB 1		; Indica si está en pantalla de título
0x13F                   demo:		RMB 1		; Indica si está en demostración
0x140                   ciclo_demo:	RMB 1		; Indica qué nivel está ciclando
0x141                   estado_demo:	RMB 1		; Estado demo (movimiento automático)
0x142                   pixel:		RMB 1		; Pixel para estrellas en el espacio
0x143                   montaje:	RMB 1		; Secuencia de cuadros para montaje
0x144                   montaje_x:	RMB 1
0x145                   montaje_y:	RMB 1		; Coordenada Y antes de montaje de sprites
0x146                   sonido_base0:	RMB 1		; Base de sonido 0
0x147                   sonido_ap0:	RMB 1		; Apuntador a sonido 0
0x148                   sonido_d0:	RMB 1		; Duración de sonido 0
0x149                   sonido_base1:	RMB 1		; Base de sonido 1
0x14A                   sonido_ap1:	RMB 1		; Apuntador a sonido 1
0x14B                   sonido_d1:	RMB 1		; Duración de sonido 1
0x14C                   psg_copia:	RMB 14		; Copia del PSG antes de vaciado
0x15A                   def_nivel:	RMB 6		; Definiciones para cada carácter de nivel
0x160                   def_nivel2:	RMB 1		; Cambios en definiciones
0x161                   califica:	RMB 1		; Indica en que posición califica para los récords
0x162                   puntos_nombres:	RMB 10*3	; Nombres de los récords

0x180                   _SCRATCH    EQU     $               ; end of scratch area

0x2F0                   SYSTEM: ORG     $2F0, $2F0, "-RWBN"
0x2F0                   STACK:  RMB     32              ; Reserva 32 palabras para la pila
0x310                   avance:         RMB 1           ; Avance (aviones en espacio)
0x311                   vidas:          RMB 1           ; Total de vidas
0x312                   puntos:		RMB 1		; Puntuación actual
0x313                   puntos_vida:	RMB 1		; Puntos para conseguir una vida
0x314                   puntos_records:	RMB 10		; Tabla de récords

0x31E                   _SYSTEM:        EQU     $       ; Fin del área del sistema

			MACRO DIGITO VAL
				ADDI #8,R2
				SUBI #%VAL%,R0
				BC $-4
				ADDI #%VAL%,R0
			ENDM

0x5000                          ORG     $5000           ; Mapa de memoria por defecto

			        INCLUDE "gimini.asm"
			;* ======================================================================== *;
			;*  These routines are placed into the public domain by their author.  All  *;
			;*  copyright rights are hereby relinquished on the routines and data in    *;
			;*  this file.  -- Joseph Zbiciak, 2008                                     *;
			;* ======================================================================== *;

			;;==========================================================================;;
			;; GIMINI structure definitions.  Defines the memory map and peripherals.   ;;
			;;==========================================================================;;

			;; ======================================================================== ;;
			;;  Overall Memory Map                                                      ;;
			;;  MEMMAP -- Structure containing overall system memory map.               ;;
			;; ======================================================================== ;;
0x0                     MEMMAP          STRUCT  0
0x0                     @@stic          QEQU    $0000 ;..$003F  ; Standard Television Interface Circuit
0x80                    @@voice         QEQU    $0080 ;..$0081  ; Voice Synthesizer
0xF0                    @@psg1          QEQU    $00F0 ;..$00FF  ; Secondary Programmable Sound Gen.
0x100                   @@dataram       QEQU    $0100 ;..$01EF  ; 8-bit Data RAM
0x1F0                   @@psg0          QEQU    $01F0 ;..$01FF  ; Primary Programmable Sound Generator
0x200                   @@backtab       QEQU    $0200 ;..$02EF  ; 16-bit Display RAM
0x2F0                   @@sysram        QEQU    $02F0 ;..$035F  ; 16-bit System RAM (incl. Stack)
0x400                   @@exec2         QEQU    $0400 ;..$04FF  ; Executive ROM expansion
0x1000                  @@exec          QEQU    $1000 ;..$1FFF  ; Executive ROM
0x3000                  @@grom          QEQU    $3000 ;..$37FF  ; Graphics ROM
0x3800                  @@gram          QEQU    $3800 ;..$39FF  ; Graphics RAM
0x3A00                  @@gram_alias1   QEQU    $3A00 ;..$3BFF  ; Graphics RAM alias 
0x3C00                  @@gram_alias2   QEQU    $3C00 ;..$3DFF  ; Graphics RAM alias
0x3E00                  @@gram_alias3   QEQU    $3E00 ;..$3FFF  ; Graphics RAM alias
0x4000                  @@stic_alias1   QEQU    $4000 ;..$403F  ; STIC alias (incomplete decode)
0x8000                  @@stic_alias2   QEQU    $8000 ;..$803F  ; STIC alias (incomplete decode)
			                ENDS



			;;==========================================================================;;
			;; AY8914 Programmable Sound Generator Register Definitions.                ;;
			;;                                                                          ;;
			;; PSG0 -- Primary PSG in the Gimini Console.                               ;;
			;; PSG1 -- Secondary PSG, available when expansion is attached.             ;;
			;; PSG  -- Constants and bitfields common to both PSG's.                    ;;
			;;                                                                          ;;
			;; Each PSG contains the following set of registers:                        ;;
			;;                                                                          ;;
			;;     Register pairs:                                                      ;;
			;;                                                                          ;;
			;;       7   6   5   4   3   2   1   0 | 7   6   5   4   3   2   1   0      ;;
			;;     +---------------+---------------|-------------------------------+    ;;
			;;  R4 |    unused     |                Channel A Period               | R0 ;;
			;;     +---------------+---------------|-------------------------------+    ;;
			;;  R5 |    unused     |                Channel B Period               | R1 ;;
			;;     +---------------+---------------|-------------------------------+    ;;
			;;  R6 |    unused     |                Channel C Period               | R2 ;;
			;;     +---------------+---------------|-------------------------------+    ;;
			;;  R7 |                        Envelope Period                        | R3 ;;
			;;     +-------------------------------|-------+-----------------------+    ;;
			;;                                                                          ;;
			;;     Single registers:                                                    ;;
			;;                                                                          ;;
			;;         7       6       5       4       3       2       1       0        ;;
			;;     +---------------+-----------------------+-----------------------+    ;;
			;;     | I/O Port Dir  |    Noise Enables      |     Tone Enables      |    ;;
			;;  R8 |   0   |   0   |   C   |   B   |   A   |   C   |   B   |   A   |    ;;
			;;     +-------+-------+-------+-------+-------+-------+-------+-------+    ;;
			;;  R9 |            unused     |              Noise Period             |    ;;
			;;     +-----------------------+-------+-------+-------+-------+-------+    ;;
			;;     |                               |   Envelope Characteristics    |    ;;
			;; R10 |            unused             | CONT  |ATTACK | ALTER | HOLD  |    ;;
			;;     +---------------+---------------+-------+-------+-------+-------+    ;;
			;; R11 |    unused     | A Envl Select |    Channel A Volume Level     |    ;;
			;;     +---------------+---------------+-------------------------------+    ;;
			;; R12 |    unused     | B Envl Select |    Channel B Volume Level     |    ;;
			;;     +---------------+---------------+-------------------------------+    ;;
			;; R13 |    unused     | C Envl Select |    Channel C Volume Level     |    ;;
			;;     +---------------+---------------+-------------------------------+    ;;
			;;                                                                          ;;
			;;==========================================================================;;

			                ;;==========================================================;;
			                ;; Primary PSG in the main console.                         ;;
			                ;;==========================================================;;
0x1F0                   PSG0            STRUCT  $01F0

			                ;;----------------------------------------------------------;;
			                ;; Register address definitions                             ;;
			                ;;----------------------------------------------------------;;
0x1F0                   @@chn_a_lo      QEQU    $ + 0   ; Channel A period, lower 8 bits of 12
0x1F1                   @@chn_b_lo      QEQU    $ + 1   ; Channel B period, lower 8 bits of 12
0x1F2                   @@chn_c_lo      QEQU    $ + 2   ; Channel C period, lower 8 bits of 12
0x1F3                   @@envlp_lo      QEQU    $ + 3   ; Envelope period,  lower 8 bits of 16

0x1F4                   @@chn_a_hi      QEQU    $ + 4   ; Channel A period, upper 4 bits of 12
0x1F5                   @@chn_b_hi      QEQU    $ + 5   ; Channel B period, upper 4 bits of 12
0x1F6                   @@chn_c_hi      QEQU    $ + 6   ; Channel C period, upper 4 bits of 12
0x1F7                   @@envlp_hi      QEQU    $ + 7   ; Envelope period,  upper 8 bits of 16

0x1F8                   @@chan_enable   QEQU    $ + 8   ; Channel enables (bits 3-5 noise, 0-2 tone)
0x1F9                   @@noise         QEQU    $ + 9   ; Noise period (5 bits)
0x1FA                   @@envelope      QEQU    $ + 10  ; Envelope type/trigger (4 bits)

0x1FB                   @@chn_a_vol     QEQU    $ + 11  ; Channel A volume / Envelope select (6 bits)
0x1FC                   @@chn_b_vol     QEQU    $ + 12  ; Channel B volume / Envelope select (6 bits)
0x1FD                   @@chn_c_vol     QEQU    $ + 13  ; Channel C volume / Envelope select (6 bits)

0x1FE                   @@io_port0      QEQU    $ + 14  ; I/O port 0 (8 bits)
0x1FF                   @@io_port1      QEQU    $ + 15  ; I/O port 1 (8 bits)

			                ENDS

			                ;;==========================================================;;
			                ;; Secondary PSG in the expansion unit.                     ;;
			                ;;==========================================================;;
0xF0                    PSG1            STRUCT  $00F0

			                ;;----------------------------------------------------------;;
			                ;; Register address definitions                             ;;
			                ;;----------------------------------------------------------;;
0xF0                    @@chn_a_lo      QEQU    $ + 0   ; Channel A period, lower 8 bits of 12
0xF1                    @@chn_b_lo      QEQU    $ + 1   ; Channel B period, lower 8 bits of 12
0xF2                    @@chn_c_lo      QEQU    $ + 2   ; Channel C period, lower 8 bits of 12
0xF3                    @@envlp_lo      QEQU    $ + 3   ; Envelope period,  lower 8 bits of 16

0xF4                    @@chn_a_hi      QEQU    $ + 4   ; Channel A period, upper 4 bits of 12
0xF5                    @@chn_b_hi      QEQU    $ + 5   ; Channel B period, upper 4 bits of 12
0xF6                    @@chn_c_hi      QEQU    $ + 6   ; Channel C period, upper 4 bits of 12
0xF7                    @@envlp_hi      QEQU    $ + 7   ; Envelope period,  upper 8 bits of 16

0xF8                    @@chan_enable   QEQU    $ + 8   ; Channel enables (bits 3-5 noise, 0-2 tone)
0xF9                    @@noise         QEQU    $ + 9   ; Noise period (5 bits)
0xFA                    @@envelope      QEQU    $ + 10  ; Envelope type/trigger (4 bits)

0xFB                    @@chn_a_vol     QEQU    $ + 11  ; Channel A volume / Envelope select (6 bits)
0xFC                    @@chn_b_vol     QEQU    $ + 12  ; Channel B volume / Envelope select (6 bits)
0xFD                    @@chn_c_vol     QEQU    $ + 13  ; Channel C volume / Envelope select (6 bits)

0xFE                    @@io_port0      QEQU    $ + 14  ; I/O port 0 (8 bits)
0xFF                    @@io_port1      QEQU    $ + 15  ; I/O port 1 (8 bits)

			                ENDS

			                ;;==========================================================;;
			                ;; Useful Constants / Bit-field definitions.                ;;
			                ;;==========================================================;;
0x0                     PSG             STRUCT  $0000   ; Constants, etc. common to both PSGs.

			                ;;----------------------------------------------------------;;
			                ;; Bits to OR together for Channel Enable word              ;;
			                ;;----------------------------------------------------------;;
0x0                     @@tone_a_on     QEQU    00000000b   
0x0                     @@tone_b_on     QEQU    00000000b
0x0                     @@tone_c_on     QEQU    00000000b
0x0                     @@noise_a_on    QEQU    00000000b
0x0                     @@noise_b_on    QEQU    00000000b
0x0                     @@noise_c_on    QEQU    00000000b

0x1                     @@tone_a_off    QEQU    00000001b
0x2                     @@tone_b_off    QEQU    00000010b
0x4                     @@tone_c_off    QEQU    00000100b
0x8                     @@noise_a_off   QEQU    00001000b
0x10                    @@noise_b_off   QEQU    00010000b
0x20                    @@noise_c_off   QEQU    00100000b

			                ;;----------------------------------------------------------;;
			                ;; Bits to OR together for Envelope Type                    ;;
			                ;;----------------------------------------------------------;;
0x8                     @@envl_cont     QEQU    00001000b   ; Continue
0x4                     @@envl_attack   QEQU    00000100b   ; Attack (vs. Decay)
0x2                     @@envl_alter    QEQU    00000010b   ; Alternate
0x1                     @@envl_hold     QEQU    00000001b   ; Hold

			                ;;----------------------------------------------------------;;
			                ;; Volume levels                                            ;;
			                ;;----------------------------------------------------------;;
0x0                     @@vol_0         QEQU    0
0x1                     @@vol_1         QEQU    1
0x2                     @@vol_2         QEQU    2
0x3                     @@vol_3         QEQU    3
0x4                     @@vol_4         QEQU    4
0x5                     @@vol_5         QEQU    5
0x6                     @@vol_6         QEQU    6
0x7                     @@vol_7         QEQU    7
0x8                     @@vol_8         QEQU    8
0x9                     @@vol_9         QEQU    9
0xA                     @@vol_10        QEQU    10
0xB                     @@vol_11        QEQU    11
0xC                     @@vol_12        QEQU    12
0xD                     @@vol_13        QEQU    13
0xE                     @@vol_14        QEQU    14
0xF                     @@vol_15        QEQU    15
0x3F                    @@vol_envl      QEQU    63

			                ENDS

			;;==========================================================================;;
			;; AY8900 Standard Television Interface Circuit                             ;;
			;;                                                                          ;;
			;; STIC -- Register definitions, constants and bitfields                    ;;
			;;                                                                          ;;
			;; The Standard Television Interface Circuit provides a method for placing  ;;
			;; characters and graphics on the screen.  It provides a 20x12 matrix of    ;;
			;; background 'cards'.  Each card contains an 8x8 tile of pixels.  It also  ;;
			;; provides 8 movable objects (refered to here as MOBs).                    ;;
			;;                                                                          ;;
			;; MOB controls: (Note: 'mob' is MOB number (0 - 7))                        ;;
			;;  mob + $00   -- X position, and some attribute bits.                     ;;
			;;  mob + $08   -- Y position, and some attribute bits.                     ;;
			;;  mob + $10   -- Character definition, more attribute bits.               ;;
			;;  mob + $18   -- Collision information.                                   ;;
			;;                                                                          ;;
			;; Display Mode controls:                                                   ;;
			;;  $20         -- Display enable (must be written during vert blank.)      ;;
			;;  $21         -- Graphics mode (write sets FGBG, read sets Color Stack)   ;;
			;;                                                                          ;;
			;; Color Stack and Border Color controls:                                   ;;
			;;  $28..$2B    -- Color stack entries 0..3                                 ;;
			;;  $2C         -- Screen border color                                      ;;
			;;                                                                          ;;
			;; Display framing controls:                                                ;;
			;;  $30         -- Pixel column delay (0..7)                                ;;
			;;  $31         -- Pixel row delay (0..7)                                   ;;
			;;  $32         -- Edge masking (bit 0 masks left, bit 1 masks top)         ;;
			;;                                                                          ;;
			;; Color Set                                                                ;;
			;;       Primary Color Set                Pastel Color Set                  ;;
			;;    ------------------------       -----------------------------          ;;
			;;     0 Black   4 Dark Green          8 Grey     12 Pink                   ;;
			;;     1 Blue    5 Green               9 Cyan     13 Light Blue             ;;
			;;     2 Red     6 Yellow             10 Orange   14 Yellow-Green           ;;
			;;     3 Tan     7 White              11 Brown    15 Purple                 ;;
			;;                                                                          ;;
			;;==========================================================================;;
0x0                     STIC            STRUCT  $0000

			;;--------------------------------------------------------------------------;;
			;; MOB Controls                                                             ;;
			;;                                                                          ;;
			;; X Register layout:                                                       ;;
			;;                                                                          ;;
			;;    13   12   11   10    9    8    7    6    5    4    3    2    1    0   ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;  | ?? | ?? | ?? | X  |VISB|INTR|            X Coordinate               | ;;
			;;  |    |    |    |SIZE|    |    |             (0 to 255)                | ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;                                                                          ;;
			;; Y Register layout:                                                       ;;
			;;                                                                          ;;
			;;    13   12   11   10    9    8    7    6    5    4    3    2    1    0   ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;  | ?? | ?? | Y  | X  | Y  | Y  |YRES|          Y Coordinate            | ;;
			;;  |    |    |FLIP|FLIP|SIZ4|SIZ2|    |           (0 to 127)             | ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;                                                                          ;;
			;; A Register layout:                                                       ;;
			;;                                                                          ;;
			;;    13   12   11   10    9    8    7    6    5    4    3    2    1    0   ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;  |PRIO| FG |GRAM|      GRAM/GROM Card # (0 to 255)      |   FG Color   | ;;
			;;  |    |bit3|GROM|     (bits 9, 10 ignored for GRAM)     |   Bits 0-2   | ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;                                                                          ;;
			;; C Register layout:                                                       ;;
			;;                                                                          ;;
			;;    13   12   11   10    9    8    7    6    5    4    3    2    1    0   ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;  | ?? | ?? | ?? | ?? |COLL|COLL|COLL|COLL|COLL|COLL|COLL|COLL|COLL|COLL| ;;
			;;  |    |    |    |    |BORD| BG |MOB7|MOB6|MOB5|MOB4|MOB3|MOB2|MOB1|MOB0| ;;
			;;  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;--------------------------------------------------------------------------;;

0x0                     @@mob0_x        QEQU    $00 + 0     ; MOB 0 X position, XSIZE/VIS attributes
0x1                     @@mob1_x        QEQU    $00 + 1     ; MOB 1 X position, XSIZE/VIS attributes
0x2                     @@mob2_x        QEQU    $00 + 2     ; MOB 2 X position, XSIZE/VIS attributes
0x3                     @@mob3_x        QEQU    $00 + 3     ; MOB 3 X position, XSIZE/VIS attributes
0x4                     @@mob4_x        QEQU    $00 + 4     ; MOB 4 X position, XSIZE/VIS attributes
0x5                     @@mob5_x        QEQU    $00 + 5     ; MOB 5 X position, XSIZE/VIS attributes
0x6                     @@mob6_x        QEQU    $00 + 6     ; MOB 6 X position, XSIZE/VIS attributes
0x7                     @@mob7_x        QEQU    $00 + 7     ; MOB 7 X position, XSIZE/VIS attributes

0x8                     @@mob0_y        QEQU    $08 + 0     ; MOB 0 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0x9                     @@mob1_y        QEQU    $08 + 1     ; MOB 1 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0xA                     @@mob2_y        QEQU    $08 + 2     ; MOB 2 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0xB                     @@mob3_y        QEQU    $08 + 3     ; MOB 3 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0xC                     @@mob4_y        QEQU    $08 + 4     ; MOB 4 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0xD                     @@mob5_y        QEQU    $08 + 5     ; MOB 5 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0xE                     @@mob6_y        QEQU    $08 + 6     ; MOB 6 Y pos'n, YRES/YSIZE/XFLIP/YFLIP
0xF                     @@mob7_y        QEQU    $08 + 7     ; MOB 7 Y pos'n, YRES/YSIZE/XFLIP/YFLIP

0x10                    @@mob0_a        QEQU    $10 + 0     ; MOB 0 Color, Card #, Priority
0x11                    @@mob1_a        QEQU    $10 + 1     ; MOB 1 Color, Card #, Priority
0x12                    @@mob2_a        QEQU    $10 + 2     ; MOB 2 Color, Card #, Priority
0x13                    @@mob3_a        QEQU    $10 + 3     ; MOB 3 Color, Card #, Priority
0x14                    @@mob4_a        QEQU    $10 + 4     ; MOB 4 Color, Card #, Priority
0x15                    @@mob5_a        QEQU    $10 + 5     ; MOB 5 Color, Card #, Priority
0x16                    @@mob6_a        QEQU    $10 + 6     ; MOB 6 Color, Card #, Priority
0x17                    @@mob7_a        QEQU    $10 + 7     ; MOB 7 Color, Card #, Priority

0x18                    @@mob0_c        QEQU    $18 + 0     ; MOB 0 Collision detect
0x19                    @@mob1_c        QEQU    $18 + 1     ; MOB 1 Collision detect
0x1A                    @@mob2_c        QEQU    $18 + 2     ; MOB 2 Collision detect
0x1B                    @@mob3_c        QEQU    $18 + 3     ; MOB 3 Collision detect
0x1C                    @@mob4_c        QEQU    $18 + 4     ; MOB 4 Collision detect
0x1D                    @@mob5_c        QEQU    $18 + 5     ; MOB 5 Collision detect
0x1E                    @@mob6_c        QEQU    $18 + 6     ; MOB 6 Collision detect
0x1F                    @@mob7_c        QEQU    $18 + 7     ; MOB 7 Collision detect

			                ;;----------------------------------------------------------;;
			                ;; Display Mode Controls                                    ;;
			                ;;----------------------------------------------------------;;
0x20                    @@viden         QEQU    $20         ; Display Enable (write during vblank)
0x21                    @@mode          QEQU    $21         ; Mode select 

			                ;;----------------------------------------------------------;;
			                ;; Color Stack and Display Border Color Controls            ;;
			                ;;----------------------------------------------------------;;
0x28                    @@colstack      QEQU    $28         ; Base of the color stack
0x28                    @@cs0           QEQU    $28 + 0     ; Color Stack 0
0x29                    @@cs1           QEQU    $28 + 1     ; Color Stack 1
0x2A                    @@cs2           QEQU    $28 + 2     ; Color Stack 2
0x2B                    @@cs3           QEQU    $28 + 3     ; Color Stack 3
0x2C                    @@bord          QEQU    $2C         ; Border color

			                ;;----------------------------------------------------------;;
			                ;; Display Framing Controls                                 ;;
			                ;;----------------------------------------------------------;;
0x30                    @@h_delay       QEQU    $30         ; Horizontal delay (0 - 7 pixels)
0x31                    @@v_delay       QEQU    $31         ; Vertical delay (0 - 7 pixels)
0x32                    @@edgemask      QEQU    $32         ; Edge masking

			                ;;----------------------------------------------------------;;
			                ;; Useful bitfields/constants/masks for MOBS                ;;
			                ;;----------------------------------------------------------;;
0xFF                    @@mobx_xpos     QEQU    00000011111111b     ; MOB XREG: X position
0x100                   @@mobx_intr     QEQU    00000100000000b     ; MOB XREG: Interaction
0x200                   @@mobx_visb     QEQU    00001000000000b     ; MOB XREG: Visibility
0x400                   @@mobx_xsize    QEQU    00010000000000b     ; MOB XREG: Horiz 2x magnification

0x7F                    @@moby_ypos     QEQU    00000001111111b     ; MOB YREG: Y position
0x80                    @@moby_yres     QEQU    00000010000000b     ; MOB YREG: Y res. (8 or 16 rows)
0x100                   @@moby_ysize2   QEQU    00000100000000b     ; MOB YREG: Vert 2x magnification
0x200                   @@moby_ysize4   QEQU    00001000000000b     ; MOB YREG: Vert 4x magnification
0x300                   @@moby_ysize8   QEQU    00001100000000b     ; MOB YREG: 8x mag (sets 4x & 2x)
0x400                   @@moby_xflip    QEQU    00010000000000b     ; MOB YREG: Flip horizontally
0x800                   @@moby_yflip    QEQU    00100000000000b     ; MOB YREG: Flip vertically

0x0                     @@moba_fg0      QEQU    00000000000000b     ; MOB AREG: Foreground color =  0
0x1                     @@moba_fg1      QEQU    00000000000001b     ; MOB AREG: Foreground color =  1
0x2                     @@moba_fg2      QEQU    00000000000010b     ; MOB AREG: Foreground color =  2
0x3                     @@moba_fg3      QEQU    00000000000011b     ; MOB AREG: Foreground color =  3
0x4                     @@moba_fg4      QEQU    00000000000100b     ; MOB AREG: Foreground color =  4
0x5                     @@moba_fg5      QEQU    00000000000101b     ; MOB AREG: Foreground color =  5
0x6                     @@moba_fg6      QEQU    00000000000110b     ; MOB AREG: Foreground color =  6
0x7                     @@moba_fg7      QEQU    00000000000111b     ; MOB AREG: Foreground color =  7
0x1000                  @@moba_fg8      QEQU    01000000000000b     ; MOB AREG: Foreground color =  8
0x1001                  @@moba_fg9      QEQU    01000000000001b     ; MOB AREG: Foreground color =  9
0x1002                  @@moba_fgA      QEQU    01000000000010b     ; MOB AREG: Foreground color = 10
0x1003                  @@moba_fgB      QEQU    01000000000011b     ; MOB AREG: Foreground color = 11
0x1004                  @@moba_fgC      QEQU    01000000000100b     ; MOB AREG: Foreground color = 12
0x1005                  @@moba_fgD      QEQU    01000000000101b     ; MOB AREG: Foreground color = 13
0x1006                  @@moba_fgE      QEQU    01000000000110b     ; MOB AREG: Foreground color = 14
0x1007                  @@moba_fgF      QEQU    01000000000111b     ; MOB AREG: Foreground color = 15
0x1F8                   @@moba_card     QEQU    00000111111000b     ; MOB AREG: Card # mask
0x800                   @@moba_gram     QEQU    00100000000000b     ; MOB AREG: GRAM card select
0x2000                  @@moba_prio     QEQU    10000000000000b     ; MOB AREG: Priority 
			                                            ;           (above/below bkgnd)

0x1                     @@mobc_coll0    QEQU    00000000000001b     ; MOB CREG: Collision w/ MOB #0
0x2                     @@mobc_coll1    QEQU    00000000000010b     ; MOB CREG: Collision w/ MOB #1
0x4                     @@mobc_coll2    QEQU    00000000000100b     ; MOB CREG: Collision w/ MOB #2
0x8                     @@mobc_coll3    QEQU    00000000001000b     ; MOB CREG: Collision w/ MOB #3
0x10                    @@mobc_coll4    QEQU    00000000010000b     ; MOB CREG: Collision w/ MOB #4
0x20                    @@mobc_coll5    QEQU    00000000100000b     ; MOB CREG: Collision w/ MOB #5
0x40                    @@mobc_coll6    QEQU    00000001000000b     ; MOB CREG: Collision w/ MOB #6
0x80                    @@mobc_coll7    QEQU    00000010000000b     ; MOB CREG: Collision w/ MOB #7
0xFF                    @@mobc_collmob  QEQU    00000011111111b     ; MOB CREG: Coll w/ any MOB (mask)
0x100                   @@mobc_collbg   QEQU    00000100000000b     ; MOB CREG; Coll w/ background
0x200                   @@mobc_collbord QEQU    00001000000000b     ; MOB CREG; Coll w/ background

			                ;;----------------------------------------------------------;;
			                ;; Useful bits for Edge Masking.                            ;;
			                ;;----------------------------------------------------------;;
0x1                     @@mask_left     QEQU    00000000000001b     ; Edge mask: Mask leftmost 8 pixels
0x2                     @@mask_top      QEQU    00000000000010b     ; Edge mask: Mask topmost 8 pixels

			;;--------------------------------------------------------------------------;;
			;; Useful bits for Color Stack Mode                                         ;;
			;;                                                                          ;;
			;; Display format word layout in Color Stack Mode:                          ;;
			;;   13   12    11   10    9    8    7    6    5    4    3    2    1    0   ;;
			;; +----+-----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;; |Adv.|FG   |GRAM|           GRAM/GROM Card #            |   FG Color   | ;;
			;; |col |Bit3/|GROM|    (0-255 for GROM, 0-63 for GRAM)    |   Bits 0-2   | ;;
			;; |stck|----------|                                       |              | ;;
			;; |    |col. sqr. |                                       |              | ;;
			;; |    |mode slct.|                                       |              | ;;
			;; +----+-----+----+----+----+----+----+----+----+----+----+----+----+----+ ;;
			;;                                                                          ;;
			;; Color Stack Notes:                                                       ;;
			;;  -- If GRAM card, two MSBs of Card # are ignored, and may be used by     ;;
			;;     the program to store other information.                              ;;
			;;                                                                          ;;
			;;  -- Bit 12 is set and Bit 11 is cleared, this word is treated as a       ;;
			;;     colored-square-mode display word, in the format below.               ;;
			;;                                                                          ;;
			;;  -- The color stack is reset to offset 0 at the start of the display.    ;;
			;;     Setting the 'advance' bit advances the color stack by one for that   ;;
			;;     card and all cards after it in normal left-to-right scanning order.  ;;
			;;                                                                          ;;
			;;  -- Bits 14 and 15 of the display format word are ignored and may be     ;;
			;;     used by the program to store status bits, etc.                       ;;
			;;                                                                          ;;
			;; Display format word layout in Colored Squares Mode:                      ;;
			;;                                                                          ;;
			;;   13   12   11   10    9    8    7    6    5    4    3    2    1    0    ;;
			;; +----+----+----+----+----+----+----+----+----+----+----+----+----+----+  ;;
			;; |Pix3|  1 |  0 | Pix. 3  | Pix. 2 color | Pix. 1 color | Pix. 0 color |  ;;
			;; |Bit2|    |    | bit 0-1 |    (0-7)     |    (0-7)     |    (0-7)     |  ;;
			;; +----+----+----+----+----+----+----+----+----+----+----+----+----+----+  ;;
			;;                                                                          ;;
			;; Pixels are display like so:  +-----+-----+                               ;;
			;;                              |Pixel|Pixel|                               ;;
			;;                              |  0  |  1  |                               ;;
			;;                              +-----+-----+                               ;;
			;;                              |Pixel|Pixel|                               ;;
			;;                              |  2  |  3  |                               ;;
			;;                              +-----+-----+                               ;;
			;;                                                                          ;;
			;; Colored Square Mode Notes:                                               ;;
			;;                                                                          ;;
			;;  -- It is not possible to advance the color stack with a card that is    ;;
			;;     displayed in color-stack mode.                                       ;;
			;;                                                                          ;;
			;;  -- Color 7 in colored squares mode instead shows the current color on   ;;
			;;     the color stack.                                                     ;;
			;;                                                                          ;;
			;;  -- Colors 0 through 6 in a colored-square card will interact with       ;;
			;;     MOBs, but color 7 will not.                                          ;;
			;;                                                                          ;;
			;;  -- Bits 14 and 15 of the display format word are ignored and may be     ;;
			;;     used by the program to store status bits, etc.                       ;;
			;;--------------------------------------------------------------------------;;
0x0                     @@cs_fg0        QEQU    00000000000000b     ; foreground ==  0
0x1                     @@cs_fg1        QEQU    00000000000001b     ; foreground ==  1
0x2                     @@cs_fg2        QEQU    00000000000010b     ; foreground ==  2
0x3                     @@cs_fg3        QEQU    00000000000011b     ; foreground ==  3
0x4                     @@cs_fg4        QEQU    00000000000100b     ; foreground ==  4
0x5                     @@cs_fg5        QEQU    00000000000101b     ; foreground ==  5
0x6                     @@cs_fg6        QEQU    00000000000110b     ; foreground ==  6
0x7                     @@cs_fg7        QEQU    00000000000111b     ; foreground ==  7
0x1000                  @@cs_fg8        QEQU    01000000000000b     ; foreground ==  8
0x1001                  @@cs_fg9        QEQU    01000000000001b     ; foreground ==  9
0x1002                  @@cs_fgA        QEQU    01000000000010b     ; foreground == 10
0x1003                  @@cs_fgB        QEQU    01000000000011b     ; foreground == 11
0x1004                  @@cs_fgC        QEQU    01000000000100b     ; foreground == 12
0x1005                  @@cs_fgD        QEQU    01000000000101b     ; foreground == 13
0x1006                  @@cs_fgE        QEQU    01000000000110b     ; foreground == 14
0x1007                  @@cs_fgF        QEQU    01000000000111b     ; foreground == 15
0x7F8                   @@cs_card       QEQU    00011111111000b     ; Card # mask (GRAM/GROM index #)
0x800                   @@cs_gram       QEQU    00100000000000b     ; Selects cards from GRAM if set
0x2000                  @@cs_advance    QEQU    10000000000000b     ; Advances color stack.
0x1000                  @@cs_colsqr     QEQU    01000000000000b     ; Selects 'colored square mode'

0x7                     @@cs_pix0       QEQU    00000000000111b     ; ColSqr Pixel 0 mask
0x38                    @@cs_pix1       QEQU    00000000111000b     ; ColSqr Pixel 1 mask
0x1C0                   @@cs_pix2       QEQU    00000111000000b     ; ColSqr Pixel 2 mask
0x2600                  @@cs_pix3       QEQU    10011000000000b     ; ColSqr Pixel 3 mask

0x0                     @@cs_pix0_0     QEQU    00000000000000b     ; ColSqr Pixel 0, color == 0
0x1                     @@cs_pix0_1     QEQU    00000000000001b     ; ColSqr Pixel 0, color == 1
0x2                     @@cs_pix0_2     QEQU    00000000000010b     ; ColSqr Pixel 0, color == 2
0x3                     @@cs_pix0_3     QEQU    00000000000011b     ; ColSqr Pixel 0, color == 3
0x4                     @@cs_pix0_4     QEQU    00000000000100b     ; ColSqr Pixel 0, color == 4
0x5                     @@cs_pix0_5     QEQU    00000000000101b     ; ColSqr Pixel 0, color == 5
0x6                     @@cs_pix0_6     QEQU    00000000000110b     ; ColSqr Pixel 0, color == 6
0x7                     @@cs_pix0_7     QEQU    00000000000111b     ; ColSqr Pixel 0, color == 7

0x0                     @@cs_pix1_0     QEQU    00000000000000b     ; ColSqr Pixel 1, color == 0
0x8                     @@cs_pix1_1     QEQU    00000000001000b     ; ColSqr Pixel 1, color == 1
0x10                    @@cs_pix1_2     QEQU    00000000010000b     ; ColSqr Pixel 1, color == 2
0x18                    @@cs_pix1_3     QEQU    00000000011000b     ; ColSqr Pixel 1, color == 3
0x20                    @@cs_pix1_4     QEQU    00000000100000b     ; ColSqr Pixel 1, color == 4
0x28                    @@cs_pix1_5     QEQU    00000000101000b     ; ColSqr Pixel 1, color == 5
0x30                    @@cs_pix1_6     QEQU    00000000110000b     ; ColSqr Pixel 1, color == 6
0x38                    @@cs_pix1_7     QEQU    00000000111000b     ; ColSqr Pixel 1, color == 7

0x0                     @@cs_pix2_0     QEQU    00000000000000b     ; ColSqr Pixel 2, color == 0
0x40                    @@cs_pix2_1     QEQU    00000001000000b     ; ColSqr Pixel 2, color == 1
0x80                    @@cs_pix2_2     QEQU    00000010000000b     ; ColSqr Pixel 2, color == 2
0xC0                    @@cs_pix2_3     QEQU    00000011000000b     ; ColSqr Pixel 2, color == 3
0x100                   @@cs_pix2_4     QEQU    00000100000000b     ; ColSqr Pixel 2, color == 4
0x140                   @@cs_pix2_5     QEQU    00000101000000b     ; ColSqr Pixel 2, color == 5
0x180                   @@cs_pix2_6     QEQU    00000110000000b     ; ColSqr Pixel 2, color == 6
0x1C0                   @@cs_pix2_7     QEQU    00000111000000b     ; ColSqr Pixel 2, color == 7

0x0                     @@cs_pix3_0     QEQU    00000000000000b     ; ColSqr Pixel 3, color == 0
0x200                   @@cs_pix3_1     QEQU    00001000000000b     ; ColSqr Pixel 3, color == 1
0x400                   @@cs_pix3_2     QEQU    00010000000000b     ; ColSqr Pixel 3, color == 2
0x600                   @@cs_pix3_3     QEQU    00011000000000b     ; ColSqr Pixel 3, color == 3
0x2000                  @@cs_pix3_4     QEQU    10000000000000b     ; ColSqr Pixel 3, color == 4
0x2200                  @@cs_pix3_5     QEQU    10001000000000b     ; ColSqr Pixel 3, color == 5
0x2400                  @@cs_pix3_6     QEQU    10010000000000b     ; ColSqr Pixel 3, color == 6
0x2600                  @@cs_pix3_7     QEQU    10011000000000b     ; ColSqr Pixel 3, color == 7

			;;--------------------------------------------------------------------------;;
			;; Useful bits for Foreground/Background Mode                               ;;
			;;                                                                          ;;
			;; Display format word layout in Color Stack Mode:                          ;;
			;;   13   12   11   10    9    8    7    6    5    4    3    2    1    0    ;;
			;; +----+----+----+----+----+----+----+----+----+----+----+----+----+----+  ;;
			;; |BG  |BG  |GRAM|BG  |BG  |      GRAM/GROM Card #       |   FG Color   |  ;;
			;; |Bit2|Bit3|GROM|Bit1|Bit0|          (0 - 63)           |   Bits 0-2   |  ;;
			;; +----+----+----+----+----+----+----+----+----+----+----+----+----+----+  ;;
			;;--------------------------------------------------------------------------;;

0x0                     @@fb_fg0        QEQU    00000000000000b     ; foreground ==  0
0x1                     @@fb_fg1        QEQU    00000000000001b     ; foreground ==  1
0x2                     @@fb_fg2        QEQU    00000000000010b     ; foreground ==  2
0x3                     @@fb_fg3        QEQU    00000000000011b     ; foreground ==  3
0x4                     @@fb_fg4        QEQU    00000000000100b     ; foreground ==  4
0x5                     @@fb_fg5        QEQU    00000000000101b     ; foreground ==  5
0x6                     @@fb_fg6        QEQU    00000000000110b     ; foreground ==  6
0x7                     @@fb_fg7        QEQU    00000000000111b     ; foreground ==  7

0x0                     @@fb_bg0        QEQU    00000000000000b     ; background ==  0
0x200                   @@fb_bg1        QEQU    00001000000000b     ; background ==  1
0x400                   @@fb_bg2        QEQU    00010000000000b     ; background ==  2
0x600                   @@fb_bg3        QEQU    00011000000000b     ; background ==  3
0x2000                  @@fb_bg4        QEQU    10000000000000b     ; background ==  4
0x2200                  @@fb_bg5        QEQU    10001000000000b     ; background ==  5
0x2400                  @@fb_bg6        QEQU    10010000000000b     ; background ==  6
0x2600                  @@fb_bg7        QEQU    10011000000000b     ; background ==  7
0x1000                  @@fb_bg8        QEQU    01000000000000b     ; background ==  8
0x1200                  @@fb_bg9        QEQU    01001000000000b     ; background ==  9
0x1400                  @@fb_bgA        QEQU    01010000000000b     ; background == 10
0x1600                  @@fb_bgB        QEQU    01011000000000b     ; background == 11
0x3000                  @@fb_bgC        QEQU    11000000000000b     ; background == 12
0x3200                  @@fb_bgD        QEQU    11001000000000b     ; background == 13
0x3400                  @@fb_bgE        QEQU    11010000000000b     ; background == 14
0x3600                  @@fb_bgF        QEQU    11011000000000b     ; background == 15

0x1F8                   @@fb_card       QEQU    00000111111000b     ; Card # mask (GRAM/GROM index #)
0x800                   @@fb_gram       QEQU    00100000000000b     ; Selects cards from GRAM if set

			                ENDS

			;;==========================================================================;;
			;;  STIC COLOR-NAMES                                                        ;;
			;;                                                                          ;;
			;;  These are easier to remember short mnemonics for the STIC's colors.     ;;
			;;  You can use the C_xxx colors for color-stack registers, border colors   ;;
			;;  and so on where the color is stored in a contiguous field.  Use the     ;;
			;;  X_xxx color names for the foreground color on display cards in color-   ;;
			;;  stack mode, or for MOB attribute words.                                 ;;
			;;                                                                          ;;
			;;  Note that for the primary color set, C_xxx and X_xxx are identical.     ;;
			;;==========================================================================;;

0x0                     C_BLK   QEQU    $0              ; Black
0x1                     C_BLU   QEQU    $1              ; Blue
0x2                     C_RED   QEQU    $2              ; Red
0x3                     C_TAN   QEQU    $3              ; Tan
0x4                     C_DGR   QEQU    $4              ; Dark Green
0x5                     C_GRN   QEQU    $5              ; Green
0x6                     C_YEL   QEQU    $6              ; Yellow
0x7                     C_WHT   QEQU    $7              ; White
0x8                     C_GRY   QEQU    $8              ; Grey
0x9                     C_CYN   QEQU    $9              ; Cyan
0xA                     C_ORG   QEQU    $A              ; Orange
0xB                     C_BRN   QEQU    $B              ; Brown
0xC                     C_PNK   QEQU    $C              ; Pink
0xD                     C_LBL   QEQU    $D              ; Light Blue
0xE                     C_YGR   QEQU    $E              ; Yellow-Green
0xF                     C_PUR   QEQU    $F              ; Purple

0x0                     X_BLK   QEQU    $0              ; Black
0x1                     X_BLU   QEQU    $1              ; Blue
0x2                     X_RED   QEQU    $2              ; Red
0x3                     X_TAN   QEQU    $3              ; Tan
0x4                     X_DGR   QEQU    $4              ; Dark Green
0x5                     X_GRN   QEQU    $5              ; Green
0x6                     X_YEL   QEQU    $6              ; Yellow
0x7                     X_WHT   QEQU    $7              ; White
0x1000                  X_GRY   QEQU    $1000           ; Grey
0x1001                  X_CYN   QEQU    $1001           ; Cyan
0x1002                  X_ORG   QEQU    $1002           ; Orange
0x1003                  X_BRN   QEQU    $1003           ; Brown
0x1004                  X_PNK   QEQU    $1004           ; Pink
0x1005                  X_LBL   QEQU    $1005           ; Light Blue
0x1006                  X_YGR   QEQU    $1006           ; Yellow-Green
0x1007                  X_PUR   QEQU    $1007           ; Purple

			;; ======================================================================== ;;
			;;  End of File:  gimini.asm                                                ;;
			;; ======================================================================== ;;

			        ;
			        ; Encabezado de la ROM
			        ;
5000 000D 0050 		ROMHDR: BIDECLE ZERO            ; MOB picture base   (ap. a lista nula)
5002 000D 0050 		        BIDECLE ZERO            ; Tabla de procesos  (ap. a lista nula)
5004 0051 0050 		        BIDECLE MAIN            ; Inicio del programa
5006 000D 0050 		        BIDECLE ZERO            ; Base imagen fondo  (ap. a lista nula)
5008 000F 0050 		        BIDECLE ONES            ; Imagenes GRAM      (ap. a lista nula)
500A 0014 0050 		        BIDECLE TITLE           ; Título del cartucho y fecha
500C 03C0 		        DECLE   $03C0           ; Sin título ECS, inicia código después título,
			                                ; ... sin clicks
			                                
500D 0000 		ZERO:   DECLE   $0000           ; Control de borde de a pantalla
500E 0000 		        DECLE   $0000           ; 0 = color stack, 1 = f/b mode
			        
500F 0001 0001 		ONES:   DECLE   C_BLU, C_BLU    ; Initial color stack 0 and 1: Blue
5011 0001 0001 		        DECLE   C_BLU, C_BLU    ; Initial color stack 2 and 3: Blue
5013 0001 		        DECLE   C_BLU           ; Initial border color: Blue

			        ;
			        ; Título, modifica para eliminar info de Mattel
				; Las 3 instrucciones comentadas evitan que se use la
				; presentación típica de los juegos Mattel Intellivision.
			        ;
0x5014                  TITLE:  PROC
5014 0072 0053 0070 	        BYTE    114, 'Space Raid', 0
5017 0061 0063 0065 0020 0052 0061 0069 0064 
501F 0000 
			;        BEGIN

			        ; Patch the title string to say '=JRMZ=' instead of Mattel.
5020 0004 016C 0266 	        CALL    PRINT.FLS       ; Write string (ptr in R5)
5023 0007 023D 		        DECLE   C_WHT, $23D     ; White, Point to 'Mattel' in top-left
5025 0020 0020 004F 	        STRING  '  Oscar'    ; Guess who?  :-)
5028 0073 0063 0061 0072 
502C 0020 0054 006F 	        STRING  ' Toledo G. '
502F 006C 0065 0064 006F 0020 0047 002E 0020 
5037 0000 		        BYTE    0

5038 0004 016C 0266 	        CALL    PRINT.FLS       ; Write string (ptr in R1)
503B 0007 02C9 		        DECLE   C_WHT, $2C9     ; White, Point to 'Mattel' in lower-right
503D 0028 0043 0029 	        STRING  '(C) Copyright 2014 '   ; Guess who?  :-)
5040 0020 0043 006F 0070 0079 0072 0069 0067 
5048 0068 0074 0020 0032 0030 0031 0034 0020 
5050 0000 		        BYTE    0

			        ; Done.
			;        RETURN                  ; Return to EXEC for title screen display
			        ENDP

			        ;
			        ; Programa principal
			        ;
0x5051                  MAIN:   PROC
			;        BEGIN

5051 0003 		        DIS
5052 02BE 02F0 		        MVII    #STACK, R6

0x5054                  @@0:    
5054 02B9 00FE 			MVII #$0fe,R1           ; 240 palabras + 14 de sonido
5056 02BC 0100 		        MVII #$100,R4           ; 8-bit scratch RAM
5058 0004 015C 011A 	        CALL FILLZERO
505B 02B9 000E 			MVII #_SYSTEM-$310,R1           ; 16 palabras
505D 02BC 0310 		        MVII #$310,R4           ; 16-bit scratch RAM
505F 0004 015C 011A 	        CALL FILLZERO
5062 02B9 001E 			MVII #10*3,R1
5064 02BC 0162 			MVII #puntos_nombres,R4
5066 02B8 000E 			MVII #$0E,R0
5068 0004 015C 011B 		CALL FILLMEM

506B 02B8 0001 			MVII #1,R0		; Evita breve flasheo
506D 0240 013E 			MVO R0,titulo
				
506F 0004 015C 0116 	        CALL    CLRSCR          ; Limpia la pantalla

5072 02B8 5FE7 		        MVII    #vector_int,R0  ; Apunta a la rutina de interrupción
5074 0240 0100 		        MVO     R0,     ISRVEC
5076 0040 		        SWAP    R0
5077 0240 0101 		        MVO     R0,     ISRVEC+1

5079 0002 		        EIS
507A 02B8 0031 			MVII #$031,R0
507C 0240 0154 			MVO R0,psg_copia+8	; Configura ruido en canal A
507E 0200 0162 			B reinicio

				;
				; Detecta si califica para la tabla de récords
				;
0x5080                  reinicio3:
5080 02BC 0314 			MVII #puntos_records,R4
5082 01D2 			CLRR R2
5083 02A0 		@@180:	MVI@ R4,R0
5084 0340 0312 			CMP puntos,R0
5086 0205 0009 			BLT @@181
5088 000A 			INCR R2
5089 037A 000A 			CMPI #10,R2
508B 022C 0009 			BNE @@180
508D 0200 0002 			B @@181

0x508F                  reinicio2:
508F 02BA 000B 			MVII #11,R2
5091 0242 0161 		@@181:	MVO R2,califica

5093 02B8 0001 			MVII #1,R0
5095 0240 013E 			MVO R0,titulo

5097 0004 015C 03D3 		CALL espera_int
509A 0004 015C 0116 		CALL CLRSCR		; Limpia la pantalla.
				;
				; Inserta al ganador
				;
509D 0280 0161 			MVI califica,R0
509F 0378 000A 			CMPI #10,R0
50A1 020D 002B 			BGE @@184
50A3 02B8 0009 			MVII #9,R0
50A5 0340 0161 		@@183:	CMP califica,R0
50A7 0204 0013 			BEQ @@182
50A9 0010 			DECR R0
50AA 02BC 0314 			MVII #puntos_records,R4
50AC 00C4 			ADDR R0,R4
50AD 02A1 			MVI@ R4,R1
50AE 0261 			MVO@ R1,R4
50AF 02BC 0162 			MVII #puntos_nombres,R4
50B1 00C4 			ADDR R0,R4
50B2 00C4 			ADDR R0,R4
50B3 00C4 			ADDR R0,R4
50B4 02A1 			MVI@ R4,R1
50B5 02A2 			MVI@ R4,R2
50B6 02A3 			MVI@ R4,R3
50B7 0261 			MVO@ R1,R4
50B8 0262 			MVO@ R2,R4
50B9 0263 			MVO@ R3,R4
50BA 0220 0016 			B @@183

50BC 0280 0161 		@@182:	MVI califica,R0
50BE 02BC 0314 			MVII #puntos_records,R4
50C0 00C4 			ADDR R0,R4
50C1 0281 0312 			MVI puntos,R1
50C3 0261 			MVO@ R1,R4
50C4 02BC 0162 			MVII #puntos_nombres,R4
50C6 00C4 			ADDR R0,R4
50C7 00C4 			ADDR R0,R4
50C8 00C4 			ADDR R0,R4
50C9 02B9 000E 			MVII #$0E,R1	; Tres puntos como nuevo nombre
50CB 0261 			MVO@ R1,R4
50CC 0261 			MVO@ R1,R4
50CD 0261 			MVO@ R1,R4

50CE 0004 015C 03D3 	@@184:	CALL espera_int
50D1 02BC 6E58 			MVII #mensaje_4,R4
50D3 02BD 0203 			MVII #$203,R5
50D5 02B9 000E 			MVII #14,R1
50D7 02A0 		@@174:	MVI@ R4,R0
50D8 0268 			MVO@ R0,R5
50D9 0011 			DECR R1
50DA 022C 0004 			BNE @@174
50DC 02B9 003E 			MVII #7*8+6,R1
50DE 02BC 0162 			MVII #puntos_nombres,R4
50E0 02BB 0314 			MVII #puntos_records,R3
50E2 02BD 022C 			MVII #$22C,R5
0x50E4                  @@175:
50E4 0271 			PSHR R1
50E5 0065 			SLR R1,2
50E6 0061 			SLR R1,1
50E7 03B9 0007 			ANDI #7,R1
50E9 02A0 			MVI@ R4,R0
50EA 004C 			SLL R0,2
50EB 0048 			SLL R0,1
50EC 01C8 			XORR R1,R0
50ED 0268 			MVO@ R0,R5
50EE 02A0 			MVI@ R4,R0
50EF 004C 			SLL R0,2
50F0 0048 			SLL R0,1
50F1 01C8 			XORR R1,R0
50F2 0268 			MVO@ R0,R5
50F3 02A0 			MVI@ R4,R0
50F4 004C 			SLL R0,2
50F5 0048 			SLL R0,1
50F6 01C8 			XORR R1,R0
50F7 0268 			MVO@ R0,R5
50F8 02FD 0003 			ADDI #3,R5
50FA 02B1 			PULR R1
				;
				; Ilustra la puntuación
				;
50FB 0271 			PSHR R1
50FC 03B9 0007 			ANDI #7,R1
50FE 0298 			MVI@ R3,R0
50FF 000B 			INCR R3
5100 02BA 0078 			MVII #$0F*8,R2
5102 00CA 			ADDR R1,R2
			;	DIGITO 10000
5103 02FA 0008 			ADDI #8,R2
5105 0338 2710 			SUBI #10000,R0
5107 0221 0005 			BC $-4
5109 02F8 2710 			ADDI #10000,R0
510B 037A 0088 			CMPI #$11*8,R2
510D 020D 0001 			BGE @@176
510F 01D2 			CLRR R2
5110 026A 		@@176:	MVO@ R2,R5
5111 02BA 0078 			MVII #$0F*8,R2
5113 00CA 			ADDR R1,R2
			;	DIGITO 1000
5114 02FA 0008 			ADDI #8,R2
5116 0338 03E8 			SUBI #1000,R0
5118 0221 0005 			BC $-4
511A 02F8 03E8 			ADDI #1000,R0
511C 026A 			MVO@ R2,R5
511D 02BA 0078 			MVII #$0F*8,R2
511F 00CA 			ADDR R1,R2
			;	DIGITO 100
5120 02FA 0008 			ADDI #8,R2
5122 0338 0064 			SUBI #100,R0
5124 0221 0005 			BC $-4
5126 02F8 0064 			ADDI #100,R0
5128 026A 			MVO@ R2,R5
5129 02BA 0078 			MVII #$0F*8,R2
512B 00CA 			ADDR R1,R2
			;	DIGITO 10
512C 02FA 0008 			ADDI #8,R2
512E 0338 000A 			SUBI #10,R0
5130 0221 0005 			BC $-4
5132 02F8 000A 			ADDI #10,R0
5134 026A 			MVO@ R2,R5
5135 02BA 0078 			MVII #$0F*8,R2
5137 00CA 			ADDR R1,R2
			;	DIGITO 1
5138 02FA 0008 			ADDI #8,R2
513A 0338 0001 			SUBI #1,R0
513C 0221 0005 			BC $-4
513E 02F8 0001 			ADDI #1,R0
5140 026A 			MVO@ R2,R5
5141 02BA 0080 			MVII #$10*8,R2
5143 00CA 			ADDR R1,R2
5144 026A 			MVO@ R2,R5
5145 02B1 			PULR R1
5146 0379 003E 			CMPI #7*8+6,R1
5148 02B9 003E 			MVII #7*8+6,R1
514A 020C 0002 			BNE @@197
514C 02B9 002B 			MVII #5*8+3,R1
514E 02FD 0008 		@@197:	ADDI #8,R5
5150 037D 02F4 			CMPI #$2F4,R5
5152 022C 006F 			BNE @@175
				;
				; ¿Entra iniciales?
				;
5154 0280 0161 			MVI califica,R0
5156 0378 000A 			CMPI #10,R0
5158 020D 002E 			BGE @@185
515A 02BA 022C 			MVII #$22C,R2	; Base en la pantalla
515C 0081 			MOVR R0,R1
515D 004D 			SLL R1,2	; x4
515E 00C1 			ADDR R0,R1	; x5
515F 004D 			SLL R1,2	; x20
5160 00CA 			ADDR R1,R2
5161 02BB 0162 			MVII #puntos_nombres,R3
5163 00C3 			ADDR R0,R3
5164 00C3 			ADDR R0,R3
5165 00C3 			ADDR R0,R3
5166 02B8 0021 			MVII #$21,R0	; Empieza con una letra A
5168 0258 			MVO@ R0,R3
5169 0004 015C 0347 	@@204:	CALL letra_iniciales
516C 0224 0004 			BEQ @@204
516E 0298 			MVI@ R3,R0
516F 000B 			INCR R3		; Pasa a siguiente letra
5170 0258 			MVO@ R0,R3
5171 000A 			INCR R2
5172 0004 015C 0347 	@@206:	CALL letra_iniciales
5175 020C 0004 			BNE @@205
5177 0013 			DECR R3		; Retrocede una letra
5178 0012 			DECR R2
5179 0220 0011 			B @@204

517B 0298 		@@205:	MVI@ R3,R0
517C 000B 			INCR R3		; Pasa a siguiente letra
517D 0258 			MVO@ R0,R3
517E 000A 			INCR R2
517F 0004 015C 0347 		CALL letra_iniciales
5182 020C 0004 			BNE @@185
5184 0013 			DECR R3		; Retrocede una letra
5185 0012 			DECR R2
5186 0220 0015 			B @@206

0x5188                  @@185:

5188 02B8 003C 			MVII #60,R0
518A 0270 		@@177:	PSHR R0
518B 0004 015C 03D3 		CALL espera_int
518E 02B0 			PULR R0
518F 0010 			DECR R0
5190 022C 0007 			BNE @@177
5192 0010 		@@178:	DECR R0
5193 0378 FE0C 			CMPI #-500,R0
5195 0204 000E 			BEQ @@179
5197 0270 			PSHR R0
5198 0004 015C 03D3 		CALL espera_int
519B 02B0 			PULR R0
519C 0004 015C 03C1 		CALL boton_oprimido
519F 0224 000E 			BEQ @@178
51A1 02B8 000A 			MVII #10,R0		; En demo oprimir botón aborta
51A3 0240 0161 			MVO R0,califica

51A5 0280 0161 		@@179:	MVI califica,R0
51A7 0378 000B 			CMPI #11,R0		; ¿No estaba en demos?
51A9 020C 0037 			BNE reinicio		; Vuelve a pantalla de título
51AB 0004 015C 03D3 		CALL espera_int
51AE 0004 015C 0116 		CALL CLRSCR		; Limpia la pantalla.
51B1 0004 015C 03D3 		CALL espera_int

				;
				; Un segundo para mostrar tabla de puntuaciones
				;
51B4 02B8 003C 			MVII #60,R0
51B6 0270 		@@170:	PSHR R0
51B7 0378 FEE8 			CMPI #-280,R0
51B9 02BC 6CDC 			MVII #mensaje_3,R4	; Creditos
51BB 02BD 0200 			MVII #$200,R5
51BD 02B9 00F0 			MVII #240,R1
51BF 020D 0006 			BGE @@198
51C1 02BC 6DCC 			MVII #mensaje_5,R4
51C3 02BD 023C 			MVII #$200+3*20,R5
51C5 02B9 008C 			MVII #240-5*20,R1
0x51C7                  @@198:	
51C7 02A0 		@@169:	MVI@ R4,R0
51C8 0268 			MVO@ R0,R5
51C9 0011 			DECR R1
51CA 022C 0004 			BNE @@169
51CC 0004 015C 03D3 		CALL espera_int
51CF 02B0 			PULR R0
51D0 0010 			DECR R0
51D1 0378 FE0C 			CMPI #-500,R0
51D3 0204 000D 			BEQ reinicio
51D5 0080 			TSTR R0
51D6 0223 0021 			BPL @@170
51D8 0270 			PSHR R0
51D9 0004 015C 03D3 		CALL espera_int
51DC 02B0 			PULR R0
51DD 0004 015C 03C1 		CALL boton_oprimido
51E0 0224 002B 			BEQ @@170

0x51E2                  reinicio:
51E2 02B8 0050 			MVII #$50,R0
51E4 0240 0113 			MVO R0,gasolina
51E6 02B8 0001 			MVII #1,R0
51E8 0240 013E 			MVO R0,titulo
51EA 0004 015C 03D3 		CALL espera_int
51ED 0004 015C 0116 	        CALL    CLRSCR          ; Limpia la pantalla
51F0 0004 015C 03D3 		CALL espera_int
51F3 02B8 0083 			MVII #$83,R0
51F5 0240 0112 			MVO R0,inicia_sprites
51F7 0004 015C 03D3 	@@147:	CALL espera_int
51FA 0280 0112 			MVI inicia_sprites,R0
51FC 0080 			TSTR R0
51FD 022C 0007 			BNE @@147
51FF 02BA 0006 			MVII #$0006,R2
5201 02B9 003C 			MVII #60,R1
5203 0272 		@@149:	PSHR R2
5204 02BC 6AD8 			MVII #logo_pantalla+1,R4
5206 02BD 0200 			MVII #$0200,R5
5208 02BB 000B 			MVII #11,R3
0x520A                  @@148:	
520A 02A0 			MVI@ R4,R0	; 1
520B 01D0 			XORR R2,R0
520C 0268 			MVO@ R0,R5
520D 02A0 			MVI@ R4,R0	; 2
520E 01D0 			XORR R2,R0
520F 0268 			MVO@ R0,R5
5210 02A0 			MVI@ R4,R0	; 3
5211 01D0 			XORR R2,R0
5212 0268 			MVO@ R0,R5
5213 02A0 			MVI@ R4,R0	; 4
5214 01D0 			XORR R2,R0
5215 0268 			MVO@ R0,R5
5216 02A0 			MVI@ R4,R0	; 5
5217 01D0 			XORR R2,R0
5218 0268 			MVO@ R0,R5

5219 02A0 			MVI@ R4,R0	; 1
521A 01D0 			XORR R2,R0
521B 0268 			MVO@ R0,R5
521C 02A0 			MVI@ R4,R0	; 2
521D 01D0 			XORR R2,R0
521E 0268 			MVO@ R0,R5
521F 02A0 			MVI@ R4,R0	; 3
5220 01D0 			XORR R2,R0
5221 0268 			MVO@ R0,R5
5222 02A0 			MVI@ R4,R0	; 4
5223 01D0 			XORR R2,R0
5224 0268 			MVO@ R0,R5
5225 02A0 			MVI@ R4,R0	; 5
5226 01D0 			XORR R2,R0
5227 0268 			MVO@ R0,R5

5228 02A0 			MVI@ R4,R0	; 1
5229 01D0 			XORR R2,R0
522A 0268 			MVO@ R0,R5
522B 02A0 			MVI@ R4,R0	; 2
522C 01D0 			XORR R2,R0
522D 0268 			MVO@ R0,R5
522E 02A0 			MVI@ R4,R0	; 3
522F 01D0 			XORR R2,R0
5230 0268 			MVO@ R0,R5
5231 02A0 			MVI@ R4,R0	; 4
5232 01D0 			XORR R2,R0
5233 0268 			MVO@ R0,R5
5234 02A0 			MVI@ R4,R0	; 5
5235 01D0 			XORR R2,R0
5236 0268 			MVO@ R0,R5

5237 02A0 			MVI@ R4,R0	; 1
5238 01D0 			XORR R2,R0
5239 0268 			MVO@ R0,R5
523A 02A0 			MVI@ R4,R0	; 2
523B 01D0 			XORR R2,R0
523C 0268 			MVO@ R0,R5
523D 02A0 			MVI@ R4,R0	; 3
523E 01D0 			XORR R2,R0
523F 0268 			MVO@ R0,R5
5240 02A0 			MVI@ R4,R0	; 4
5241 01D0 			XORR R2,R0
5242 0268 			MVO@ R0,R5
5243 02A0 			MVI@ R4,R0	; 5
5244 01D0 			XORR R2,R0
5245 0268 			MVO@ R0,R5

5246 02FA 4000 			ADDI #$4000,R2
5248 0209 0008 			BNC @@156
524A 03FA 0001 			XORI #$0001,R2
524C 037A 0007 			CMPI #$0007,R2
524E 020C 0002 			BNE @@156
5250 03FA 8000 			XORI #$8000,R2
0x5252                  @@156:

5252 0013 			DECR R3
5253 022C 004A 			BNE @@148
5255 02B2 			PULR R2
5256 02FA 4000 			ADDI #$4000,R2
5258 0209 0008 			BNC @@157
525A 03FA 0001 			XORI #$0001,R2
525C 037A 0007 			CMPI #$0007,R2
525E 020C 0002 			BNE @@157
5260 03FA 8000 			XORI #$8000,R2
0x5262                  @@157:
5262 0011 			DECR R1
5263 020B 0015 			BMI @@150
5265 0271 			PSHR R1
5266 0004 015C 03D3 		CALL espera_int
5269 02B1 			PULR R1
526A 0089 			TSTR R1
526B 022C 0069 			BNE @@149
526D 02BC 6CD2 			MVII #mensaje_2,R4
526F 02BD 02E1 			MVII #$02E1,R5
5271 02BB 000A 			MVII #10,R3
5273 02A0 		@@158:	MVI@ R4,R0
5274 0268 			MVO@ R0,R5
5275 0013 			DECR R3
5276 022C 0004 			BNE @@158
5278 0220 0076 			B @@149

527A 0379 FF06 		@@150:	CMPI #-250,R1
527C 0204 0015 			BEQ @@159
527E 0271 			PSHR R1
527F 0004 015C 03D3 		CALL espera_int
5282 0004 015C 03C1 		CALL boton_oprimido
5285 02B1 			PULR R1
5286 02BA C006 			MVII #$C006,R2
5288 0224 0086 			BEQ @@149
528A 02B8 0004 		        MVII #4,R0
528C 0240 0311 		        MVO R0,vidas
528E 01C0 			CLRR R0
528F 0240 013F 			MVO R0,demo
5291 0200 0010 			B @@160

				;
				; Inicia demostración
				;
5293 01C0 		@@159:	CLRR R0
5294 0240 0311 		        MVO R0,vidas
5296 0240 0141 			MVO R0,estado_demo
5298 0280 0140 			MVI ciclo_demo,R0
529A 0008 			INCR R0
529B 03B8 0001 			ANDI #1,R0
529D 0240 0140 			MVO R0,ciclo_demo
529F 02B8 0001 			MVII #1,R0
52A1 0240 013F 			MVO R0,demo
52A3 0004 015C 0116 	@@160:	CALL    CLRSCR          ; Limpia la pantalla
52A6 01C0 			CLRR R0
52A7 0240 013E 			MVO R0,titulo
52A9 02B8 000F 		        MVII #$0F,R0
52AB 0240 012D 		        MVO R0,dificultad
52AD 02B8 000F 		        MVII #15,R0
52AF 0240 0104 		        MVO R0,x_jugador
52B1 01C0 		        CLRR R0
52B2 0240 0312 		        MVO R0,puntos
52B4 02B8 00C8 			MVII #200,R0
52B6 0240 0313 			MVO R0,puntos_vida
52B8 0280 013F 			MVI demo,R0
52BA 0080 			TSTR R0		; ¿En demostración?
52BB 0204 0004 			BEQ @@166	; No, salta.
52BD 0280 0140 			MVI ciclo_demo,R0
52BF 0200 0001 			B @@167

52C1 01C0 		@@166:	CLRR R0	; Nivel inicial al jugar
52C2 0240 012E 		@@167:	MVO R0,nivel
52C4 0004 015C 02B5 	        CALl sel_nivel2
			        ; En la jerga del Intellivision, se le llama card a cada caracter
			        ; La GROM del Intellivision contiene caracteres predefinidos en el
			        ; rango 0-215, para accederlos en el modo más común, se utiliza su
			        ; número multiplicado por 8 (los 3 bits bajos son el color)
			        ; Los caracteres ASCII 32-127 están reflejados en el rango 0-95.
			;       MVII #(65-32)*8+C_YEL,R0
			;@@0:   MVII #$0F0,R1
			;       MVII #$200,R4
			;       CALL FILLMEM
			;       MVII #$10,R1
			;@@1:   MVII #$10,R2
			;@@2:   DECR R2
			;       BNEQ @@2
			;       DECR R1
			;       BNEQ @@1

			;       CALL    CLRSCR          ; Clear the screen

			;       CALL    PRINT.FLS       ; Display our message.
			;       DECLE   C_YEL           ; Yellow
			;       DECLE   $200 + 5*20 + 4 ; Row #5, colukmn #4 on screen
			;       STRING  'Hello World!'
			;       BYTE    0

52C7 02B8 00FF 			MVII #$FF,R0
52C9 0240 0142 			MVO R0,pixel
52CB 02B8 0087 			MVII #$87,R0
52CD 0240 0112 			MVO R0,inicia_sprites
52CF 0004 015C 03D3 	@@195:	CALL espera_int
52D2 0280 0112 			MVI inicia_sprites,R0
52D4 0080 			TSTR R0
52D5 022C 0007 			BNE @@195
52D7 02B8 0003 		        MVII #3,R0
52D9 0240 0112 		        MVO R0,inicia_sprites
52DB 0004 015C 0228 		CALL graficos_nivel
52DE 0004 015C 03D3 	@@153:	CALL espera_int
52E1 0280 0112 			MVI inicia_sprites,R0
52E3 0080 			TSTR R0
52E4 022C 0007 			BNE @@153
0x52E6                  bucle:
52E6 0004 015C 03D3 	        CALL espera_int
52E9 0280 0104 			MVI x_jugador,R0
52EB 0081 		        MOVR R0,R1
52EC 0061 		        SLR R1,1
52ED 0282 0105 		        MVI y_jugador,R2
52EF 02FA 0008 		        ADDI #8,R2
52F1 010A 		        SUBR R1,R2
52F2 0242 010D 		        MVO R2,yj3d
52F4 0280 0137 			MVI explosion,R0
52F6 0080 			TSTR R0			; ¿Jugador explotando?
52F7 0204 00EA 			BEQ @@55
52F9 0280 011B 			MVI xe3d1,R0
52FB 0008 			INCR R0
52FC 0240 011B 			MVO R0,xe3d1
52FE 0280 011D 			MVI xe3d3,R0
5300 0008 			INCR R0
5301 0240 011D 			MVO R0,xe3d3
5303 0280 011F 			MVI ye3d1,R0
5305 0080 			TSTR R0
5306 0204 0008 			BEQ @@56
5308 0008 			INCR R0
5309 0378 0060 			CMPI #96,R0
530B 020C 0001 			BNE @@57
530D 01C0 			CLRR R0
530E 0240 011F 		@@57:	MVO R0,ye3d1
5310 0280 0121 		@@56:	MVI ye3d3,R0
5312 0080 			TSTR R0
5313 0204 0003 			BEQ @@58
5315 0010 			DECR R0
5316 0240 0121 			MVO R0,ye3d3
5318 0280 0120 		@@58:	MVI ye3d2,R0
531A 0080 			TSTR R0
531B 0204 000D 			BEQ @@59
531D 0281 011C 			MVI xe3d2,R1
531F 0009 			INCR R1		; Explosión intermedia
5320 0009 			INCR R1
5321 0241 011C 			MVO R1,xe3d2
5323 0379 0078 			CMPI #120,R1
5325 0209 0003 			BNC @@59
5327 01C0 			CLRR R0
5328 0240 0120 			MVO R0,ye3d2
532A 0280 0137 		@@59:	MVI explosion,R0
532C 0010 			DECR R0		; ¿Finalizó explosión?
532D 0240 0137 			MVO R0,explosion
532F 020C 04BE 			BNE @@60	; No, salta
5331 0280 0311 			MVI vidas,R0
5333 0010 			DECR R0		; ¿Aún tiene vidas?
5334 0240 0311 			MVO R0,vidas
5336 0203 0096 			BPL @@61	; Sí, salta
5338 0280 013F 			MVI demo,R0
533A 0080 			TSTR R0
533B 020C 005F 			BNE @@172

				; Mensaje de Game Over
533D 01C0 			CLRR R0
533E 0240 011E 			MVO R0,ye3d0
5340 0240 011F 			MVO R0,ye3d1
5342 0240 0120 			MVO R0,ye3d2
5344 0240 0121 			MVO R0,ye3d3
5346 0240 0109 			MVO R0,y_bala
5348 0240 010F 			MVO R0,y_bala2
534A 0240 0157 			MVO R0,psg_copia+11
534C 0240 0158 			MVO R0,psg_copia+12
534E 0240 0159 			MVO R0,psg_copia+13
5350 02B8 00FF 			MVII #$FF,R0
5352 0240 0123 			MVO R0,offset9
5354 02BC 6CC7 			MVII #mensaje_1,R4
5356 02BD 0268 			MVII #$0268,R5
5358 02B9 000B 			MVII #11,R1
535A 02A0 		@@145:	MVI@ R4,R0
535B 0268 			MVO@ R0,R5
535C 0011 			DECR R1
535D 022C 0004 			BNE @@145
535F 02B8 0057 			MVII #sonido_9-base_sonido,R0
5361 0240 0146 			MVO R0,sonido_base0
5363 0240 0147 			MVO R0,sonido_ap0
5365 0084 			MOVR R0,R4
5366 02FC 68D5 			ADDI #base_sonido,R4
5368 02A0 			MVI@ R4,R0
5369 03B8 001F 			ANDI #$1F,R0
536B 0240 0148 			MVO R0,sonido_d0
536D 02BA 003C 			MVII #60,R2
536F 0272 		@@143:	PSHR R2
5370 0004 015C 0120 		CALL reproduce_sonido
5373 0004 0150 03BF 		CALL voz_doble
5376 0004 015C 03D3 		CALL espera_int
5379 02B2 			PULR R2
537A 0012 			DECR R2
537B 022C 000D 			BNE @@143
537D 02BA 0258 			MVII #600,R2	; 10 segundos para Game Over
537F 0272 		@@144:	PSHR R2
5380 0004 015C 0120 		CALL reproduce_sonido
5383 0004 0150 03BF 		CALL voz_doble
5386 0004 015C 03D3 		CALL espera_int
5389 0004 015C 03C1 		CALL boton_oprimido
538C 02B2 		        PULR R2
538D 020C 0003 			BNE @@164
538F 0012 			DECR R2
5390 022C 0012 			BNE @@144
5392 01C0 		@@164:	CLRR R0
5393 0240 0148 			MVO R0,sonido_d0
5395 0240 0146 			MVO R0,sonido_base0
5397 0004 015C 0120 		CALL reproduce_sonido
539A 0220 031B 			B reinicio3	; Reinicio y verifica si califica

0x539C                  @@172:
539C 01C0 			CLRR R0
539D 0240 011E 			MVO R0,ye3d0
539F 0240 011F 			MVO R0,ye3d1
53A1 0240 0120 			MVO R0,ye3d2
53A3 0240 0121 			MVO R0,ye3d3
53A5 0240 0109 			MVO R0,y_bala
53A7 0240 010F 			MVO R0,y_bala2
53A9 0240 0157 			MVO R0,psg_copia+11
53AB 0240 0158 			MVO R0,psg_copia+12
53AD 0240 0159 			MVO R0,psg_copia+13
53AF 0240 014B 			MVO R0,sonido_d1
53B1 02B8 00FF 			MVII #$FF,R0
53B3 0240 0123 			MVO R0,offset9
53B5 01C0 			CLRR R0
53B6 0240 0148 			MVO R0,sonido_d0
53B8 0240 0146 			MVO R0,sonido_base0
53BA 0004 015C 0120 		CALL reproduce_sonido
53BD 0220 032F 			B reinicio2	; Reinicio sin calificar

0x53BF                  voz_doble:
53BF 0280 014E 			MVI psg_copia+2,R0
53C1 0060 			SLR R0,1
53C2 0010 			DECR R0
53C3 0240 014D 			MVO R0,psg_copia+1
53C5 0280 0152 			MVI psg_copia+6,R0
53C7 0240 0151 			MVO R0,psg_copia+5
53C9 0280 0159 			MVI psg_copia+13,R0
53CB 0240 0158 			MVO R0,psg_copia+12
53CD 00AF 			JR R5

53CE 0283 0131 		@@61:	MVI lector,R3
53D0 0004 015C 02B5 		CALL sel_nivel2	; Reinicia el nivel
53D3 0303 0131 			SUB lector,R3	; Verifica avance
53D5 037B 000C 			CMPI #12,R3	; ¿Más de la mitad del nivel?
53D7 0209 0416 			BNC @@60	; No, salta.
53D9 02B9 0018 			MVII #24,R1	; Sí, inicia a medio nivel
53DB 0004 015C 0301 	@@62:	CALL adelanta_lector
53DE 0011 			DECR R1
53DF 022C 0005 			BNE @@62
53E1 0200 040C 			B @@60

0x53E3                  @@55: 	
			        ;
			        ; Agrega enemigos según el nivel
			        ;
53E3 0280 012E 		        MVI nivel,R0
53E5 03B8 0001 		        ANDI #$01,R0
53E7 0204 028E 		        BEQ @@15
			        ;
			        ; Fortaleza: enemigos fijos
			        ;
53E9 0280 012F 		        MVI tiempo,R0
53EB 0378 0019 			CMPI #25,R0	; ¿Agrega un adorno?
53ED 020C 0023 			BNE @@84	; No, salta.
53EF 0280 0125 			MVI offset1,R0
53F1 0378 0060 			CMPI #$60,R0
53F3 0204 001D 			BEQ @@84
53F5 0378 0088 			CMPI #$88,R0	; ¿Es $88,$98,$a0,$b8,$c0,$c8,$d0,$d8 o $e0?
53F7 0201 0019 			BC @@84		; Sí, evita poner adorno
53F9 0280 011E 			MVI ye3d0,R0
53FB 0080 			TSTR R0
53FC 020C 0014 			BNE @@84
53FE 02B8 00AA 			MVII #170,R0
5400 0240 011A 			MVO R0,xe3d0
5402 02B8 0065 			MVII #101,R0
5404 0240 011E 			MVO R0,ye3d0
5406 02B8 00E0 			MVII #$E0,R0
5408 0281 0139 			MVI rand,R1
540A 03B9 0080 			ANDI #$80,R1
540C 0204 0002 			BEQ @@85
540E 02B8 00B0 			MVII #$B0,R0
5410 0240 0124 		@@85:	MVO R0,offset0
5412 0280 012F 		@@84:	MVI tiempo,R0	; ¿Tiempo de poner otro enemigo?
5414 0010 			DECR R0
5415 0240 012F 			MVO R0,tiempo
5417 020C 00F1 		        BNE @@86
5419 0004 015C 02F1 		CALL lee_byte
541C 03B8 00FF 			ANDI #$FF,R0	; ¿Final de nivel?
541E 0204 000A 			BEQ @@87	; Sí, salta
5420 03B8 00F8 			ANDI #$F8,R0
5422 0378 00E8 			CMPI #$E8,R0	; ¿Adorno de nivel?
5424 0204 0043 			BEQ @@89
5426 0378 0090 			CMPI #$90,R0	; ¿Alienígena, misil, robotote $a0 o electricidad $b8?
						; ¿Pared $c0,$c8,$d0,$d8 o $e0?
5428 0209 003F 			BNC @@89	; No, salta.
542A 0280 011F 		@@87:	MVI ye3d1,R0
542C 0080 			TSTR R0		; ¿Sprite 1 activo?
542D 020C 0092 			BNE @@88	; Sí, salta y espera un poco más
542F 0280 0120 			MVI ye3d2,R0
5431 0080 			TSTR R0		; ¿Sprite 2 activo?
5432 020C 008D 			BNE @@88	; Sí, salta y espera un poco más
5434 0280 0121 			MVI ye3d3,R0
5436 0080 			TSTR R0		; ¿Sprite 3 activo?
5437 020C 0088 			BNE @@88	; Sí, salta y espera un poco más
5439 02B9 0008 			MVII #8,R1
543B 0004 015C 02F1 		CALL lee_byte
543E 03B8 00FF 			ANDI #$FF,R0
5440 020C 0005 			BNE @@90
5442 0004 015C 0217 		CALL adelanta_nivel
5445 0200 03A8 			B @@16

5447 03B8 00F8 		@@90:	ANDI #$F8,R0
5449 0378 00C0 			CMPI #$C0,R0
544B 0209 0004 			BNC @@91
544D 0378 00E8 			CMPI #$E8,R0
544F 0209 0006 			BNC @@92
5451 0378 00B8 		@@91:	CMPI #$B8,R0	; ¿Electricidad?
5453 0204 0061 			BEQ @@93
				; Nada que hacer.
5455 0200 005F 			B @@93

5457 0378 00D0 		@@92:	CMPI #$D0,R0	; ¿Pared con hueco amplio?
5459 02B9 0086 			MVII #$86,R1	; Bitmap especial
545B 0204 0008 			BEQ @@152
545D 0378 00D8 			CMPI #$D8,R0	; ¿Otras paredes?
545F 02B9 0082 			MVII #$82,R1	; Bitmap especial
5461 0209 0002 			BNC @@152	; Sí, salta
5463 02B9 0081 			MVII #$81,R1	; Bitmap especial para abismos
5465 0241 0112 		@@152:	MVO R1,inicia_sprites
5467 0200 004D 			B @@93

5469 0280 011F 		@@89:	MVI ye3d1,R0
546B 0080 			TSTR R0		; ¿Algo visible?
546C 0204 0048 			BEQ @@93	; No, inserta de inmediato
546E 0280 0121 			MVI ye3d3,R0
5470 0080 			TSTR R0		; ¿Hay un tercer sprite?
5471 020C 004E 			BNE @@88	; Sí, salta, evita que desaparezca rápido.
5473 0280 0125 			MVI offset1,R0
5475 0378 0088 			CMPI #$88,R0	; ¿Hay un misil vertical activo?
5477 0204 0048 			BEQ @@88	; Sí, salta y espera un poco más
5479 0378 0060 			CMPI #$60,R0	; ¿Hay un agujero de misil?
547B 020C 0031 			BNE @@94	; No, salta.
547D 0280 0130 			MVI electrico,R0
547F 0080 			TSTR R0		; ¿Ya disparó?
5480 020C 0034 			BNE @@93	; Sí, salta.
				;
				; Para reducir vacíos del área de juego en ciertas ocasiones
				; dispara al llegar al centro.
				;
5482 0280 0139 			MVI rand,R0
5484 03B8 0040 			ANDI #$40,R0
5486 02B8 0050 			MVII #80,R0	; Centro de la pantalla
5488 020C 000A 			BNE @@95
				;
				; Pequeña ecuación para atinarle al jugador si pasa por encima :>
				; 
548A 0280 010D 			MVI yj3d,R0
548C 0300 011F 			SUB ye3d1,R0
548E 0201 0001 			BC @@96
5490 01C0 			CLRR R0
5491 0048 		@@96:	SLL R0,1
5492 02C0 0104 			ADD x_jugador,R0
5494 0340 011B 		@@95:	CMP xe3d1,R0
5496 0209 0029 			BNC @@88	; Sí, salta a esperar
5498 0004 015C 01BD 		CALL insercion
549B 02F8 0007 			ADDI #7,R0
549D 0240 011F 			MVO R0,ye3d1
				; Efecto de sonido: lanzamiento
549F 02B8 002C 			MVII #sonido_4-base_sonido,R0
54A1 0004 015C 01AE 		CALL efecto_sonido_prioridad
54A4 02B8 0088 			MVII #$88,R0	; Misil vertical
54A6 0240 0125 			MVO R0,offset1
54A8 02B8 0080 			MVII #$80,R0	; Agujero disparando
54AA 0240 0126 			MVO R0,offset2
54AC 0200 0013 			B @@88
				
54AE 0378 00E8 		@@94:	CMPI #$E8,R0	; ¿Adorno de piso?
54B0 0204 0004 			BEQ @@93
54B2 0378 0098 			CMPI #$98,R0	; ¿Hay misil teledirigido, robotote $a0 o campo $b8?
54B4 0201 000B 			BC @@88		; Sí, salta a esperar

54B6 0004 015C 02F1 	@@93:	CALL lee_byte
54B9 03B8 0007 			ANDI #$07,R0
54BB 02F8 69A9 			ADDI #offset_y,R0
54BD 0084 			MOVR R0,R4
54BE 02A0 			MVI@ R4,R0
54BF 0200 0007 			B @@97	
				
54C1 0280 012F 		@@88:	MVI tiempo,R0	; Espera un poco más
54C3 0008 			INCR R0
54C4 0240 012F 			MVO R0,tiempo
54C6 0200 0042 			B @@86

54C8 0004 015C 01BD 	@@97:	CALL insercion
54CB 01D2 			CLRR R2
54CC 0242 0130 			MVO R2,electrico
54CE 0004 015C 02F1 		CALL lee_byte
54D1 03B8 00F8 			ANDI #$F8,R0
54D3 0240 0125 			MVO R0,offset1
54D5 02B9 00AA 			MVII #170,R1
			;	CMPI #$A0,R0	; ¿Robotote?
			;	BNE @@98
			;	MVII #140,R1
			;@@98:	
54D7 0241 011B 			MVO R1,xe3d1
54D9 0241 0310 			MVO R1,avance	; Para calcular pared "cercana"
54DB 0378 0098 			CMPI #$98,R0	; ¿Misil teledirigido?
54DD 0204 0008 			BEQ @@154
54DF 0378 00A0 			CMPI #$A0,R0	; ¿Robotote?
54E1 0204 0004 			BEQ @@154
54E3 0378 00B8 			CMPI #$B8,R0	; ¿Electricidad?
54E5 020C 0005 			BNE @@155
54E7 01D2 		@@154:	CLRR R2		; Truco para evitar colisión con explosión
54E8 0242 013B 			MVO R2,colision0
54EA 0242 013C 			MVO R2,colision2
54EC 02B9 0005 		@@155:	MVII #5,R1
54EE 0378 00E8 			CMPI #$E8,R0	; ¿Adorno de piso?
54F0 0204 0006 			BEQ @@99
54F2 0281 0139 			MVI rand,R1
54F4 03B9 0004 			ANDI #4,R1
54F6 02F9 0028 			ADDI #40,R1
54F8 0241 012F 		@@99:	MVO R1,tiempo
54FA 0004 015C 02F1 		CALL lee_byte
54FD 03B8 0007 			ANDI #$07,R0
54FF 02F8 69A9 			ADDI #offset_y,R0
5501 0084 			MOVR R0,R4
5502 02A0 			MVI@ R4,R0
5503 0240 0134 			MVO R0,ola	; Para referencia campo eléctrico
5505 0240 011F 			MVO R0,ye3d1
5507 0004 015C 0301 		CALL adelanta_lector

				;
				; Desplaza los elementos de la fortaleza para efecto de scrolling
				;
550A 01C9 		@@86:	CLRR R1
550B 0241 010C 			MVO R1,xj3d
550D 02B9 FFFC 			MVII #-4,R1	; Ajuste Y de bala para alienígena
550F 02BA 0020 			MVII #32,R2	; Nivel con respecto al piso para posible bala
5511 0280 0125 			MVI offset1,R0
5513 0378 0090 			CMPI #$90,R0	; ¿Alienígena?
5515 0204 0012 			BEQ @@100
5517 0283 010C 			MVI xj3d,R3
5519 000B 			INCR R3		; Ajuste Y del misil teledirigido
551A 000B 			INCR R3
551B 0243 010C 			MVO R3,xj3d
551D 0378 0098 			CMPI #$98,R0	; ¿Misil teledirigido?
551F 0204 003A 			BEQ @@101
5521 02B9 FFF3 			MVII #-13,R1	; Ajuste Y de bala para robotote
5523 0282 0105 			MVI y_jugador,R2	; Nivel idéntico al del jugador para posible bala
5525 0378 00A0 			CMPI #$A0,R0	; ¿Robotote?
5527 020C 007E 			BNE @@102
5529 0280 011B 		@@100:	MVI xe3d1,R0
552B 0378 008C 			CMPI #140,R0	; ¿Recién salido?
552D 0201 001C 			BC @@103	; Sí, salta, debe centrarlo
552F 0280 010E 			MVI x_bala2,R0	; ¿Bala activa?
5531 0080 			TSTR R0
5532 020C 0017 			BNE @@103	; Sí, salta
5534 0240 0111 			MVO R0,bala_der
5536 0280 0139 			MVI rand,R0
5538 0340 012D 			CMP dificultad,R0	; ¿Tiempo de disparar?
553A 0201 000F 			BC @@103	; No, salta.
553C 02C1 011F 			ADD ye3d1,R1
553E 0241 010F 			MVO R1,y_bala2
5540 0242 0110 			MVO R2,nivel_bala2
5542 0280 011B 			MVI xe3d1,R0
5544 0240 010E 			MVO R0,x_bala2
				; Efecto de sonido: disparo enemigo
5546 02B8 000C 			MVII #sonido_2-base_sonido,R0
5548 0004 015C 01A0 		CALL efecto_sonido
554B 0280 0125 		@@103:	MVI offset1,R0
554D 0378 0090 			CMPI #$90,R0
554F 0204 000A 			BEQ @@101
5551 0280 0103 			MVI cuadro,R0
5553 03B8 0001 			ANDI #1,R0	; El robotote sólo se mueve cada dos cuadros
5555 0204 0298 			BEQ @@16
5557 02B9 0008 			MVII #8,R1
5559 0241 010C 			MVO R1,xj3d
				;
				; Robotote y misil teledirigido siguen al jugador
				;
555B 0280 011B 		@@101:	MVI xe3d1,R0
555D 0378 0010 			CMPI #16,R0	; ¿Llegó al borde de la pantalla?
555F 020C 0005 			BNE @@104
5561 01C0 			CLRR R0		; Desaparece
5562 0240 011F 			MVO R0,ye3d1
5564 0200 0289 			B @@16

5566 0010 		@@104:	DECR R0
5567 0240 011B 			MVO R0,xe3d1
5569 0008 			INCR R0
556A 0300 0104 			SUB x_jugador,R0
556C 0203 0001 			BPL @@105
556E 01C0 			CLRR R0
556F 0064 		@@105:	SLR R0,2
5570 02C0 010D 			ADD yj3d,R0
5572 02C0 010C 			ADD xj3d,R0	; Corrección robotote

				; Cálcula posición al ras del piso
5574 02B9 001E 			MVII #30,R1
5576 0301 0105 			SUB y_jugador,R1
5578 0082 			MOVR R0,R2
5579 00CA 			ADDR R1,R2
557A 0242 011C 			MVO R2,xe3d2	; Para usar con misil teledirigido

557C 0281 0125 			MVI offset1,R1
557E 0379 0090 			CMPI #$90,R1	; ¿Alienígena?
5580 020C 0007 			BNE @@106
5582 02B9 0020 			MVII #32,R1
5584 0301 0105 			SUB y_jugador,R1
5586 0082 			MOVR R0,R2
5587 00CA 			ADDR R1,R2
5588 0090 			MOVR R2,R0	; Sí, lleva al piso
5589 0378 0060 		@@106:	CMPI #96,R0	; Limita a la pantalla visible
558B 0209 0002 			BNC @@107
558D 02B8 0060 			MVII #96,R0
558F 0240 011F 		@@107:	MVO R0,ye3d1
5591 0280 010C 			MVI xj3d,R0
5593 0378 0008 			CMPI #8,R0
5595 020C 0258 			BNE @@16
				; Robotote, agrega sprite extra.
5597 0280 011B 			MVI xe3d1,R0
5599 02F8 0010 			ADDI #16,R0
559B 0240 011C 			MVO R0,xe3d2
559D 0280 011F 			MVI ye3d1,R0
559F 0240 0120 			MVO R0,ye3d2
55A1 02B8 0020 			MVII #$20,R0
55A3 0240 0126 			MVO R0,offset2
55A5 0200 0248 			B @@16

				;
				; Desplaza los elementos fijos por el piso
				;
0x55A7                  @@102:	
55A7 0280 0310 			MVI avance,R0
55A9 0010 			DECR R0
55AA 0240 0310 			MVO R0,avance
55AC 02BA 011A 			MVII #xe3d0,R2
55AE 02BB 011E 			MVII #ye3d0,R3
55B0 0298 		@@108:	MVI@ R3,R0	; ¿Elemento activo?
55B1 0080 			TSTR R0
55B2 0204 007B 			BEQ @@109
55B4 0378 0024 			CMPI #36,R0
55B6 0201 000E 			BC @@196
55B8 0290 			MVI@ R2,R0
55B9 0010 			DECR R0
55BA 0250 			MVO@ R0,R2
55BB 0378 0001 			CMPI #1,R0
55BD 0201 0013 			BC @@110
55BF 02B8 0001 			MVII #1,R0
55C1 0250 			MVO@ R0,R2
55C2 01C0 			CLRR R0
55C3 0258 			MVO@ R0,R3
55C4 0200 000C 			B @@110

55C6 0290 		@@196:	MVI@ R2,R0
55C7 0010 			DECR R0
55C8 0250 			MVO@ R0,R2
55C9 0378 0010 			CMPI #16,R0
55CB 0201 0005 			BC @@110
55CD 02B8 0010 			MVII #16,R0
55CF 0250 			MVO@ R0,R2
55D0 01C0 			CLRR R0
55D1 0258 			MVO@ R0,R3
55D2 03B8 0003 		@@110:	ANDI #3,R0
55D4 0378 0003 			CMPI #3,R0
55D6 020C 0003 			BNE @@111
55D8 0298 			MVI@ R3,R0
55D9 0010 			DECR R0
55DA 0258 			MVO@ R0,R3
55DB 0280 010E 		@@111:	MVI x_bala2,R0	; ¿Bala activa?
55DD 0080 			TSTR R0
55DE 020C 004F 			BNE @@109	; Sí, salta.
55E0 0240 0111 			MVO R0,bala_der
55E2 0280 0139 			MVI rand,R0
55E4 0340 012D 			CMP dificultad,R0	; ¿Tiempo de disparar?
55E6 0201 0047 			BC @@109	; No, salta.
55E8 02FA 000A 			ADDI #offset0-xe3d0,R2
55EA 0290 			MVI@ R2,R0
55EB 033A 000A 			SUBI #offset0-xe3d0,R2
55ED 0378 0040 			CMPI #$40,R0	; ¿Avión chico?
55EF 0204 001B 			BEQ @@112
55F1 0378 0068 			CMPI #$68,R0	; ¿Cañón mirando a jugador?
55F3 0204 0017 			BEQ @@112
55F5 0378 0050 			CMPI #$50,R0	; ¿Cañón mirando a derecha?
55F7 020C 0036 			BNE @@109	; No, salta.
55F9 0280 0139 			MVI rand,R0
55FB 03B8 0001 			ANDI #1,R0
55FD 020C 0006 			BNE @@113
55FF 02B8 0001 			MVII #1,R0	; Dispara una bala a la derecha
5601 0240 0111 			MVO R0,bala_der
5603 0200 0007 			B @@112

5605 02B8 0068 		@@113:	MVII #$68,R0	; Gira cañón
5607 02FA 000A 			ADDI #offset0-xe3d0,R2
5609 0250 			MVO@ R0,R2
560A 033A 000A 			SUBI #offset0-xe3d0,R2
560C 0298 		@@112:	MVI@ R3,R0
560D 0338 0005 			SUBI #5,R0
560F 020B 001E 			BMI @@109	; Evita crear bala en coordenada negativa o cero
5611 0204 001C 			BEQ @@109
5613 0240 010F 			MVO R0,y_bala2
5615 02FA 000A 			ADDI #offset0-xe3d0,R2
5617 0290 			MVI@ R2,R0
5618 033A 000A 			SUBI #offset0-xe3d0,R2
561A 0338 0050 			SUBI #$50,R0
561C 0204 0002 			BEQ @@114
561E 02B8 FFF8 			MVII #-8,R0	
5620 0291 		@@114:	MVI@ R2,R1
5621 00C8 			ADDR R1,R0
5622 02F8 0008 			ADDI #8,R0
5624 0240 010E 			MVO R0,x_bala2
5626 02B8 0020 			MVII #32,R0
5628 0240 0110 			MVO R0,nivel_bala2
				; Efecto de sonido: disparo enemigo
562A 02B8 000C 			MVII #sonido_2-base_sonido,R0
562C 0004 015C 01A0 		CALL efecto_sonido
562F 000A 		@@109:	INCR R2
5630 000B 			INCR R3
5631 037B 0122 			CMPI #ye3d4,R3
5633 022C 0084 			BNE @@108

5635 0280 0125 			MVI offset1,R0
5637 0378 0088 			CMPI #$88,R0	; ¿Misil vertical?
5639 020C 003A 			BNE @@115
563B 0280 0103 			MVI cuadro,R0
563D 03B8 0001 			ANDI #1,R0	; Se alza un pixel cada dos cuadros?
563F 020C 0034 			BNE @@115
5641 0280 011F 			MVI ye3d1,R0
5643 0080 			TSTR R0
5644 0204 0013 			BEQ @@116	; ¿Salió de la pantalla?
5646 0008 			INCR R0
5647 0240 011F 			MVO R0,ye3d1
5649 0300 0120 			SUB ye3d2,R0
564B 0378 0018 			CMPI #24,R0
564D 0209 0004 			BNC @@117
564F 02B8 0060 			MVII #$60,R0	; Fin de fuego en agujero de misil
5651 0240 0126 			MVO R0,offset2
5653 0280 011F 		@@117:	MVI ye3d1,R0
5655 0378 0061 			CMPI #97,R0
5657 020C 001C 			BNE @@115
5659 02B8 0001 		@@116:	MVII #1,R0
565B 0240 0130 			MVO R0,electrico	; Ya disparó
565D 0280 0120 			MVI ye3d2,R0
565F 0240 011F 			MVO R0,ye3d1
5661 0280 011C 			MVI xe3d2,R0
5663 0240 011B 			MVO R0,xe3d1
5665 0280 0126 			MVI offset2,R0
5667 0240 0125 			MVO R0,offset1
5669 0280 0121 			MVI ye3d3,R0
566B 0240 0120 			MVO R0,ye3d2
566D 0280 011D 			MVI xe3d3,R0
566F 0240 011C 			MVO R0,xe3d2
5671 0280 0127 			MVI offset3,R0
5673 0240 0126 			MVO R0,offset2
0x5675                  @@115:

5675 0200 0178 			B @@16

			        ;
			        ; Espacio exterior
			        ;
5677 0280 012F 		@@15:   MVI tiempo,R0
5679 0010 		        DECR R0
567A 0240 012F 		        MVO R0,tiempo
567C 020C 00AD 		        BNE @@17
567E 0280 0117 		        MVI y_enemigo1,R0
5680 0080 		        TSTR R0
5681 020C 0016 		        BNE @@18
5683 0280 0118 		        MVI y_enemigo2,R0
5685 0080 		        TSTR R0
5686 020C 0011 		        BNE @@18
5688 0280 0119 		        MVI y_enemigo3,R0
568A 0080 		        TSTR R0
568B 020C 000C 		        BNE @@18
568D 0004 015C 02F1 	        CALL lee_byte
5690 03B8 00FF 		        ANDI #$FF,R0
5692 020C 000B 		        BNE @@19
5694 0004 015C 0217 	        CALL adelanta_nivel
5697 0200 0156 		        B @@16
			        
5699 02B8 0001 		@@18:   MVII #1,R0
569B 0240 012F 		        MVO R0,tiempo
569D 0200 008C 		        B @@17

569F 0240 0134 		@@19:   MVO R0,ola
56A1 0004 015C 0301 	        CALL adelanta_lector
56A4 01C9 		        CLRR R1
56A5 0241 0135 		        MVO R1,secuencia
56A7 0241 0136 		        MVO R1,proximo
56A9 0378 00E8 		        CMPI #$E8,R0    ; Planetoide
56AB 020D 0029 		        BGE @@20
56AD 0378 00C0 		        CMPI #$C0,R0    ; ¿Satélite?
56AF 0204 0045 		        BEQ @@23
56B1 02B9 0023 		        MVII #35,R1     ; Enemigo solitario por el centro
56B3 0378 003A 		        CMPI #$3A,R0
56B5 0205 004A 		        BLT @@25
56B7 0204 000C 		        BEQ @@27
56B9 0378 003C 		        CMPI #$3C,R0
56BB 0204 0008 		        BEQ @@27
56BD 02B9 000F 		        MVII #15,R1     ; Enemigo solitario por la izquierda
56BF 0378 003D 		        CMPI #$3D,R0
56C1 020C 0002 		        BNE @@27
56C3 02B9 0037 		        MVII #55,R1     ; Enemigo solitario por la derecha
56C5 0241 0114 		@@27:   MVO R1,x_enemigo1
56C7 0004 015C 02F1 	        CALL lee_byte
56CA 0004 015C 0301 	        CALL adelanta_lector
56CD 0082 		        MOVR R0,R2
56CE 02B9 0040 		        MVII #$40,R1
56D0 02B8 00A8 		        MVII #168,R0
56D2 0300 0114 			SUB x_enemigo1,R0
56D4 0200 0047 		        B @@24

56D6 02B9 000F 		@@20:   MVII #15,R1     ; Planetoide 1
56D8 0241 0114 		        MVO R1,x_enemigo1
56DA 02B9 0023 		        MVII #35,R1     ; Planetoide 2
56DC 0241 0115 		        MVO R1,x_enemigo2
56DE 03B8 0001 		        ANDI #1,R0
56E0 02BA 0032 		        MVII #50,R2
56E2 02B9 000C 		        MVII #12,R1
56E4 020C 0004 		        BNE @@21        ; Alternativa de posición
56E6 02BA 0048 		        MVII #72,R2
56E8 02B9 0020 		        MVII #32,R1
56EA 0241 0118 		@@21:   MVO R1,y_enemigo2
56EC 02B8 0099 		        MVII #153,R0
56EE 02B9 00F8 		        MVII #$F8,R1
56F0 0241 0126 		        MVO R1,offset2
56F2 02B9 00F0 		        MVII #$F0,R1
56F4 0200 0029 		        B @@22

56F6 0081 		@@23:   MOVR R0,R1      ; Satélite
56F7 02B8 0069 		        MVII #105,R0
56F9 0240 0114 		        MVO R0,x_enemigo1
56FB 02BA 0048 		        MVII #72,R2	; Máxima altitud
56FD 02B8 0030 		        MVII #48,R0
56FF 0200 001C 		        B @@24

5701 02B8 000F 		@@25:   MVII #15,R0     ; Tres enemigos
5703 0240 0114 		        MVO R0,x_enemigo1
5705 0241 0115 		        MVO R1,x_enemigo2
5707 02B8 0037 		        MVII #55,R0
5709 0240 0116 		        MVO R0,x_enemigo3
570B 02BA 0048 		        MVII #72,R2
570D 0280 0134 		        MVI ola,R0
570F 0378 0038 		        CMPI #$38,R0
5711 0204 0002 		        BEQ @@26
5713 02BA 0020 		        MVII #32,R2
5715 0242 0118 		@@26:   MVO R2,y_enemigo2
5717 0242 0119 		        MVO R2,y_enemigo3
5719 02B9 0040 		        MVII #$40,R1
571B 02B8 0099 		        MVII #153,R0
571D 0241 0126 		@@24:   MVO R1,offset2
571F 0241 0125 		@@22:   MVO R1,offset1
5721 0241 0127 		        MVO R1,offset3
5723 0242 0117 		        MVO R2,y_enemigo1
5725 0240 0310 		        MVO R0,avance
5727 02B8 0032 		        MVII #50,R0
5729 0240 012F 		        MVO R0,tiempo
			        ;
			        ; Posiciona los enemigos
			        ;
572B 01C0 		@@17:   CLRR R0
572C 0240 011E 		        MVO R0,ye3d0
572E 02BA 0114 		        MVII #x_enemigo1,R2
5730 02BB 0117 		        MVII #y_enemigo1,R3
5732 02BC 011B 		        MVII #xe3d1,R4
5734 02BD 011F 		        MVII #ye3d1,R5
0x5736                  @@28:
5736 0290 		        MVI@ R2,R0
5737 0060 		        SLR R0,1
5738 0299 		        MVI@ R3,R1
5739 0089 		        TSTR R1
573A 0204 0014 		        BEQ @@29
573C 02F9 0008 		        ADDI #8,R1
573E 0101 		        SUBR R0,R1
573F 0280 0310 			MVI avance,R0
5741 006C 			SAR R0,2
5742 00C1 		        ADDR R0,R1
5743 0204 000B 		        BEQ @@29
5745 0379 0068 		        CMPI #104,R1     ; ¿Invisible?
5747 0201 0007 		        BC @@29
5749 0290 		        MVI@ R2,R0
574A 02C0 0310 		        ADD avance,R0
574C 0378 00A8 		        CMPI #168,R0    ; ¿Invisible?
574E 0209 0005 		        BNC @@31
5750 01C0 		@@29:   CLRR R0
5751 0260 		        MVO@ R0,R4
5752 0268 		        MVO@ R0,R5
5753 0200 0094 		        B @@30

5755 0260 		@@31:   MVO@ R0,R4
5756 0269 		        MVO@ R1,R5
			        ;
			        ; Verifica si pone "mira"
			        ;
5757 02FA 0011 		        ADDI #offset1-x_enemigo1,R2
5759 0290 		        MVI@ R2,R0
575A 033A 0011 		        SUBI #offset1-x_enemigo1,R2
575C 0378 00C0 		        CMPI #$C0,R0    ; ¿Satélite?
575E 0204 000E 		        BEQ @@32
5760 0378 0048 		        CMPI #$48,R0
5762 020D 0085 		        BGE @@30        ; Si no es avión, obvia disparo
5764 0280 0310 		        MVI avance,R0
5766 0378 00A0 		        CMPI #160,R0
5768 020D 0026 		        BGE @@33
576A 0378 0032 		        CMPI #50,R0
576C 0205 0022 		        BLT @@33
576E 0299 		@@32:   MVI@ R3,R1
576F 0301 0105 		        SUB y_jugador,R1
5771 02F9 0002 		        ADDI #2,R1
5773 0379 0005 		        CMPI #5,R1
5775 0201 0019 		        BC @@33
5777 0290 		        MVI@ R2,R0
5778 0300 0104 		        SUB x_jugador,R0
577A 02F8 0003 		        ADDI #3,R0
577C 0378 0007 		        CMPI #7,R0
577E 0201 0010 		        BC @@33
5780 02B8 00D0 		        MVII #$D0,R0
5782 0240 0124 		        MVO R0,offset0
5784 0280 0104 		        MVI x_jugador,R0
5786 02F8 0020 		        ADDI #32,R0
5788 0240 011A 		        MVO R0,xe3d0
578A 0280 010D 		        MVI yj3d,R0
578C 02F8 0008 		        ADDI #8,R0
578E 0240 011E 		        MVO R0,ye3d0
			        ;
			        ; Cambia sprite de los aviones según la altitud
			        ;
5790 02FA 0011 		@@33:   ADDI #offset1-x_enemigo1,R2
5792 0290 		        MVI@ R2,R0
5793 033A 0011 		        SUBI #offset1-x_enemigo1,R2
5795 0378 0048 		        CMPI #$48,R0
5797 0201 0050 		        BC @@30         ; Si no es avión, obvia disparo
5799 0299 		        MVI@ R3,R1
579A 0379 0030 		        CMPI #48,R1
579C 02B8 0040 		        MVII #$40,R0
579E 0209 0008 		        BNC @@35
57A0 0379 0040 		        CMPI #64,R1
57A2 02B8 0038 		        MVII #$38,R0
57A4 0209 0002 		        BNC @@35
57A6 02B8 0030 		        MVII #$30,R0
57A8 02FA 0011 		@@35:   ADDI #offset1-x_enemigo1,R2
57AA 0250 		        MVO@ R0,R2
57AB 033A 0011 		        SUBI #offset1-x_enemigo1,R2
57AD 0280 010E 		@@34:   MVI x_bala2,R0
57AF 0080 		        TSTR R0         ; ¿Bala activa?
57B0 020C 0037 		        BNE @@30
57B2 0240 0111 		        MVO R0,bala_der
57B4 0280 0139 		        MVI rand,R0
57B6 0340 012D 		        CMP dificultad,R0       ; ¿Tiempo de disparar?
57B8 0201 002F 		        BC @@30
57BA 0090 		        MOVR R2,R0
57BB 0338 0114 		        SUBI #x_enemigo1,R0
57BD 0340 0136 		        CMP proximo,R0  ; ¿Es el avión que debe disparar?
57BF 020C 0028 		        BNE @@30
57C1 00A9 		        MOVR R5,R1
57C2 0011 		        DECR R1
57C3 0288 		        MVI@ R1,R0
57C4 0338 0005 		        SUBI #5,R0
57C6 0240 010F 		        MVO R0,y_bala2
57C8 0298 		        MVI@ R3,R0
57C9 0240 0110 		        MVO R0,nivel_bala2
57CB 00A1 		        MOVR R4,R1
57CC 0011 		        DECR R1
57CD 0288 		        MVI@ R1,R0
57CE 0240 010E 		        MVO R0,x_bala2
				; Efecto de sonido: disparo enemigo
57D0 02B8 000C 			MVII #sonido_2-base_sonido,R0
57D2 0004 015C 01A0 		CALL efecto_sonido
57D5 0280 0134 		        MVI ola,R0
57D7 0378 003B 		        CMPI #$3B,R0    ; ¿Aviones después de bajar/subir?
57D9 0204 0004 		        BEQ @@36
57DB 0378 003A 		        CMPI #$3A,R0    ; ¿Ola de avión simple?
57DD 0201 000A 		        BC @@30       ; Sí, salta.
57DF 0280 0136 		@@36:   MVI proximo,R0
57E1 0008 		        INCR R0
57E2 0378 0003 		        CMPI #3,R0
57E4 020C 0001 		        BNE @@37
57E6 01C0 		        CLRR R0
57E7 0240 0136 		@@37:   MVO R0,proximo
57E9 000A 		@@30:   INCR R2
57EA 000B 		        INCR R3
57EB 037A 0117 		        CMPI #x_enemigo3+1,R2
57ED 022C 00B8 		        BNE @@28
0x57EF                  @@16:
				;
				; Evita código de enemigos si está explotando
				;
0x57EF                  @@60:
57EF 0280 0137 		        MVI explosion,R0
57F1 0080 		        TSTR R0
57F2 0204 000B 		        BEQ @@53
57F4 0280 0123 		        MVI offset9,R0
57F6 0080 		        TSTR R0
57F7 020C 0009 		        BNE @@63
57F9 02B8 0048 		        MVII #$48,R0
57FB 0240 0123 		        MVO R0,offset9
57FD 0200 0003 		        B @@63
			        
57FF 01C0 		@@53:   CLRR R0
5800 0240 0123 		        MVO R0,offset9
			        ; Parpadeo de explosiones
5802 0280 0103 		@@63:   MVI cuadro,R0
5804 03B8 0003 		        ANDI #3,R0      ; Cada cuatro cuadros
5806 020C 0014 		        BNE @@49
5808 02BA 0123 		        MVII #offset9,R2
580A 02B9 0005 		        MVII #5,R1
580C 0290 		@@52:   MVI@ R2,R0
580D 0378 0048 		        CMPI #$48,R0    ; Intercambia entre $48 y $58
580F 0204 0004 		        BEQ @@50
5811 0378 0058 		        CMPI #$58,R0
5813 020C 0003 		        BNE @@51
5815 03F8 0010 		@@50:   XORI #$10,R0    ; Con esto basta
5817 0250 		        MVO@ R0,R2
5818 000A 		@@51:   INCR R2
5819 0011 		        DECR R1
581A 022C 000F 		        BNE @@52
0x581C                  @@49:
			        ;
			        ; A 30 cuadros por segundo
			        ;
581C 0280 0103 		        MVI cuadro,R0
581E 03B8 0001 		        ANDI #$01,R0
5820 0204 00D5 		        BEQ @@11
5822 0280 0137 			MVI explosion,R0
5824 0080 			TSTR R0
5825 020C 03FB 			BNE @@54
			        ;
			        ; Desplazamiento de la nave del jugador
			        ;
5827 01C0 		        CLRR R0
5828 0240 0107 		        MVO R0,ajuste_nave
582A 0282 0104 		        MVI x_jugador,R2
582C 0283 0105 		        MVI y_jugador,R3
582E 0280 013F 			MVI demo,R0
5830 0080 			TSTR R0		; ¿Se halla en demo?
5831 0204 0027 			BEQ @@161	; No, salta.
5833 0281 0141 			MVI estado_demo,R1
5835 0009 			INCR R1
5836 0241 0141 			MVO R1,estado_demo
5838 02B8 00FB 			MVII #$FB,R0	; Arriba
583A 0379 0028 			CMPI #40,R1
583C 0205 0020 			BLT @@162
583E 02B8 00FD 			MVII #$FD,R0	; Derecha
5840 0379 003C 			CMPI #60,R1
5842 0205 001A 			BLT @@162
5844 02B8 00FE 			MVII #$FE,R0	; Abajo
5846 0379 0064 			CMPI #100,R1
5848 0205 0014 			BLT @@162
584A 02B8 00FF 			MVII #$FF,R0
584C 0379 008C 			CMPI #140,R1
584E 0205 000E 			BLT @@162
5850 02B8 00F7 			MVII #$F7,R0	; Izquierda
5852 0379 00A0 			CMPI #160,R1
5854 0205 0008 			BLT @@162
5856 02B8 00FF 			MVII #$FF,R0
5858 0200 0004 			B @@162

585A 0280 01FF 		@@161:  MVI $01FF,R0
585C 0380 01FE 			AND $01FE,R0
585E 0081 		@@162:	MOVR R0,R1
585F 03B9 0001 		        ANDI #$01,R1    ; Abajo
5861 020C 0005 		        BNE @@1
5863 037B 0048 		        CMPI #72,R3
5865 0204 0001 		        BEQ @@1
5867 000B 		        INCR R3
5868 0081 		@@1:    MOVR R0,R1
5869 03B9 0002 		        ANDI #$02,R1    ; Derecha
586B 020C 0009 		        BNE @@2
586D 02B9 0018 		        MVII #$18,R1
586F 0241 0107 		        MVO R1,ajuste_nave
5871 037A 0037 		        CMPI #55,R2
5873 0204 0001 		        BEQ @@2
5875 000A 		        INCR R2
5876 0081 		@@2:    MOVR R0,R1
5877 03B9 0004 		        ANDI #$04,R1    ; Arriba
5879 020C 0005 		        BNE @@3
587B 037B 0020 		        CMPI #32,R3
587D 0204 0001 		        BEQ @@3
587F 0013 		        DECR R3
5880 0081 		@@3:    MOVR R0,R1
5881 03B9 0008 		        ANDI #$08,R1    ; Izquierda
5883 020C 0009 		        BNE @@4
5885 02B9 000C 		        MVII #$0c,R1
5887 0241 0107 		        MVO R1,ajuste_nave
5889 037A 000F 		        CMPI #15,R2
588B 0204 0001 		        BEQ @@4
588D 0012 		        DECR R2
588E 0242 0104 		@@4:    MVO R2,x_jugador
5890 0243 0105 		        MVO R3,y_jugador
			        
5892 0280 013F 			MVI demo,R0
5894 0080 			TSTR R0		; ¿En demo?
5895 0204 0007 			BEQ @@165	; No, salta.
5897 0004 015C 03C1 		CALL boton_oprimido
589A 022C 04FF 			BNE @@172	; ¿Botón oprimido? aborta demo.
589C 0200 0005 			B @@163		; Siempre dispara.

589E 0004 015C 03C1 	@@165:	CALL boton_oprimido
58A1 0204 001D 		        BEQ @@6
58A3 0280 0108 		@@163:  MVI x_bala,R0
58A5 0080 		        TSTR R0         ; ¿Bala activa?
58A6 020C 0018 		        BNE @@6         ; Sí, salta
58A8 0280 0105 		        MVI y_jugador,R0
58AA 0240 010B 		        MVO R0,bala_y3d
58AC 0280 0104 		        MVI x_jugador,R0
58AE 0240 010A 		        MVO R0,bala_x3d
58B0 02F8 000C 		        ADDI #12,r0
58B2 0240 0108 		        MVO R0,x_bala
58B4 02B9 0001 		        MVII #1,R1
			;        MVI sprite_nave,R0
			;        CMPI #4,R0
			;        BEQ @@7
			;        INCR R1
			;        BC @@7
			;        MVII #1,R1
58B6 0280 010D 		@@7:    MVI yj3d,R0
58B8 0108 		        SUBR R1,R0
58B9 0240 0109 		        MVO R0,y_bala
				; Efecto de sonido: disparo del jugador
58BB 02B8 0001 			MVII #sonido_1-base_sonido,R0
58BD 0004 015C 01A0 		CALL efecto_sonido

			        ;
			        ; Mueve bala del enemigo
			        ;
58C0 0280 010E 		@@6:    MVI x_bala2,R0
58C2 0080 		        TSTR R0         ; ¿Bala activa?
58C3 0204 0032 		        BEQ @@11
58C5 0281 010F 		        MVI y_bala2,R1
58C7 0282 0111 		        MVI bala_der,R2
58C9 0092 		        TSTR R2
58CA 0204 0004 		        BEQ @@12
58CC 0008 		        INCR R0
58CD 0011 		        DECR R1
58CE 0200 0006 		        B @@13

58D0 0338 0004 		@@12:   SUBI #4,R0
58D2 0378 000F 		        CMPI #15,R0
58D4 0205 001C 		        BLT @@14
58D6 0011 		@@13:   DECR R1
58D7 0240 010E 		        MVO R0,x_bala2
58D9 0241 010F 		        MVO R1,y_bala2
58DB 0204 0015 		        BEQ @@14
58DD 020B 0013 		        BMI @@14
58DF 0280 0110 		        MVI nivel_bala2,R0
58E1 0300 0105 		        SUB y_jugador,R0
58E3 02F8 0002 		        ADDI #2,R0
58E5 0378 0005 		        CMPI #5,R0
58E7 0201 000E 		        BC @@11
58E9 0280 013B 			MVI colision0,R0	; Colisión nave
58EB 03B8 0080 			ANDI #$80,R0		; ¿Chocó con bala enemigo?
58ED 0204 0008 			BEQ @@11
58EF 0004 015C 0318 		CALL inicia_explosion
58F2 01C0 		@@14:   CLRR R0
58F3 0240 010F 		        MVO R0,y_bala2
58F5 0240 010E 		        MVO R0,x_bala2
0x58F7                  @@11:

			        ;
			        ; Corriendo a 60 cuadros por segundo
			        ;
			        
			        ; Mueve bala del jugador
58F7 02BB 0001 			MVII #1,R3
58F9 0280 0108 		        MVI x_bala,R0
58FB 0080 		        TSTR R0         ; ¿Bala activa?
58FC 0204 0015 		        BEQ @@8         ; No, salta
58FE 000B 		        INCR R3
58FF 0281 0109 			MVI y_bala,R1
5901 0009 		        INCR R1
5902 0379 0060 		        CMPI #96,R1
5904 0204 0006 		        BEQ @@10
5906 02F8 0004 		        ADDI #4,R0
5908 0378 00A8 		        CMPI #168,R0
590A 0209 0003 		        BNC @@9
590C 01C0 		@@10:   CLRR R0
590D 0081 		        MOVR R0,R1
590E 0013 			DECR R3
590F 0241 0109 		@@9:    MVO R1,y_bala
5911 0240 0108 		        MVO R0,x_bala
5913 01D2 		@@8:	CLRR R2
				;
				; Comprueba si el jugador (r2=0) o la bala (r2=1) chocan 
				; con algún elemento
				;
5914 02B9 0002 		@@64:	MVII #2,R1
5916 0280 012E 		@@65:	MVI nivel,R0
5918 03B8 0001 			ANDI #1,R0
591A 0204 00B1 			BEQ @@66
				; Fortaleza
591C 02BC 011F 			MVII #ye3d1,R4
591E 00CC 			ADDR R1,R4
591F 02A5 			MVI@ R4,R5
5920 00AD 			TSTR R5
5921 0204 015E 			BEQ @@67
5923 02BC 0125 			MVII #offset1,R4
5925 00CC 			ADDR R1,R4
5926 02A5 			MVI@ R4,R5
5927 033D 00C0 			SUBI #$C0,R5	; ¿Pared?
5929 0209 0067 			BNC @@118
592B 037D 0018 			CMPI #$18,R5
592D 0201 0152 			BC @@67		; Ignora lo demás
592F 0092 			TSTR R2		; ¿Jugador?
5930 020C 002E 			BNE @@125	; No, salta
				; Jugador contra pared
5932 0280 0310 			MVI avance,R0
5934 0378 0015 			CMPI #21,R0	; ¿Llegó al punto de choque?
5936 0201 0149 			BC @@67		; No, salta.
5938 0280 0105 			MVI y_jugador,R0
593A 0378 0048 			CMPI #72,R0	; ¿La nave está hasta arriba?
593C 020C 00D3 			BNE @@124	; No, explota.
593E 037D 0000 			CMPI #$00,R5
5940 0280 0104 			MVI x_jugador,R0
5942 020C 0008 			BNE @@126
5944 0338 001F 			SUBI #31,R0
5946 0378 0008 			CMPI #8,R0
5948 0209 0137 			BNC @@67
594A 0200 00C5 			B @@124

594C 037D 0008 		@@126:	CMPI #$08,R5
594E 020C 0008 			BNE @@127
5950 0338 002E 			SUBI #46,R0
5952 0378 0008 			CMPI #8,R0
5954 0209 012B 			BNC @@67
5956 0200 00B9 			B @@124

5958 0338 001F 		@@127:	SUBI #31,R0
595A 0378 0017 			CMPI #23,R0
595C 0209 0123 			BNC @@67
595E 0200 00B1 			B @@124

				; Bala contra pared
5960 0280 0108 		@@125:	MVI x_bala,R0
5962 0300 010A 			SUB bala_x3d,R0
5964 02F8 0004 			ADDI #4,R0
5966 0340 0310 			CMP avance,R0
5968 0209 0117 			BNC @@67
596A 0280 010B 			MVI bala_y3d,R0
596C 0378 0048 			CMPI #72,R0
596E 020C 00A1 			BNE @@124
5970 037D 0000 			CMPI #$00,R5
5972 0280 010A 			MVI bala_x3d,R0
5974 020C 0008 			BNE @@128
5976 0338 001F 			SUBI #31,R0
5978 0378 0008 			CMPI #8,R0
597A 0209 0105 			BNC @@67
597C 0200 0093 			B @@124

597E 037D 0008 		@@128:	CMPI #$08,R5
5980 020C 0008 			BNE @@129
5982 0338 002E 			SUBI #46,R0
5984 0378 0008 			CMPI #8,R0
5986 0209 00F9 			BNC @@67
5988 0200 0087 			B @@124

598A 0338 001F 		@@129:	SUBI #31,R0
598C 0378 0017 			CMPI #23,R0
598E 0209 00F1 			BNC @@67
5990 0200 007F 			B @@124

5992 02BC 0125 		@@118:	MVII #offset1,R4
5994 00CC 			ADDR R1,R4
5995 02A0 			MVI@ R4,R0
5996 0378 00B8 			CMPI #$B8,R0	; ¿Electricidad?
5998 0204 0014 			BEQ @@119
599A 0378 0098 			CMPI #$98,R0	; ¿Misil teledirigido o robotote $a0?
599C 0201 0022 			BC @@120	; Sí, salta, siempre al nivel
599E 0378 0088 			CMPI #$88,R0	; ¿Misil vertical?
59A0 020C 0008 			BNE @@121
59A2 0285 011F 			MVI ye3d1,R5	; Saca nivel en referencia a su agujero
59A4 0305 0120 			SUB ye3d2,R5	
59A6 02FD 0020 			ADDI #32,R5
59A8 0200 002A 			B @@131

59AA 02BD 0020 		@@121:	MVII #32,R5	; En el piso
59AC 0200 0026 			B @@131

59AE 0280 0134 		@@119:	MVI ola,R0
59B0 0378 0069 			CMPI #105,R0
59B2 0280 0105 			MVI y_jugador,R0
59B4 0209 0006 			BNC @@130
59B6 0378 0030 			CMPI #48,R0	; Arriba de la zona: pasa a choque
59B8 0201 0006 			BC @@120
59BA 0200 00C8 			B @@122

59BC 0378 0038 		@@130:	CMPI #56,R0
59BE 0201 00C4 			BC @@122

				; Simplifica detección de impacto robotote, electricidad y misil.
59C0 0092 		@@120:	TSTR R2			; ¿Es bala?
59C1 0280 013C 			MVI colision2,R0	; Choque entre bala y otros
59C3 020C 0002 			BNE @@123		; Sí, salta
59C5 0280 013B 			MVI colision0,R0	; Choque entre nave y otros
59C7 03B8 0078 		@@123:	ANDI #$78,R0
59C9 0204 00B6 			BEQ @@67
59CB 0200 0044 			B @@124

				; Espacio
59CD 02BC 0117 		@@66:	MVII #y_enemigo1,R4
59CF 00CC 			ADDR R1,R4
59D0 02A5 			MVI@ R4,R5
59D1 00AD 			TSTR R5
59D2 0204 00AD 			BEQ @@67
59D4 0092 		@@131:	TSTR R2
59D5 0204 0004 			BEQ @@70
59D7 0305 010B 			SUB bala_y3d,R5
59D9 0200 0002 			B @@71

59DB 0305 0105 		@@70:	SUB y_jugador,R5
59DD 02FD 0002 		@@71:	ADDI #2,R5
59DF 037D 0005 			CMPI #5,R5
59E1 0201 009E 			BC @@67
59E3 02BC 011B 			MVII #xe3d1,R4
59E5 00CC 			ADDR R1,R4
59E6 02A5 			MVI@ R4,R5
59E7 0092 			TSTR R2
59E8 0204 000A 			BEQ @@72
59EA 0305 0108 			SUB x_bala,R5
59EC 02FD 0008 			ADDI #8,R5
59EE 037D 000A 			CMPI #10,R5
59F0 0285 0109 			MVI y_bala,R5
59F2 0200 0008 			B @@73

59F4 0305 0104 		@@72:	SUB x_jugador,R5
59F6 02FD 0004 			ADDI #4,R5
59F8 037D 000D 			CMPI #13,R5
59FA 0285 010D 			MVI yj3d,R5
59FC 0201 0083 		@@73:	BC @@67
59FE 02BC 011F 			MVII #ye3d1,R4
5A00 00CC 			ADDR R1,R4
5A01 0325 			SUB@ R4,R5
5A02 0092 			TSTR R2
5A03 0204 0006 			BEQ @@68
5A05 02FD 0007 			ADDI #7,R5
5A07 037D 0008 			CMPI #8,R5
5A09 0200 0004 			B @@69

5A0B 02FD 0004 		@@68:	ADDI #4,R5
5A0D 037D 0009 			CMPI #9,R5
5A0F 0201 0070 		@@69:	BC @@67
				; El jugador/bala tocó un enemigo
5A11 02BC 0125 		@@124:	MVII #offset1,R4
5A13 00CC 			ADDR R1,R4
5A14 02A0 			MVI@ R4,R0
5A15 0378 00D8 			CMPI #$D8,R0	; ¿Adorno o planetoides?
5A17 0201 0068 			BC @@67		; Sí, no afecta
5A19 0378 0048 			CMPI #$48,R0	; ¿Explosión 1?
5A1B 0204 0064 			BEQ @@67	; Sí, no afecta
5A1D 0378 0058 			CMPI #$58,R0	; ¿Explosión 2?
5A1F 0204 0060 			BEQ @@67	; Sí, no afecta
5A21 0378 0060 			CMPI #$60,R0	; ¿Agujero de misil?
5A23 0204 005C 			BEQ @@67	; Sí, no afecta
5A25 0092 			TSTR R2
5A26 020C 0008 			BNE @@74
5A28 0004 015C 01D6 		CALL gana_puntos
5A2B 0004 015C 0318 		CALL inicia_explosion
5A2E 0200 0058 			B @@75

5A30 0284 012E 		@@74:	MVI nivel,R4
5A32 03BC 0001 			ANDI #1,R4
5A34 0204 001A 			BEQ @@78
5A36 0378 00B8 			CMPI #$B8,R0	; ¿Electricidad, pared 1/2/3, abismos?
5A38 0201 0042 			BC @@77		; Sí, detiene bala
5A3A 0378 0080 			CMPI #$80,R0	; ¿Agujero de misil disparado?
5A3C 0204 003E 			BEQ @@77	; Sí, detiene bala
5A3E 0378 0070 			CMPI #$70,R0	; ¿Gasolina?
5A40 020C 000E 			BNE @@78	; No, salta.
5A42 0284 0113 			MVI gasolina,R4
5A44 02FC 000F 			ADDI #$0F,R4	; Más gasolina
5A46 03BC 00F8 			ANDI #$F8,R4
5A48 037C 0050 			CMPI #$50,R4	; Limita a diez unidades
5A4A 0209 0002 			BNC @@79
5A4C 02BC 0050 			MVII #$50,R4
5A4E 0244 0113 		@@79:	MVO R4,gasolina
5A50 0378 0098 		@@78:	CMPI #$98,R0	; ¿Misil teledirigido?
5A52 020C 0009 			BNE @@80
5A54 0284 0130 			MVI electrico,R4
5A56 000C 			INCR R4
5A57 0244 0130 			MVO R4,electrico
5A59 037C 0005 			CMPI #5,R4	; ¿Cinco impactos?
5A5B 020C 001F 			BNE @@77	; No, salta.
5A5D 0378 00A0 		@@80:	CMPI #$A0,R0	; ¿Robotote?
5A5F 020C 000D 			BNE @@76
5A61 0284 0130 			MVI electrico,R4
5A63 000C 			INCR R4
5A64 0244 0130 			MVO R4,electrico
5A66 037C 000A 			CMPI #10,R4	; ¿Diez impactos?
5A68 020C 0012 			BNE @@77	; No, salta.
5A6A 02BC 0058 			MVII #$58,R4
5A6C 0244 0126 			MVO R4,offset2
5A6E 0004 015C 01D6 	@@76:	CALL gana_puntos
5A71 02B8 0048 			MVII #$48,R0
5A73 02BC 0125 			MVII #offset1,R4
5A75 00CC 			ADDR R1,R4
5A76 0260 			MVO@ R0,R4
				; Efecto de sonido: explosión
5A77 02B8 0017 			MVII #sonido_3-base_sonido,R0
5A79 0004 015C 01AE 		CALL efecto_sonido_prioridad

5A7C 01C9 		@@77:	CLRR R1	; Desaparece la bala y evita checar otro enemigo
5A7D 0241 0109 			MVO R1,y_bala
5A7F 0241 0108 			MVO R1,x_bala
5A81 0011 		@@67:	DECR R1
5A82 0223 016D 			BPL @@65
5A84 000A 		@@122:	INCR R2
5A85 0013 			DECR R3
5A86 022C 0173 			BNE @@64
0x5A88                  @@75:

			        ;
			        ; Cambia el sprite de la nave según la altitud
			        ;
5A88 0280 0105 		        MVI y_jugador,R0
5A8A 02B9 0008 		        MVII #8,R1
5A8C 0378 0030 		        CMPI #48,R0
5A8E 0205 0007 		        BLT @@5
5A90 02B9 0004 		        MVII #4,R1
5A92 0378 0040 		        CMPI #64,R0
5A94 0205 0001 		        BLT @@5
5A96 01C9 			CLRR R1
5A97 0241 0106 		@@5:    MVO R1,sprite_nave
			        ;
				; Sonido de fondo
				;
5A99 0280 013F 			MVI demo,R0
5A9B 0080 			TSTR R0			; ¿En demo?
5A9C 020C 000D 			BNE @@173		; Sí, salta, evita poner sonido de fondo
5A9E 02B8 0048 			MVII #72,R0
5AA0 0300 0105 			SUB y_jugador,R0
5AA2 0060 			SLR R0,1
5AA3 02F8 000A 			ADDI #10,R0
5AA5 0240 0155 			MVO R0,psg_copia+9	; Periodo de ruido
5AA7 02B8 000A 			MVII #10,R0
5AA9 0240 0157 			MVO R0,psg_copia+11	; Volumen canal A
5AAB 0280 012E 		@@173:	MVI nivel,R0
5AAD 03B8 0001 			ANDI #1,R0		; ¿En el espacio?
5AAF 0281 0125 			MVI offset1,R1
5AB1 020C 0006 			BNE @@138
5AB3 02B8 0033 			MVII #sonido_5-base_sonido,R0
5AB5 0379 00C0 			CMPI #$C0,R1		; ¿Satélite?
5AB7 0204 0022 			BEQ @@139
5AB9 02B8 003C 		@@138:	MVII #sonido_6-base_sonido,R0
5ABB 0379 0098 			CMPI #$98,R1		; ¿Misil teledirigido?
5ABD 0204 001C 			BEQ @@139
5ABF 02B8 0043 			MVII #sonido_7-base_sonido,R0
5AC1 0379 00B8 			CMPI #$B8,R1		; ¿Electricidad?
5AC3 0204 0016 			BEQ @@139
5AC5 02B8 004A 			MVII #sonido_8-base_sonido,R0
5AC7 0379 00A0 			CMPI #$A0,R1		; ¿Robotote?
5AC9 0204 0010 			BEQ @@139
5ACB 02B8 009A 			MVII #sonido_10-base_sonido,R0
5ACD 0281 0138 			MVI vida_extra,R1	; ¿Vida extra?
5ACF 0089 			TSTR R1
5AD0 020C 0009 			BNE @@139
5AD2 02B8 00CB 			MVII #sonido_11-base_sonido,R0
5AD4 0281 0113 			MVI gasolina,R1		; ¿Gasolina baja?
5AD6 0379 0010 			CMPI #$10,R1
5AD8 0206 0001 			BLE @@139
5ADA 01C0 			CLRR R0
5ADB 0340 0146 		@@139:	CMP sonido_base0,R0
5ADD 0204 000F 			BEQ @@140
5ADF 0240 0146 			MVO R0,sonido_base0
5AE1 0240 0147 			MVO R0,sonido_ap0
5AE3 0080 			TSTR R0
5AE4 0204 0006 			BEQ @@141
5AE6 0084 			MOVR R0,R4
5AE7 02FC 68D5 			ADDI #base_sonido,R4
5AE9 02A0 			MVI@ R4,R0
5AEA 03B8 001F 			ANDI #$1F,R0
5AEC 0240 0148 		@@141:	MVO R0,sonido_d0
5AEE 0280 0138 		@@140:	MVI vida_extra,R0
5AF0 0080 			TSTR R0
5AF1 0204 0003 			BEQ @@209
5AF3 0010 			DECR R0
5AF4 0240 0138 			MVO R0,vida_extra
0x5AF6                  @@209:
			        ;
			        ; Procesa ola de ataque
			        ;
5AF6 0280 012E 		        MVI nivel,R0
5AF8 03B8 0001 		        ANDI #1,R0      ; ¿En espacio?
5AFA 020C 00B4 		        BNE @@38        ; No, salta.
5AFC 0280 0135 		        MVI secuencia,R0
5AFE 0008 		        INCR R0
5AFF 0240 0135 		        MVO R0,secuencia
5B01 0281 0117 			MVI y_enemigo1,R1
5B03 0089 			TSTR R1
5B04 020C 0007 			BNE @@200
5B06 0281 0118 			MVI y_enemigo2,R1
5B08 0089 			TSTR R1
5B09 020C 0002 			BNE @@200
5B0B 0281 0119 			MVI y_enemigo3,R1
5B0D 0282 0134 		@@200:	MVI ola,R2
5B0F 037A 0038 		        CMPI #$38,R2	; ¿Ola de 3?
5B11 020C 000F 		        BNE @@39
5B13 0378 0040 		        CMPI #64,R0
5B15 0209 0052 		        BNC @@40
5B17 0011 		        DECR R1
5B18 0379 0020 		        CMPI #32,R1
5B1A 020C 007F 		@@41:   BNE @@42
5B1C 02BA 003B 		        MVII #$3B,R2	; Cambia a ola recta
5B1E 0242 0134 		        MVO R2,ola
5B20 0200 0079 		        B @@42

5B22 037A 0039 		@@39:   CMPI #$39,R2	; ¿Ola de 3?
5B24 020C 0009 		        BNE @@43
5B26 0378 0040 		        CMPI #64,R0
5B28 0209 003F 		        BNC @@40
5B2A 0009 		        INCR R1
5B2B 0379 0048 		        CMPI #72,R1
5B2D 0220 0014 		        B @@41

5B2F 037A 00C0 		@@43:   CMPI #$C0,R2    ; ¿Satélite?
5B31 020C 000E 		        BNE @@44
5B33 0282 0114 		        MVI x_enemigo1,R2
5B35 0012 		        DECR R2
5B36 0242 0114 		        MVO R2,x_enemigo1	
5B38 037A 000A 		        CMPI #10,R2	; ¿Alcanzó el borde de la pantalla?
5B3A 020C 0074 		        BNE @@38	; No, salta
5B3C 01C9 			CLRR R1		; Sí, elimina
5B3D 0241 0117 			MVO R1,y_enemigo1
5B3F 0200 006F 		        B @@38

5B41 037A 003A 		@@44:   CMPI #$3A,R2	; ¿Avión rastreador?
5B43 020C 0024 		        BNE @@40
5B45 0282 0125 		        MVI offset1,R2
5B47 037A 0048 		        CMPI #$48,R2
5B49 0201 001E 		        BC @@40
5B4B 0341 0105 		        CMP y_jugador,R1
5B4D 0204 000A 		        BEQ @@46
5B4F 02BA 00FF 		        MVII #$FF,R2
5B51 0201 0002 		        BC @@47
5B53 02BA 0001 		        MVII #$01,R2
5B55 02C2 0117 		@@47:   ADD y_enemigo1,R2
5B57 0242 0117 		        MVO R2,y_enemigo1
5B59 0282 0114 		@@46:   MVI x_enemigo1,R2
5B5B 0342 0104 		        CMP x_jugador,R2
5B5D 0204 000A 		        BEQ @@40
5B5F 02BA 00FF 		        MVII #$FF,R2
5B61 0201 0002 		        BC @@48
5B63 02BA 0001 		        MVII #$01,R2
5B65 02C2 0114 		@@48:   ADD x_enemigo1,R2
5B67 0242 0114 		        MVO R2,x_enemigo1
5B69 0280 0125 		@@40:   MVI offset1,R0
5B6B 0378 00F0 			CMPI #$F0,R0	; ¿Planetoides?
5B6D 020C 0006 			BNE @@142
5B6F 0280 0103 			MVI cuadro,R0
5B71 03B8 0001 			ANDI #1,R0	; Desplazar más lento
5B73 020C 003B 			BNE @@38
5B75 0282 0310 		@@142:	MVI avance,R2
5B77 0012 		        DECR R2
5B78 0242 0310 		        MVO R2,avance
5B7A 02C2 0114 		        ADD x_enemigo1,R2
5B7C 037A 000F 		        CMPI #15,R2
5B7E 020C 0003 		        BNE @@203
5B80 01C0 			CLRR R0
5B81 0240 0117 			MVO R0,y_enemigo1
5B83 0282 0310 		@@203:	MVI avance,R2
5B85 02C2 0115 			ADD x_enemigo2,R2
5B87 037A 000F 			CMPI #15,R2
5B89 020C 0003 			BNE @@199
5B8B 01C0 			CLRR R0
5B8C 0240 0118 			MVO R0,y_enemigo2
5B8E 0282 0310 		@@199:	MVI avance,R2
5B90 02C2 0116 			ADD x_enemigo3,R2
5B92 037A 000F 			CMPI #15,R2
5B94 020C 001A 			BNE @@38
5B96 01C0 			CLRR R0
5B97 0240 0119 			MVO R0,y_enemigo3
5B99 0200 0015 			B @@38

5B9B 0282 0117 		@@42:   MVI y_enemigo1,R2
5B9D 0092 			TSTR R2
5B9E 0204 0002 			BEQ @@201
5BA0 0241 0117 			MVO R1,y_enemigo1
5BA2 0282 0118 		@@201:	MVI y_enemigo2,R2
5BA4 0092 			TSTR R2
5BA5 0204 0002 			BEQ @@202
5BA7 0241 0118 		        MVO R1,y_enemigo2
5BA9 0282 0119 		@@202:	MVI y_enemigo3,R2
5BAB 0092 			TSTR R2
5BAC 0204 0002 			BEQ @@38
5BAE 0241 0119 		        MVO R1,y_enemigo3
0x5BB0                  @@38:
				;
				; Mueve el campo eléctrico
				;
5BB0 0280 011F 			MVI ye3d1,R0
5BB2 0080 			TSTR R0
5BB3 0204 0046 			BEQ @@132
5BB5 0281 0130 			MVI electrico,R1
5BB7 0280 0125 			MVI offset1,R0
5BB9 0378 00B8 			CMPI #$B8,R0	; ¿Electricidad?
5BBB 020C 003E 			BNE @@132
5BBD 0379 0005 			CMPI #5,R1	; ¿Alcanzó el ancho horizontal?
5BBF 020C 0011 			BNE @@133
5BC1 0280 011F 		@@134:	MVI ye3d1,R0
5BC3 02F8 0004 			ADDI #4,R0
5BC5 0240 011F 			MVO R0,ye3d1
5BC7 0280 011B 			MVI xe3d1,R0
5BC9 0338 0008 			SUBI #8,R0
5BCB 0240 011B 			MVO R0,xe3d1
5BCD 0011 			DECR R1
5BCE 022C 000E 			BNE @@134
5BD0 0200 0011 			B @@135
				
5BD2 0009 		@@133:	INCR R1
5BD3 0280 011F 			MVI ye3d1,R0
5BD5 0338 0004 			SUBI #4,R0
5BD7 0240 011F 			MVO R0,ye3d1
5BD9 0280 011B 			MVI xe3d1,R0
5BDB 02F8 0008 			ADDI #8,R0
5BDD 0240 011B 			MVO R0,xe3d1
5BDF 0378 00A0 			CMPI #160,R0	; ¿Se sale de la pantalla?
5BE1 0221 0021 			BC @@134
5BE3 0241 0130 		@@135:	MVO R1,electrico
5BE5 0280 011F 			MVI ye3d1,R0
5BE7 0338 0008 			SUBI #8,R0
5BE9 0240 0120 			MVO R0,ye3d2
5BEB 0338 0008 			SUBI #8,R0
5BED 0240 0121 			MVO R0,ye3d3
5BEF 0280 011B 			MVI xe3d1,R0
5BF1 0240 011C 			MVO R0,xe3d2
5BF3 0240 011D 			MVO R0,xe3d3
5BF5 0280 0125 			MVI offset1,R0
5BF7 0240 0126 			MVO R0,offset2
5BF9 0240 0127 			MVO R0,offset3
0x5BFB                  @@132:

5BFB 0280 0103 			MVI cuadro,R0
5BFD 0080 			TSTR R0		; ¿256 cuadros? (4 segundos)
5BFE 020C 0022 			BNE @@54
5C00 0280 012E 			MVI nivel,R0
5C02 03B8 0001 			ANDI #1,R0	; ¿Espacio?
5C04 0204 001C 			BEQ @@54	; Sí, no gasta gasolina
5C06 0280 012E 			MVI nivel,R0
5C08 0378 0006 			CMPI #6,R0
5C0A 02B9 FFFE 			MVII #-2,R1	; -2
5C0C 0209 0006 			BNC @@82
5C0E 0011 			DECR R1		; -3
5C0F 0378 000C 			CMPI #12,R0
5C11 0209 0001 			BNC @@82
5C13 0011 			DECR R1		; -4
5C14 02C1 0113 		@@82:	ADD gasolina,R1	; Resta gasolina
5C16 0241 0113 			MVO R1,gasolina
5C18 0204 0005 			BEQ @@83	; ¿Se acabó?
5C1A 0203 0006 			BPL @@54
5C1C 01C9 			CLRR R1
5C1D 0241 0113 			MVO R1,gasolina
5C1F 0004 015C 0318 	@@83:	CALL inicia_explosion

			        ;
			        ; Llega aquí si el jugador está explotando
			        ;
0x5C22                  @@54:   
				;
				; Animación de antenas de satélite
				;
5C22 02BA 0124 			MVII #offset0,R2
5C24 02BB 0004 			MVII #4,R3
5C26 02BD 0128 			MVII #offset0temp,R5
5C28 0290 		@@136:	MVI@ R2,R0
5C29 0378 0078 			CMPI #$78,R0	; Antena
5C2B 020C 0009 			BNE @@137
5C2D 0281 0103 			MVI cuadro,R1
5C2F 0065 			SLR R1,2
5C30 0065 			SLR R1,2
5C31 03B9 0007 			ANDI #7,R1
5C33 02F9 6AC3 			ADDI #antena,R1
5C35 0288 			MVI@ R1,R0
5C36 0064 		@@137:	SLR R0,2
5C37 0060 			SLR R0,1
5C38 0268 			MVO@ R0,R5
5C39 000A 			INCR R2
5C3A 0013 			DECR R3
5C3B 022C 0014 			BNE @@136
			        
			        ;
			        ; Generador de números bien aleatorios :P
			        ;
			MACRO ROR
				RRC R0,1
				MOVR R0,R1
				SLR R1,2
				SLR R1,2
				ANDI #$0800,R1
				SLR R1,2
				SLR R1,2
				ANDI #$007F,R0
				XORR R1,R0
			ENDM
5C3D 0280 0139 		        MVI rand,R0
5C3F 0007 			SETC
			;	ROR
5C40 0070 			RRC R0,1
5C41 0081 			MOVR R0,R1
5C42 0065 			SLR R1,2
5C43 0065 			SLR R1,2
5C44 03B9 0800 			ANDI #$0800,R1
5C46 0065 			SLR R1,2
5C47 0065 			SLR R1,2
5C48 03B8 007F 			ANDI #$007F,R0
5C4A 01C8 			XORR R1,R0
5C4B 03C0 0103 		        XOR cuadro,R0
			;	ROR
5C4D 0070 			RRC R0,1
5C4E 0081 			MOVR R0,R1
5C4F 0065 			SLR R1,2
5C50 0065 			SLR R1,2
5C51 03B9 0800 			ANDI #$0800,R1
5C53 0065 			SLR R1,2
5C54 0065 			SLR R1,2
5C55 03B8 007F 			ANDI #$007F,R0
5C57 01C8 			XORR R1,R0
5C58 03C0 0139 			XOR rand,R0
			;	ROR
5C5A 0070 			RRC R0,1
5C5B 0081 			MOVR R0,R1
5C5C 0065 			SLR R1,2
5C5D 0065 			SLR R1,2
5C5E 03B9 0800 			ANDI #$0800,R1
5C60 0065 			SLR R1,2
5C61 0065 			SLR R1,2
5C62 03B8 007F 			ANDI #$007F,R0
5C64 01C8 			XORR R1,R0
5C65 03F8 0009 		        XORI #9,R0
5C67 0240 0139 		        MVO R0,rand

				;
				; Actualiza el indicador de nivel
				;
5C69 01DB 			CLRR R3
5C6A 0280 0105 			MVI y_jugador,R0
5C6C 0338 0020 			SUBI #32,R0
5C6E 01C9 			CLRR R1
5C6F 0378 002F 			CMPI #47,R0
5C71 020E 0009 			BGT @@in1
5C73 02B9 000B 			MVII #11,R1
5C75 0378 0024 			CMPI #36,R0
5C77 0206 0003 			BLE @@in1
5C79 02B9 002F 			MVII #47,R1
5C7B 0101 			SUBR R0,R1
5C7C 0282 015A 		@@in1:	MVI def_nivel,R2
5C7E 014A 			CMPR R1,R2
5C7F 0204 0004 			BEQ @@in7
5C81 03FB 0001 			XORI #1,R3
5C83 0241 015A 			MVO R1,def_nivel
5C85 01C9 		@@in7:	CLRR R1
5C86 0378 0027 			CMPI #39,R0
5C88 020E 0009 			BGT @@in2
5C8A 02B9 000B 			MVII #11,R1
5C8C 0378 001C 			CMPI #28,R0
5C8E 0206 0003 			BLE @@in2
5C90 02B9 0027 			MVII #39,R1
5C92 0101 			SUBR R0,R1
5C93 0282 015B 		@@in2:	MVI def_nivel+1,R2
5C95 014A 			CMPR R1,R2
5C96 0204 0004 			BEQ @@in8
5C98 03FB 0002 			XORI #2,R3
5C9A 0241 015B 			MVO R1,def_nivel+1
5C9C 01C9 		@@in8: 	CLRR R1
5C9D 0378 001F 			CMPI #31,R0
5C9F 020E 0009 			BGT @@in3
5CA1 02B9 000B 			MVII #11,R1
5CA3 0378 0014 			CMPI #20,R0
5CA5 0206 0003 			BLE @@in3
5CA7 02B9 001F 			MVII #31,R1
5CA9 0101 			SUBR R0,R1
5CAA 0282 015C 		@@in3:	MVI def_nivel+2,R2
5CAC 014A 			CMPR R1,R2
5CAD 0204 0004 			BEQ @@in9
5CAF 03FB 0004 			XORI #4,R3
5CB1 0241 015C 			MVO R1,def_nivel+2
5CB3 01C9 		@@in9:	CLRR R1
5CB4 0378 0017 			CMPI #23,R0
5CB6 020E 0009 			BGT @@in4
5CB8 02B9 000B 			MVII #11,R1
5CBA 0378 000C 			CMPI #12,R0
5CBC 0206 0003 			BLE @@in4
5CBE 02B9 0017 			MVII #23,R1
5CC0 0101 			SUBR R0,R1
5CC1 0282 015D 		@@in4:	MVI def_nivel+3,R2
5CC3 014A 			CMPR R1,R2
5CC4 0204 0004 			BEQ @@in10
5CC6 03FB 0008 			XORI #8,R3
5CC8 0241 015D 			MVO R1,def_nivel+3
5CCA 01C9 		@@in10:	CLRR R1
5CCB 0378 000F 			CMPI #15,R0
5CCD 020E 0009 			BGT @@in5
5CCF 02B9 000B 			MVII #11,R1
5CD1 0378 0004 			CMPI #4,R0
5CD3 0206 0003 			BLE @@in5
5CD5 02B9 000F 			MVII #15,R1
5CD7 0101 			SUBR R0,R1
5CD8 0282 015E 		@@in5:	MVI def_nivel+4,R2
5CDA 014A 			CMPR R1,R2
5CDB 0204 0004 			BEQ @@in11
5CDD 03FB 0010 			XORI #16,R3
5CDF 0241 015E 			MVO R1,def_nivel+4
5CE1 02B9 000C 		@@in11:	MVII #12,R1
5CE3 0378 0007 			CMPI #7,R0
5CE5 020E 0003 			BGT @@in6
5CE7 02B9 0013 			MVII #19,R1
5CE9 0101 			SUBR R0,R1
5CEA 0282 015F 		@@in6:	MVI def_nivel+5,R2
5CEC 014A 			CMPR R1,R2
5CED 0204 0004 			BEQ @@in12
5CEF 03FB 0020 			XORI #32,R3
5CF1 0241 015F 			MVO R1,def_nivel+5
5CF3 0243 0160 		@@in12:	MVO R3,def_nivel2

				;
				;
				;
5CF5 0004 015C 0120 		CALL reproduce_sonido
5CF8 0280 011E 			MVI ye3d0,R0
5CFA 0080 			TSTR R0
5CFB 0224 0A16 			BEQ bucle
5CFD 0280 0124 			MVI offset0,R0
5CFF 0378 00D0 			CMPI #$D0,R0
5D01 022C 0A1C 			BNE bucle
5D03 0280 0103 			MVI cuadro,R0
5D05 03B8 0002 			ANDI #2,R0
5D07 022C 0A22 			BNE bucle
5D09 02B8 0030 			MVII #48,R0
5D0B 0240 014E 			MVO R0,psg_copia+2
5D0D 01C0 			CLRR R0
5D0E 0240 0152 			MVO R0,psg_copia+6
5D10 02B8 000F 			MVII #15,R0
5D12 0240 0159 			MVO R0,psg_copia+13
5D14 0220 0A2F 		        B bucle
			        
			;       RETURN                  ; Return to the EXEC and sit doing nothing.
			        ENDP

			;       INCLUDE "../library/print.asm"       ; PRINT.xxx routines


			        ; FILLZERO - Rellena memoria con ceros
			        ; FILLMEM - Rellena memoria con una constante (r0)
			        ;
			        ; R1 - Número de palabras
			        ; R4 - Ap. a memoria para rellenar
			        ;
0x5D16                  CLRSCR: PROC
5D16 02B9 00F0 		        MVII #$0F0,R1
5D18 02BC 0200 		        MVII #$200,R4
0x5D1A                  FILLZERO:
5D1A 01C0 		        CLRR R0         ; Pone R0 a cero
0x5D1B                  FILLMEM:
5D1B 0260 		        MVO@ R0,R4      ; Guarda R0 en R4, incrementa R4
5D1C 0011 		        DECR R1         ; Decrementa contador
5D1D 022C 0003 		        BNEQ FILLMEM    ; Salta si no cero
5D1F 00AF 		        JR R5           ; Retorna
			        ENDP

				;
				; Reproduce efectos de sonido
				;
0x5D20                  reproduce_sonido:
5D20 01C0 			CLRR R0
5D21 0240 0158 			MVO R0,psg_copia+12	; Volumen canal B
5D23 0280 0154 			MVI psg_copia+8,R0
5D25 03B8 00ED 			ANDI #$ED,R0
5D27 03F8 0010 			XORI #$10,R0
5D29 0240 0154 			MVO R0,psg_copia+8
5D2B 0280 014B 			MVI sonido_d1,R0
5D2D 0080 			TSTR R0
5D2E 0204 003C 			BEQ @@1
5D30 0284 014A 			MVI sonido_ap1,R4
5D32 02FC 68D5 			ADDI #base_sonido,R4
5D34 02A2 			MVI@ R4,R2
5D35 02A3 			MVI@ R4,R3
5D36 0091 			MOVR R2,R1
5D37 03BA 00E0 			ANDI #$E0,R2
5D39 0062 			SLR R2,1
5D3A 03FA 0080 			XORI #$80,R2
5D3C 0066 			SLR R2,2
5D3D 0066 			SLR R2,2
5D3E 0242 0158 			MVO R2,psg_copia+12	; Volumen canal B
5D40 009B 			TSTR R3
5D41 0204 0007 			BEQ @@4
5D43 0243 014D 			MVO R3,psg_copia+1	; Periodo canal B
5D45 0043 			SWAP R3
5D46 0243 0151 			MVO R3,psg_copia+5	; Periodo canal B
5D48 0200 000F 			B @@3

5D4A 0041 		@@4:	SWAP R1
5D4B 03B9 001F 			ANDI #$1F,R1
5D4D 0204 000A 			BEQ @@3
5D4F 0241 0155 			MVO R1,psg_copia+9	; Periodo ruido
5D51 0281 0154 			MVI psg_copia+8,R1
5D53 03B9 00ED 			ANDI #$ED,R1
5D55 03F9 0002 			XORI #$02,R1
5D57 0241 0154 			MVO R1,psg_copia+8
5D59 0010 		@@3:	DECR R0
5D5A 020C 0009 			BNE @@2
5D5C 033C 68D5 			SUBI #base_sonido,R4
5D5E 0244 014A 			MVO R4,sonido_ap1
5D60 02FC 68D5 			ADDI #base_sonido,R4
5D62 02A0 			MVI@ R4,R0
5D63 03B8 001F 			ANDI #$1F,R0
5D65 0240 014B 		@@2:	MVO R0,sonido_d1
5D67 0080 			TSTR R0
5D68 020C 0002 			BNE @@1
5D6A 0240 0149 			MVO R0,sonido_base1
0x5D6C                  @@1:	
5D6C 01C0 			CLRR R0	
5D6D 0240 0159 			MVO R0,psg_copia+13	; Volumen canal C
5D6F 0280 0148 			MVI sonido_d0,R0
5D71 0080 			TSTR R0
5D72 0204 002B 			BEQ @@5
5D74 0284 0147 			MVI sonido_ap0,R4
5D76 02FC 68D5 			ADDI #base_sonido,R4
5D78 02A2 			MVI@ R4,R2
5D79 02A3 			MVI@ R4,R3
5D7A 0042 			SWAP R2
5D7B 0242 0159 			MVO R2,psg_copia+13	; Volumen canal C
5D7D 0243 014E 			MVO R3,psg_copia+2	; Periodo canal C
5D7F 0043 			SWAP R3
5D80 0243 0152 			MVO R3,psg_copia+6	; Periodo canal C
5D82 0010 			DECR R0
5D83 020C 0016 			BNE @@6
5D85 033C 68D5 			SUBI #base_sonido,R4
5D87 0244 0147 			MVO R4,sonido_ap0
5D89 02FC 68D5 			ADDI #base_sonido,R4
5D8B 02A0 			MVI@ R4,R0
5D8C 0080 			TSTR R0
5D8D 020B 000C 			BMI @@6
5D8F 03B8 00FF 			ANDI #$FF,R0
5D91 020C 0008 			BNE @@6
5D93 0280 0146 			MVI sonido_base0,R0
5D95 0240 0147 			MVO R0,sonido_ap0
5D97 0084 			MOVR R0,R4
5D98 02FC 68D5 			ADDI #base_sonido,R4
5D9A 02A0 			MVI@ R4,R0
5D9B 03B8 00FF 		@@6:	ANDI #$FF,R0
5D9D 0240 0148 			MVO R0,sonido_d0
0x5D9F                  @@5:
5D9F 00AF 			JR R5

				;
				; Genera un efecto de sonido
				;
0x5DA0                  efecto_sonido:	PROC
5DA0 0270 			PSHR R0
5DA1 0280 0149 			MVI sonido_base1,R0
5DA3 0378 0017 			CMPI #sonido_3-base_sonido,R0
5DA5 0204 0002 			BEQ @@1
5DA7 0378 002C 			CMPI #sonido_4-base_sonido,R0
5DA9 020C 0002 		@@1:	BNE @@2
5DAB 02B0 			PULR R0
5DAC 00AF 			JR R5

5DAD 02B0 		@@2:	PULR R0
				ENDP

0x5DAE                  efecto_sonido_prioridad:	PROC
5DAE 0274 			PSHR R4
5DAF 0240 014A 			MVO R0,sonido_ap1
5DB1 0240 0149 			MVO R0,sonido_base1
5DB3 0084 			MOVR R0,R4
5DB4 02FC 68D5 			ADDI #base_sonido,R4
5DB6 02A0 			MVI@ R4,R0
5DB7 03B8 001F 			ANDI #$1F,R0
5DB9 0240 014B 			MVO R0,sonido_d1
5DBB 02B4 			PULR R4
5DBC 00AF 			JR R5
				ENDP

				;
				; Inserción de enemigo en lista visible
				;
0x5DBD                  insercion:	PROC
5DBD 0280 0126 			MVI offset2,R0
5DBF 0240 0127 			MVO R0,offset3
5DC1 0280 011C 			MVI xe3d2,R0
5DC3 0240 011D 			MVO R0,xe3d3
5DC5 0280 0120 			MVI ye3d2,R0
5DC7 0240 0121 			MVO R0,ye3d3
5DC9 0280 0125 			MVI offset1,R0
5DCB 0240 0126 			MVO R0,offset2
5DCD 0280 011B 			MVI xe3d1,R0
5DCF 0240 011C 			MVO R0,xe3d2
5DD1 0280 011F 			MVI ye3d1,R0
5DD3 0240 0120 			MVO R0,ye3d2
5DD5 00AF 			JR R5
				ENDP

0x5DD6                  gana_puntos:	PROC
5DD6 0284 012E 			MVI nivel,R4
5DD8 03BC 0001 			ANDI #1,R4
5DDA 0204 0004 			BEQ @@1
5DDC 0378 00C0 			CMPI #$C0,R0	; ¿Pared?
5DDE 0201 0025 			BC @@2
5DE0 0338 0040 		@@1:	SUBI #64,R0
5DE2 0201 0001 			BC @@3
5DE4 01C0 			CLRR R0
5DE5 0064 		@@3:	SLR R0,2
5DE6 0060 			SLR R0,1
5DE7 02BC 5E06 			MVII #tabla_puntos,R4
5DE9 00C4 			ADDR R0,R4
5DEA 02A0 			MVI@ R4,R0
5DEB 02C0 0312 			ADD puntos,R0
5DED 0240 0312 			MVO R0,puntos
5DEF 0340 0313 			CMP puntos_vida,R0
5DF1 0205 0012 			BLT @@2
5DF3 0280 0313 			MVI puntos_vida,R0
5DF5 0048 			SLL R0,1	; Duplica puntos requeridos
			;	ADDI #200,R0	; Antes, 04-mar-2014. Muy fácil
5DF6 0240 0313 			MVO R0,puntos_vida
				; 200 puntos cumplidos
5DF8 0280 0311 			MVI vidas,R0
5DFA 0378 0009 			CMPI #9,R0
5DFC 0204 0007 			BEQ @@2
5DFE 0008 			INCR R0
5DFF 0240 0311 			MVO R0,vidas
5E01 02B8 002E 			MVII #46,R0	; Sonido de vida extra
5E03 0240 0138 			MVO R0,vida_extra
5E05 00AF 		@@2:	JR R5

				ENDP

0x5E06                  tabla_puntos:	PROC
5E06 0002 			DECLE $02	; $40 - Avión chico
5E07 0000 			DECLE $00	; $48 - Explosión
5E08 0002 			DECLE $02	; $50 - Cañón mirando a la derecha
5E09 0000 			DECLE $00	; $58 - Explosión
5E0A 0000 			DECLE $00	; $60 - Agujero
5E0B 0002 			DECLE $02	; $68 - Cañón mirando a la izquierda
5E0C 0001 			DECLE $01	; $70 - Combustible
5E0D 0002 			DECLE $02	; $78 - Antena
5E0E 0000 			DECLE $00	; $80 - Agujero disparando
5E0F 0001 			DECLE $01	; $88 - Misil vertical
5E10 0003 			DECLE $03	; $90 - Alienígena
5E11 0005 			DECLE $05	; $98 - Misil teledirigido
5E12 0019 			DECLE $19	; $a0 - Robotote
5E13 0000 			DECLE $00	; $a8 - Parte del robotote
5E14 0000 			DECLE $00	; $b0 - Adorno
5E15 0000 			DECLE $00	; $b8 - Electricidad
5E16 000A 			DECLE $0a	; $c0 - Satélite
				ENDP

0x5E17                  adelanta_nivel: PROC
5E17 0280 012D 		        MVI dificultad,R0
5E19 02F8 0004 		        ADDI #4,R0
5E1B 0378 007F 		        CMPI #$7F,R0
5E1D 0206 0002 		        BLE @@1
5E1F 02B8 007F 		        MVII #$7F,R0
5E21 0240 012D 		@@1:    MVO R0,dificultad
5E23 0280 012E 		        MVI nivel,R0
5E25 0008 		        INCR R0
5E26 0240 012E 		        MVO R0,nivel
				ENDP

0x5E28                  graficos_nivel:	PROC
5E28 0275 			PSHR R5
5E29 0280 012E 			MVI nivel,R0
5E2B 03B8 0001 			ANDI #1,R0
5E2D 0204 002D 			BEQ @@s6

				;
				; Cambia estructuras gráficas
				;
5E2F 0004 015C 03D3 		call espera_int
5E32 0280 012E 			MVI nivel,R0
5E34 03B8 0004 			ANDI #4,R0
5E36 02BC 69B1 			MVII #borde_fortaleza_12,R4
5E38 0204 0002 			BEQ @@s14
5E3A 02BC 6A3A 			MVII #borde_fortaleza_34,R4
5E3C 02BD 0200 		@@s14:	MVII #$0200,R5
5E3E 02A0 		@@s1:	MVI@ R4,R0
5E3F 0080 			TSTR R0
5E40 0204 000D 			BEQ @@s2
5E42 0203 0004 			BPL @@s3
5E44 0020 			NEGR R0
5E45 00C5 			ADDR R0,R5
5E46 0220 0009 			B @@s1

5E48 02A1 		@@s3:	MVI@ R4,R1
5E49 0269 			MVO@ R1,R5
5E4A 0010 			DECR R0
5E4B 022C 0004 			BNE @@s3
5E4D 0220 0010 			B @@s1

5E4F 02A0 		@@s2:	MVI@ R4,R0
5E50 0080 			TSTR R0
5E51 0204 0007 			BEQ @@s4
5E53 02A1 			MVI@ R4,R1
5E54 0269 		@@s5:	MVO@ R1,R5
5E55 0010 			DECR R0
5E56 022C 0003 			BNE @@s5
5E58 0220 001B 			B @@s1
0x5E5A                  @@s4:
5E5A 0200 0056 			B @@s12

0x5E5C                  @@s6:
5E5C 0004 015C 03D3 		call espera_int
5E5F 0280 0112 			MVI inicia_sprites,R0
5E61 0080 			TSTR R0
5E62 022C 0007 			BNE @@s6
5E64 02B8 0080 			MVII #$80,R0
5E66 0240 0112 			MVO R0,inicia_sprites
5E68 0004 015C 03D3 		call espera_int
5E6B 02B8 0000 			MVII #$00,R0
5E6D 0240 0142 			MVO R0,pixel
5E6F 02BA 6ACB 			MVII #tabla_estrellas,R2
5E71 02BB 0228 			MVII #$0228,R3
5E73 02B9 000C 			MVII #12,R1
5E75 0290 		@@s7:	MVI@ R2,R0
5E76 02BD 0014 			MVII #20,R5
5E78 037B 0200 		@@s10:	CMPI #$0200,R3
5E7A 0209 0005 			BNC @@s8
5E7C 037B 02F0 			CMPI #$02F0,R3
5E7E 0201 0001 			BC @@s8
5E80 0258 			MVO@ R0,R3
5E81 000B 		@@s8:	INCR R3
5E82 009C 			MOVR R3,R4
5E83 03BC 0003 			ANDI #$03,R4
5E85 020C 0002 			BNE @@s9
5E87 033B 0014 			SUBI #20,R3
5E89 0338 0008 		@@s9:	SUBI #8,R0
				CMPI #($124-1)*8+COLOR_ESTRELLA,R0
exp2.asm:2650: WARNING - forward reference to SET/EQU symbol
exp2.asm:2650: WARNING - forward reference to SET/EQU symbol
5E8B 0378 091F 
5E8D 020C 0002 			BNE @@s11
				MVII #($124+19)*8+COLOR_ESTRELLA,R0
exp2.asm:2652: WARNING - forward reference to SET/EQU symbol
exp2.asm:2652: WARNING - forward reference to SET/EQU symbol
5E8F 02B8 09BF 
5E91 0015 		@@s11:	DECR R5
5E92 022C 001B 			BNE @@s10
5E94 02FB 0064 			ADDI #100,R3
5E96 000A 			INCR R2
5E97 0011 			DECR R1
5E98 022C 0024 			BNE @@s7
5E9A 02B8 09D7 			MVII #314*8+7,R0
5E9C 0240 0228 			MVO R0,$228
5E9E 02F8 0008 			ADDI #8,R0
5EA0 0240 023C 			MVO R0,$23C
5EA2 02F8 0008 			ADDI #8,R0
5EA4 0240 0250 			MVO R0,$250
5EA6 02F8 0008 			ADDI #8,R0
5EA8 0240 0264 			MVO R0,$264
5EAA 02F8 0008 			ADDI #8,R0
5EAC 0240 0278 			MVO R0,$278
5EAE 02F8 0008 			ADDI #8,R0
5EB0 0240 028C 			MVO R0,$28C
5EB2 02B5 		@@s12:	PULR R5
5EB3 0200 0008 			B sel_nivel
			        ENDP
			        
0x5EB5                  sel_nivel2:     PROC
5EB5 02B8 0050 		        MVII #$50,R0
5EB7 0240 0113 		        MVO R0,gasolina
5EB9 02B8 0048 		        MVII #72,R0
5EBB 0240 0105 		        MVO R0,y_jugador
			        ENDP
			        
0x5EBD                  sel_nivel:      PROC
5EBD 0280 012E 		        MVI nivel,R0
5EBF 03B8 0007 		        ANDI #7,R0
5EC1 02F8 683C 		        ADDI #niveles,R0
5EC3 0084 			MOVR R0,R4
5EC4 02A0 			MVI@ R4,R0
5EC5 0240 0131 		        MVO R0,lector
5EC7 0040 		        SWAP R0
5EC8 0240 0132 		        MVO R0,lector+1
5ECA 01C0 		        CLRR R0
5ECB 0240 0133 		        MVO R0,byte
5ECD 0240 0134 		        MVO R0,ola
5ECF 0240 0135 		        MVO R0,secuencia
5ED1 0240 0137 		        MVO R0,explosion
5ED3 01C0 			CLRR R0
5ED4 0240 011E 		        MVO R0,ye3d0
5ED6 0240 011F 		        MVO R0,ye3d1
5ED8 0240 0120 		        MVO R0,ye3d2
5EDA 0240 0121 		        MVO R0,ye3d3
5EDC 01C0 			CLRR R0
5EDD 0240 0117 		        MVO R0,y_enemigo1
5EDF 0240 0118 		        MVO R0,y_enemigo2
5EE1 0240 0119 		        MVO R0,y_enemigo3
5EE3 01C0 			CLRR R0
5EE4 0240 0108 			MVO R0,x_bala
5EE6 0240 0109 			MVO R0,y_bala
5EE8 0240 010E 			MVO R0,x_bala2
5EEA 0240 010F 			MVO R0,y_bala2
5EEC 02B8 000A 		        MVII #10,R0
5EEE 0240 012F 		        MVO R0,tiempo
5EF0 00AF 		        JR R5
			        ENDP

0x5EF1                  lee_byte:       PROC
5EF1 0280 0131 		        MVI lector,R0
5EF3 0281 0132 		        MVI lector+1,R1
5EF5 0041 		        SWAP R1
5EF6 01C8 		        XORR R1,R0
5EF7 0084 		        MOVR R0,R4
5EF8 02A0 		        MVI@ R4,R0
5EF9 0282 0133 		        MVI byte,R2
5EFB 03FA 0001 		        XORI #1,R2
5EFD 020C 0001 		        BNE @@1
5EFF 0040 		        SWAP R0
5F00 00AF 		@@1:    JR R5
			        ENDP
			        
0x5F01                  adelanta_lector:        PROC
5F01 0282 0133 		        MVI byte,R2
5F03 03FA 0001 		        XORI #1,R2
5F05 0242 0133 		        MVO R2,byte
5F07 020C 000E 		        BNE @@2
5F09 0282 0131 		        MVI lector,R2
5F0B 0283 0132 		        MVI lector+1,R3
5F0D 000A 		        INCR R2
5F0E 037A 0100 			CMPI #$100,R2
5F10 020C 0001 		        BNE @@1
5F12 000B 		        INCR R3
5F13 0242 0131 		@@1:    MVO R2,lector	; Recordar que reduce a 8 bits.
5F15 0243 0132 		        MVO R3,lector+1
5F17 00AF 		@@2:    JR R5
			        ENDP

0x5F18                  inicia_explosion:	PROC
5F18 0280 0104 			MVI x_jugador,R0
5F1A 0240 011B 			MVO R0,xe3d1
5F1C 0240 011C 			MVO R0,xe3d2
5F1E 0240 011D 			MVO R0,xe3d3
5F20 02B8 0048 			MVII #$48,R0
5F22 0240 0125 			MVO R0,offset1
5F24 0240 0126 			MVO R0,offset2
5F26 0240 0127 			MVO R0,offset3
5F28 01C0 			CLRR R0
5F29 0240 0108 			MVO R0,x_bala
5F2B 0240 0109 			MVO R0,y_bala
5F2D 0240 010E 			MVO R0,x_bala2
5F2F 0240 010F 			MVO R0,y_bala2
5F31 0240 011E 			MVO R0,ye3d0
5F33 0280 010D 			MVI yj3d,R0
5F35 0240 0120 			MVO R0,ye3d2
5F37 02F8 0008 			ADDI #8,R0
5F39 0240 011F 			MVO R0,ye3d1
5F3B 0338 0010 			SUBI #16,R0
5F3D 0240 0121 			MVO R0,ye3d3
5F3F 02B8 003C 			MVII #60,R0	; Duración de la explosión en cuadros
5F41 0240 0137 			MVO R0,explosion
				; Efecto de sonido: explosión
5F43 02B8 0017 			MVII #sonido_3-base_sonido,R0
5F45 0220 0198 			B efecto_sonido_prioridad
				;JR R5
				ENDP

				;
				; Permite entrar una letra para las iniciales
				;
0x5F47                  letra_iniciales: PROC
5F47 0275 			BEGIN
5F48 02B8 0014 			MVII #20,R0
5F4A 02BC 0005 			MVII #5,R4
5F4C 0270 		@@186:	PSHR R0
5F4D 0272 			PSHR R2
5F4E 0273 			PSHR R3
5F4F 0281 0103 			MVI cuadro,R1
5F51 03B9 0010 			ANDI #16,R1
5F53 02B9 005F 			MVII #95,R1
5F55 0204 0001 			BEQ @@187
5F57 0299 			MVI@ R3,R1
5F58 004D 		@@187:	SLL R1,2
5F59 0049 			SLL R1,1
5F5A 03F9 0007 			XORI #7,R1
5F5C 0251 			MVO@ R1,R2
5F5D 0274 			PSHR R4
5F5E 0004 015C 03D3 		CALL espera_int
5F61 02B4 			PULR R4
5F62 02B3 			PULR R3
5F63 02B2 			PULR R2
5F64 0285 01FF 			MVI $01FF,R5
5F66 0385 01FE 			AND $01FE,R5
5F68 00A9 			MOVR R5,R1
5F69 03B9 0004 		        ANDI #$04,R1    ; Arriba
5F6B 020C 000E 		        BNE @@189
5F6D 0299 			MVI@ R3,R1
5F6E 00A4 			TSTR R4		; ¿Ya puede aceptar dirección?
5F6F 020C 0007 			BNE @@188
5F71 0009 			INCR R1
5F72 0379 003B 			CMPI #$3B,R1
5F74 020C 0002 			BNE @@188
5F76 02B9 000E 			MVII #$0E,R1
5F78 0259 		@@188:	MVO@ R1,R3
5F79 02BC 0005 			MVII #5,R4

5F7B 00A9 		@@189:	MOVR R5,R1
5F7C 03B9 0001 		        ANDI #$01,R1    ; Abajo
5F7E 020C 000E 		        BNE @@190
5F80 0299 			MVI@ R3,R1
5F81 00A4 			TSTR R4		; ¿Ya puede aceptar dirección?
5F82 020C 0007 			BNE @@191
5F84 0011 			DECR R1
5F85 0379 000D 		        CMPI #$0D,R1
5F87 020C 0002 		        BNE @@191
5F89 02B9 003A 		        MVII #$3A,R1
5F8B 0259 		@@191:	MVO@ R1,R3
5F8C 02BC 0005 			MVII #5,R4

5F8E 00A9 		@@190:	MOVR R5,R1
5F8F 03B9 0008 			ANDI #$08,R1	; Izquierda
5F91 020C 000E 			BNE @@207
5F93 00A4 			TSTR R4		; ¿Ya puede aceptar dirección?
5F94 020C 0009 			BNE @@208
5F96 02B0 			PULR R0
5F97 0299 			MVI@ R3,R1
5F98 004D 			SLL R1,2
5F99 0049 			SLL R1,1
5F9A 03F9 0007 			XORI #7,R1
5F9C 0251 			MVO@ R1,R2
5F9D 01C0 			CLRR R0
5F9E 02B7 			RETURN

5F9F 02BC 0005 		@@208:	MVII #5,R4

5FA1 0272 		@@207:	PSHR R2
5FA2 0273 			PSHR R3
5FA3 0004 015C 03C1 		CALL boton_oprimido
5FA6 02B3 			PULR R3
5FA7 02B2 			PULR R2
5FA8 0204 0005 			BEQ @@192	; ¿Botón oprimido? acepta inicial.
5FAA 02B0 			PULR R0
5FAB 0080 			TSTR R0
5FAC 020B 000C 			BMI @@193
5FAE 0270 			PSHR R0
5FAF 02B0 		@@192:	PULR R0
5FB0 00A4 			TSTR R4
5FB1 0204 0001 			BEQ @@194
5FB3 0014 			DECR R4
5FB4 0080 		@@194:	TSTR R0
5FB5 022B 006A 			BMI @@186
5FB7 0010 			DECR R0
5FB8 0220 006D 			B @@186

0x5FBA                  @@193:	
5FBA 0299 			MVI@ R3,R1
5FBB 004D 			SLL R1,2
5FBC 0049 			SLL R1,1
5FBD 03F9 0007 			XORI #7,R1
5FBF 0251 			MVO@ R1,R2
5FC0 02B7 			RETURN
				ENDP

				;
				; Detecta botón oprimido (bandera Z inactiva)
				;
0x5FC1                  boton_oprimido:	PROC
5FC1 0275 			BEGIN
5FC2 0281 01FF 			MVI $01FF,R1
5FC4 0381 01FE 			AND $01FE,R1
5FC6 0282 013A 			MVI boton_previo,R2
5FC8 01CA 			XORR R1,R2
5FC9 0241 013A 			MVO R1,boton_previo
5FCB 03BA 00E0 			ANDI #$E0,R2	
5FCD 0204 0003 			BEQ @@bo1
5FCF 0019 			COMR R1
5FD0 03B9 00E0 			ANDI #$E0,R1
5FD2 02B7 		@@bo1:	RETURN
				ENDP
			        
			        ;
			        ; Espera a que ocurra una interrupción
			        ;
0x5FD3                  espera_int: PROC
5FD3 01C0 		        CLRR    R0
5FD4 0240 0102 		        MVO     R0,     WFLAG   ; Borra la bandera de espera
5FD6 0340 0102 		@@1     CMP     WFLAG,  R0      ; Espera a que cambie
5FD8 0224 0003 		        BEQ     @@1
				;
				; Actualiza el sonido	
				;
5FDA 02BC 014C 			MVII #psg_copia,R4
5FDC 02BB 01F0 			MVII #$01F0,R3
5FDE 02B9 000E 			MVII #14,R1
5FE0 02A0 		@@2:	MVI@ R4,R0
5FE1 0258 			MVO@ R0,R3
5FE2 000B 			INCR R3
5FE3 0011 			DECR R1
5FE4 022C 0005 			BNE @@2
5FE6 00AF 		        JR      R5              ; Retorna
			        ENDP

			MACRO COLOR_SPRITE
				MOVR R0,R2
				ADDI #color_sprites+3,R2
				MVI@ R2,R3
				SLL R0,1
				SLL R0,2
				ADDR R3,R0
			ENDM

			        ;
			        ; Rutina de interrupción
			        ;
0x5FE7                  vector_int:     PROC
5FE7 0275 		        BEGIN

5FE8 0240 0020 		        MVO     R0,     $20     ; Activa el display
5FEA 0280 0021 		        MVI     $21,    R0      ; Activa modo de 64 definiciones de sprites
5FEC 02B8 0001 		        MVII    #1,     R0
5FEE 0240 0102 		        MVO     R0,     WFLAG   ; Indica que sucedió interrupción
5FF0 01C0 		        CLRR R0
5FF1 0240 0028 		        MVO     R0,     $28     ; Color stack 0
5FF3 0240 002A 		        MVO     R0,     $2A     ; Color stack 2
5FF5 0240 002C 		        MVO     R0,     $2C     ; Color del borde
5FF7 0281 012E 		        MVI nivel,R1
5FF9 03B9 0001 			ANDI #$01,R1
5FFB 0204 000A 			BEQ @@0
5FFD 0281 012E 			MVI nivel,R1
5FFF 03B9 0004 			ANDI #$04,R1
6001 02B8 0001 			MVII #1,R0
6003 0204 0002 			BEQ @@0
6005 02B8 0004 			MVII #4,R0
6007 0240 0029 		@@0:	MVO     R0,     $29     ; Color stack 1
6009 0240 002B 		        MVO     R0,     $2B     ; Color stack 3

				;
			        ; Verifica si carga gráficos adicionales
			        ;
600B 0280 0112 			MVI inicia_sprites,R0
600D 0080 			TSTR R0
600E 0204 00E6 			BEQ @@vi0
6010 0378 0080 			CMPI #$80,R0
6012 020C 000B 			BNE @@vi20
6014 01C0 			CLRR R0
6015 0240 0112 			MVO R0,inicia_sprites
6017 02BC 6619 			MVII #dibujo_estrellas,R4
6019 02BD 3920 			MVII #$3920,R5
601B 02B8 0014 			MVII #20,R0
601D 0200 00A5 			B @@vi3

601F 0378 0081 		@@vi20:	CMPI #$81,R0	; ¿Carga sprites para abismos?
6021 020C 000B 			BNE @@vi28
6023 01C0 			CLRR R0
6024 0240 0112 			MVO R0,inicia_sprites
6026 02BC 6669 			MVII #dibujo_abismos,R4
6028 02BD 3920 			MVII #$3920,R5
602A 02B8 0010 			MVII #16,R0
602C 0200 0096 			B @@vi3

602E 0378 0082 		@@vi28:	CMPI #$82,R0	; ¿Carga sprites para paredes?
6030 020C 000B 			BNE @@vi29
6032 01C0 			CLRR R0
6033 0240 0112 			MVO R0,inicia_sprites
6035 02BC 66A9 			MVII #dibujo_muros,R4
6037 02BD 3920 			MVII #$3920,R5
6039 02B8 0012 			MVII #18,R0
603B 0200 0087 			B @@vi3

603D 0378 0083 		@@vi29:	CMPI #$83,R0	; ¿Carga logo 1?
603F 020C 000C 			BNE @@vi41
6041 02B8 0084 			MVII #$84,R0
6043 0240 0112 			MVO R0,inicia_sprites
6045 02BC 6BC7 			MVII #logo_bitmap,R4
6047 02BD 3800 			MVII #$3800,R5
6049 02B8 0015 			MVII #21,R0
604B 0200 0077 			B @@vi3

604D 0378 0084 		@@vi41:	CMPI #$84,R0	; ¿Carga logo 2?
604F 020C 000C 			BNE @@vi43
6051 02B8 0085 			MVII #$85,R0
6053 0240 0112 			MVO R0,inicia_sprites
6055 02BC 6C1B 			MVII #logo_bitmap+21*4,R4
6057 02BD 38A8 			MVII #$3800+21*8,R5
6059 02B8 0015 			MVII #21,R0
605B 0200 0067 			B @@vi3

605D 0378 0085 		@@vi43:	CMPI #$85,R0
605F 020C 000B 			BNE @@vi48
6061 01C0 			CLRR R0
6062 0240 0112 			MVO R0,inicia_sprites
6064 02BC 6C6F 			MVII #logo_bitmap+42*4,R4
6066 02BD 3950 			MVII #$3800+42*8,R5
6068 02B8 0016 			MVII #22,R0
606A 0200 0058 			B @@vi3

606C 0378 0086 		@@vi48:	CMPI #$86,R0
606E 020C 000B 			BNE @@vi40
6070 01C0 			CLRR R0
6071 0240 0112 			MVO R0,inicia_sprites
6073 02BC 66F1 			MVII #dibujo_muros_ancho,R4
6075 02BD 3920 			MVII #$3920,R5
6077 02B8 0012 			MVII #18,R0
6079 0200 0049 			B @@vi3
				
607B 0378 0087 		@@vi40:	CMPI #$87,R0
607D 020C 0036 			BNE @@vi49
607F 01C0 			CLRR R0
6080 0240 0112 			MVO R0,inicia_sprites
6082 02BD 39D0 			MVII #$39D0,R5
6084 02B8 0006 			MVII #6,R0
6086 0378 0001 		@@vi50:	CMPI #1,R0
6088 02BC 6795 			MVII #graficos_nivel_sup+11*4,R4
608A 020C 0002 			BNE @@vi51
608C 02BC 67B5 			MVII #graficos_nivel_inf+7*4,R4
608E 02A1 		@@vi51:	MVI@    R4,     R1
608F 0269 		        MVO@    R1,     R5
6090 0041 		        SWAP    R1
6091 0269 		        MVO@    R1,     R5
6092 02A1 		        MVI@    R4,     R1
6093 0269 		        MVO@    R1,     R5
6094 0041 		        SWAP    R1
6095 0269 		        MVO@    R1,     R5
6096 02A1 		        MVI@    R4,     R1
6097 0269 		        MVO@    R1,     R5
6098 0041 		        SWAP    R1
6099 0269 		        MVO@    R1,     R5
609A 02A1 		        MVI@    R4,     R1
609B 0269 		        MVO@    R1,     R5
609C 0041 		        SWAP    R1
609D 0269 		        MVO@    R1,     R5
609E 0010 		        DECR R0
609F 022C 001A 		        BNE @@vi50
60A1 02B8 000B 			MVII #11,R0
60A3 0240 015A 			MVO R0,def_nivel
60A5 0240 015B 			MVO R0,def_nivel+1
60A7 0034 			NOP
60A8 0240 015C 			MVO R0,def_nivel+2
60AA 0240 015D 			MVO R0,def_nivel+3
60AC 0034 			NOP
60AD 0240 015E 			MVO R0,def_nivel+4
60AF 02B8 0013 			MVII #19,R0
60B1 0240 015F 			MVO R0,def_nivel+5
60B3 0200 0022 			B @@vi52


60B5 0010 		@@vi49:	DECR R0
60B6 0240 0112 		        MVO R0,inicia_sprites
60B8 02BC 6591 		        MVII #tabla_sprites,R4
60BA 02BD 3810 		        MVII #$3810,R5
60BC 004C 		        SLL R0,2
60BD 004C 		        SLL R0,2
60BE 004C 		        SLL R0,2
60BF 00C4 		        ADDR R0,R4
60C0 0048 		        SLL R0,1
60C1 00C5 		        ADDR R0,R5
60C2 02B8 0010 		        MVII #16,R0
0x60C4                  @@vi3:
60C4 02A1 		        MVI@    R4,     R1
60C5 0269 		        MVO@    R1,     R5
60C6 0041 		        SWAP    R1
60C7 0269 		        MVO@    R1,     R5
60C8 02A1 		        MVI@    R4,     R1
60C9 0269 		        MVO@    R1,     R5
60CA 0041 		        SWAP    R1
60CB 0269 		        MVO@    R1,     R5
60CC 02A1 		        MVI@    R4,     R1
60CD 0269 		        MVO@    R1,     R5
60CE 0041 		        SWAP    R1
60CF 0269 		        MVO@    R1,     R5
60D0 02A1 		        MVI@    R4,     R1
60D1 0269 		        MVO@    R1,     R5
60D2 0041 		        SWAP    R1
60D3 0269 		        MVO@    R1,     R5
60D4 0010 		        DECR R0
60D5 022C 0012 		        BNE @@vi3

				;
				; Ignora colisiones mientras tanto
				;
60D7 01C0 		@@vi52:	CLRR R0
60D8 0240 0018 			MVO 	R0,$18
60DA 0240 0019 			MVO 	R0,$19
60DC 0240 001E 			MVO 	R0,$1E
60DE 0240 013B 			MVO	R0,colision0
60E0 0240 013C 			MVO	R0,colision2
60E2 0240 013D 			MVO	R0,colision6
60E4 0240 0000 			MVO	R0,$00
60E6 0240 0001 			MVO	R0,$01
60E8 0240 0002 			MVO 	R0,$02
60EA 0240 0003 			MVO 	R0,$03
60EC 0240 0004 			MVO	R0,$04
60EE 0240 0005 			MVO 	R0,$05
60F0 0240 0006 			MVO 	R0,$06
60F2 0240 0007 			MVO 	R0,$07
60F4 0200 0401 		        B @@vi2
			      
				;
				; Anota colisiones para uso posterior
				;  
0x60F6                  @@vi0:
60F6 0280 0018 			MVI  	$18,	R0	; Colisión 0
60F8 0240 013B 			MVO	R0,colision0
60FA 0280 001A 			MVI	$1A,	R0	; Colisión 2
60FC 0240 013C 			MVO 	R0,colision2
60FE 0280 001E 			MVI	$1E,	R0	; Colisión 6
6100 0240 013D 			MVO 	R0,colision6
6102 01C0 			CLRR R0
6103 0240 0018 			MVO 	R0,$18
6105 0240 001A 			MVO 	R0,$1A
6107 0240 001E 			MVO 	R0,$1E  

				;
				; Determina si va a dibujar paredes
				; 
6109 0280 012E 			MVI nivel,R0
610B 03B8 0001 			ANDI #1,R0	; ¿Es una fortaleza?
610D 0204 01D9 			BEQ @@vi26	; No, salta.
610F 0280 011F 			MVI ye3d1,R0
6111 0080 			TSTR R0		; ¿Elemento activo?
6112 0204 01D4 			BEQ @@vi26	; No, salta.
6114 0280 0125 			MVI offset1,R0	
6116 0378 00C0 			CMPI #$C0,R0	; ¿Se trata de muro o abismo?
6118 0205 01CE 			BLT @@vi26	; No, salta.
611A 0204 0048 			BEQ @@vi27
611C 0378 00C8 			CMPI #$C8,R0
611E 0204 0044 			BEQ @@vi27
6120 0378 00D0 			CMPI #$D0,R0
6122 0204 0040 			BEQ @@vi27
6124 0378 00E8 			CMPI #$E8,R0
6126 020D 01C0 			BGE @@vi26
				;
				; Abismos (sin parpadeo)
				;
6128 0378 00D8 			CMPI #$D8,R0
612A 02B8 0020 			MVII #$20,R0
612C 0204 0002 			BEQ @@vi31
612E 02B8 0028 			MVII #$28,R0
6130 0240 0129 		@@vi31:	MVO R0,offset1temp
6132 02F8 0002 			ADDI #2,R0
6134 0240 012A 			MVO R0,offset2temp
6136 02F8 0002 			ADDI #2,R0
6138 0240 012B 			MVO R0,offset3temp
613A 02F8 0002 			ADDI #2,R0
613C 0240 0128 			MVO R0,offset0temp
613E 0280 011B 			MVI xe3d1,R0
6140 0240 0144 			MVO R0,montaje_x
6142 02F8 0010 			ADDI #16,R0
6144 0240 011C 			MVO R0,xe3d2
6146 02F8 0010 			ADDI #16,R0
6148 0240 011D 			MVO R0,xe3d3
614A 02F8 0010 			ADDI #16,R0
614C 0240 011A 			MVO R0,xe3d0
614E 0280 011F 			MVI ye3d1,R0
6150 0240 0145 			MVO R0,montaje_y
6152 0338 0028 			SUBI #40,R0
6154 0240 011F 			MVO R0,ye3d1
6156 0338 0008 			SUBI #8,R0
6158 0240 0120 			MVO R0,ye3d2
615A 0338 0008 			SUBI #8,R0
615C 0240 0121 			MVO R0,ye3d3
615E 0338 0008 			SUBI #8,R0
6160 0240 011E 			MVO R0,ye3d0

6162 0200 00A5 			B @@viflicker

				; R0 offset x
				; R1 offset y
				; R4 mosaico de pared por visualizar (0-15)
				; R5 tabla de mosaicos para pared
				;
				; R2 sprite
			MACRO @@vimosaico
				MOVR R4,R3
				ADDR R5,R3
				MVI@ R3,R2
				MOVR R4,R3
				ANDI #$0C,R3
				SLL R3,2
				ADDI #2,R3
				SUBR R3,R1
				MOVR R4,R3
				ANDI #$03,R3
				SLL R3,2
				SLL R3,1
				SUBR R3,R1
				SLL R3,1
				ADDR R3,R0
				INCR R4
				ANDI #$0F,R4
			ENDM
				
				;
				; Paredes
				; Se requiere flicker ya que son demasiados gráficos
				;
0x6164                  @@vi27:
6164 0338 00C0 			SUBI #$C0,R0
6166 00C0 			ADDR R0,R0
6167 02F8 6739 			ADDI #tabla_paredes,R0
6169 0085 			MOVR R0,R5
616A 0284 0143 			MVI montaje,R4
616C 0280 011B 			MVI xe3d1,R0
616E 0281 011F 			MVI ye3d1,R1
6170 0240 0144 			MVO R0,montaje_x
6172 0241 0145 			MVO R1,montaje_y
			;	@@vimosaico
6174 00A3 			MOVR R4,R3
6175 00EB 			ADDR R5,R3
6176 029A 			MVI@ R3,R2
6177 00A3 			MOVR R4,R3
6178 03BB 000C 			ANDI #$0C,R3
617A 004F 			SLL R3,2
617B 02FB 0002 			ADDI #2,R3
617D 0119 			SUBR R3,R1
617E 00A3 			MOVR R4,R3
617F 03BB 0003 			ANDI #$03,R3
6181 004F 			SLL R3,2
6182 004B 			SLL R3,1
6183 0119 			SUBR R3,R1
6184 004B 			SLL R3,1
6185 00D8 			ADDR R3,R0
6186 000C 			INCR R4
6187 03BC 000F 			ANDI #$0F,R4
6189 0240 011A 			MVO R0,xe3d0
618B 0241 011E 			MVO R1,ye3d0
618D 0242 0128 			MVO R2,offset0temp
618F 0118 			SUBR R3,R0
6190 0281 0145 			MVI montaje_y,R1
			;	@@vimosaico
6192 00A3 			MOVR R4,R3
6193 00EB 			ADDR R5,R3
6194 029A 			MVI@ R3,R2
6195 00A3 			MOVR R4,R3
6196 03BB 000C 			ANDI #$0C,R3
6198 004F 			SLL R3,2
6199 02FB 0002 			ADDI #2,R3
619B 0119 			SUBR R3,R1
619C 00A3 			MOVR R4,R3
619D 03BB 0003 			ANDI #$03,R3
619F 004F 			SLL R3,2
61A0 004B 			SLL R3,1
61A1 0119 			SUBR R3,R1
61A2 004B 			SLL R3,1
61A3 00D8 			ADDR R3,R0
61A4 000C 			INCR R4
61A5 03BC 000F 			ANDI #$0F,R4
61A7 0240 011B 			MVO R0,xe3d1
61A9 0241 011F 			MVO R1,ye3d1
61AB 0242 0129 			MVO R2,offset1temp
61AD 0118 			SUBR R3,R0
61AE 0281 0145 			MVI montaje_y,R1
			;	@@vimosaico
61B0 00A3 			MOVR R4,R3
61B1 00EB 			ADDR R5,R3
61B2 029A 			MVI@ R3,R2
61B3 00A3 			MOVR R4,R3
61B4 03BB 000C 			ANDI #$0C,R3
61B6 004F 			SLL R3,2
61B7 02FB 0002 			ADDI #2,R3
61B9 0119 			SUBR R3,R1
61BA 00A3 			MOVR R4,R3
61BB 03BB 0003 			ANDI #$03,R3
61BD 004F 			SLL R3,2
61BE 004B 			SLL R3,1
61BF 0119 			SUBR R3,R1
61C0 004B 			SLL R3,1
61C1 00D8 			ADDR R3,R0
61C2 000C 			INCR R4
61C3 03BC 000F 			ANDI #$0F,R4
61C5 0240 011C 			MVO R0,xe3d2
61C7 0241 0120 			MVO R1,ye3d2
61C9 0242 012A 			MVO R2,offset2temp
61CB 0118 			SUBR R3,R0
61CC 0281 0145 			MVI montaje_y,R1
			;	@@vimosaico
61CE 00A3 			MOVR R4,R3
61CF 00EB 			ADDR R5,R3
61D0 029A 			MVI@ R3,R2
61D1 00A3 			MOVR R4,R3
61D2 03BB 000C 			ANDI #$0C,R3
61D4 004F 			SLL R3,2
61D5 02FB 0002 			ADDI #2,R3
61D7 0119 			SUBR R3,R1
61D8 00A3 			MOVR R4,R3
61D9 03BB 0003 			ANDI #$03,R3
61DB 004F 			SLL R3,2
61DC 004B 			SLL R3,1
61DD 0119 			SUBR R3,R1
61DE 004B 			SLL R3,1
61DF 00D8 			ADDR R3,R0
61E0 000C 			INCR R4
61E1 03BC 000F 			ANDI #$0F,R4
61E3 0240 011D 			MVO R0,xe3d3
61E5 0241 0121 			MVO R1,ye3d3
61E7 0242 012B 			MVO R2,offset3temp
61E9 0118 			SUBR R3,R0
61EA 0281 0145 			MVI montaje_y,R1
			;	@@vimosaico
61EC 00A3 			MOVR R4,R3
61ED 00EB 			ADDR R5,R3
61EE 029A 			MVI@ R3,R2
61EF 00A3 			MOVR R4,R3
61F0 03BB 000C 			ANDI #$0C,R3
61F2 004F 			SLL R3,2
61F3 02FB 0002 			ADDI #2,R3
61F5 0119 			SUBR R3,R1
61F6 00A3 			MOVR R4,R3
61F7 03BB 0003 			ANDI #$03,R3
61F9 004F 			SLL R3,2
61FA 004B 			SLL R3,1
61FB 0119 			SUBR R3,R1
61FC 004B 			SLL R3,1
61FD 00D8 			ADDR R3,R0
61FE 000C 			INCR R4
61FF 03BC 000F 			ANDI #$0F,R4
6201 0240 010E 			MVO R0,x_bala2
6203 0241 010F 			MVO R1,y_bala2
6205 0242 012C 			MVO R2,offset4temp
6207 0244 0143 			MVO R4,montaje

				;
				; Dibuja los sprites correspondientes para flicker
				;
0x6209                  @@viflicker:
6209 0004 0164 00FD 		CALL sprites_x_nave
620C 00A5 			MOVR R4,R5
620D 02BC 0700 			MVII #$0700,R4
620F 0281 011A 		        MVI xe3d0,R1
6211 00E1 		        ADDR R4,R1
6212 0269 		        MVO@ R1,R5      ; Enemigo 0
6213 0281 011B 			MVI xe3d1,R1
6215 00E1 			ADDR R4,R1
6216 0269 			MVO@ R1,R5      ; Enemigo 1
6217 0281 011C 		        MVI xe3d2,R1
6219 00E1 		        ADDR R4,R1
621A 0269 		        MVO@ R1,R5      ; Enemigo 2
621B 0281 011D 		        MVI xe3d3,R1
621D 00E1 		        ADDR R4,R1
621E 0269 		        MVO@ R1,R5      ; Enemigo 3
621F 0281 010E 		        MVI x_bala2,R1
6221 00E1 		        ADDR R4,R1
6222 0269 		        MVO@ R1,R5      ; Bala enemigos

6223 0004 0164 0133 		CALL sprites_y_nave
6226 00A5 			MOVR R4,R5
6227 0280 011E 		        MVI ye3d0,R0
6229 0080 		        TSTR R0
622A 0204 0003 		        BEQ @@vip1
622C 0020 		        NEGR R0
622D 02F8 0068 		        ADDI #104,R0
622F 0203 0009 		@@vip1: BPL @@vip3
6231 02F8 0008 			ADDI #8,R0
6233 0281 0128 			MVI offset0temp,R1
6235 0009 			INCR R1
6236 0241 0128 			MVO R1,offset0temp
6238 03F8 0080 			XORI #$0080,R0
623A 03F8 0180 		@@vip3: XORI #$0180,R0
623C 0268 			MVO@ R0,R5      ; Enemigo 0
623D 0280 011F 			MVI ye3d1,R0
623F 0080 			TSTR R0
6240 0204 0003 		        BEQ @@vip4
6242 0020 		        NEGR R0
6243 02F8 0068 		        ADDI #104,R0
6245 0203 0009 		@@vip4:	BPL @@vip2
6247 02F8 0008 			ADDI #8,R0
6249 0281 0129 			MVI offset1temp,R1
624B 0009 			INCR R1
624C 0241 0129 			MVO R1,offset1temp
624E 03F8 0080 			XORI #$0080,R0
6250 03F8 0180 		@@vip2:	XORI #$0180,R0
6252 0268 			MVO@ R0,R5      ; Enemigo 1
6253 0280 0120 		        MVI ye3d2,R0
6255 0080 		        TSTR R0
6256 0204 0003 		        BEQ @@vip5
6258 0020 		        NEGR R0
6259 02F8 0068 		        ADDI #104,R0
625B 0203 0009 		@@vip5:	BPL @@vip6
625D 02F8 0008 			ADDI #8,R0
625F 0281 012A 			MVI offset2temp,R1
6261 0009 			INCR R1
6262 0241 012A 			MVO R1,offset2temp
6264 03F8 0080 			XORI #$0080,R0
6266 03F8 0180 		@@vip6:	XORI #$0180,R0
6268 0268 			MVO@ R0,R5      ; Enemigo 2
6269 0280 0121 		        MVI ye3d3,R0
626B 0080 		        TSTR R0
626C 0204 0003 		        BEQ @@vip7
626E 0020 		        NEGR R0
626F 02F8 0068 		        ADDI #104,R0
6271 0203 0009 		@@vip7:	BPL @@vip8
6273 02F8 0008 			ADDI #8,R0
6275 0281 012B 			MVI offset3temp,R1
6277 0009 			INCR R1
6278 0241 012B 			MVO R1,offset3temp
627A 03F8 0080 			XORI #$0080,R0
627C 03F8 0180 		@@vip8:	XORI #$0180,R0
627E 0268 			MVO@ R0,R5      ; Enemigo 3
627F 0280 010F 		        MVI y_bala2,R0
6281 0080 		        TSTR R0
6282 0204 0003 		        BEQ @@vip9
6284 0020 		        NEGR R0
6285 02F8 0068 		        ADDI #104,R0
6287 0203 0009 		@@vip9: BPL @@vip10
6289 02F8 0008 			ADDI #8,R0
628B 0281 012C 			MVI offset4temp,r1
628D 0009 			INCR R1
628E 0241 012C 			MVO R1,offset4temp
6290 03F8 0080 			XORI #$0080,R0
0x6292                  @@vip10:
6292 03F8 0180 			XORI #$0180,R0
6294 0268 		        MVO@ R0,R5      ; Bala enemigos

6295 0004 0164 0143 		CALL sprites_color_nave
6298 00A5 			MOVR R4,R5

6299 0280 0128 		        MVI offset0temp,R0
			;	COLOR_SPRITE
629B 0082 			MOVR R0,R2
629C 02FA 67BC 			ADDI #color_sprites+3,R2
629E 0293 			MVI@ R2,R3
629F 0048 			SLL R0,1
62A0 004C 			SLL R0,2
62A1 00D8 			ADDR R3,R0
62A2 02F8 0820 		        ADDI #$0820,R0
62A4 0268 		        MVO@ R0,R5      ; Enemigo 0
62A5 0280 0129 		        MVI offset1temp,R0
			;	COLOR_SPRITE
62A7 0082 			MOVR R0,R2
62A8 02FA 67BC 			ADDI #color_sprites+3,R2
62AA 0293 			MVI@ R2,R3
62AB 0048 			SLL R0,1
62AC 004C 			SLL R0,2
62AD 00D8 			ADDR R3,R0
62AE 02F8 0820 		        ADDI #$0820,R0
62B0 0268 			MVO@ R0,R5      ; Enemigo 1
62B1 0280 012A 			MVI offset2temp,R0
			;	COLOR_SPRITE
62B3 0082 			MOVR R0,R2
62B4 02FA 67BC 			ADDI #color_sprites+3,R2
62B6 0293 			MVI@ R2,R3
62B7 0048 			SLL R0,1
62B8 004C 			SLL R0,2
62B9 00D8 			ADDR R3,R0
62BA 02F8 0820 		        ADDI #$0820,R0
62BC 0268 		        MVO@ R0,R5      ; Enemigo 2
62BD 0280 012B 		        MVI offset3temp,R0
			;	COLOR_SPRITE
62BF 0082 			MOVR R0,R2
62C0 02FA 67BC 			ADDI #color_sprites+3,R2
62C2 0293 			MVI@ R2,R3
62C3 0048 			SLL R0,1
62C4 004C 			SLL R0,2
62C5 00D8 			ADDR R3,R0
62C6 02F8 0820 		        ADDI #$0820,R0
62C8 0268 		        MVO@ R0,R5      ; Enemigo 3
62C9 0280 012C 			MVI offset4temp,R0
			;	COLOR_SPRITE
62CB 0082 			MOVR R0,R2
62CC 02FA 67BC 			ADDI #color_sprites+3,R2
62CE 0293 			MVI@ R2,R3
62CF 0048 			SLL R0,1
62D0 004C 			SLL R0,2
62D1 00D8 			ADDR R3,R0
62D2 02F8 0820 			ADDI #$0820,R0
62D4 0268 		        MVO@ R0,R5      ; Bala enemigos

62D5 01C0 			CLRR R0
62D6 0240 011E 			MVO R0,ye3d0
62D8 0240 0120 			MVO R0,ye3d2
62DA 0240 0121 			MVO R0,ye3d3
62DC 0240 010F 			MVO R0,y_bala2
62DE 0280 0144 			MVI montaje_x,R0
62E0 0240 011B 			MVO R0,xe3d1
62E2 0280 0145 			MVI montaje_y,R0
62E4 0240 011F 			MVO R0,ye3d1

62E6 0200 00C7 			B @@vipuntos

0x62E8                  @@vi26:
			       	;
				; Juego estándar 
			        ; Dibuja los sprites correspondientes
				;
62E8 0004 0164 00FD 		CALL sprites_x_nave
62EB 00A5 			MOVR R4,R5
62EC 0281 011A 		        MVI xe3d0,R1
62EE 02F9 0700 		        ADDI #$0700,R1
62F0 0269 		        MVO@ R1,R5      ; Enemigo 0
62F1 0281 011B 			MVI xe3d1,R1
62F3 02F9 0700 			ADDI #$0700,R1
62F5 0269 			MVO@ R1,R5      ; Enemigo 1
62F6 0281 0129 			MVI offset1temp,R1
62F8 0379 0013 			CMPI #$98/8,R1	; ¿Proyectil teledirigido?
62FA 0281 011B 		        MVI xe3d1,R1
62FC 0204 0004 			BEQ @@vi44	; Sí, salta, evita interacción y convierte en sombra
62FE 0281 011C 		        MVI xe3d2,R1
6300 02F9 0100 		        ADDI #$0100,R1
0x6302                  @@vi44: 
6302 02F9 0600 		        ADDI #$0600,R1
6304 0269 		        MVO@ R1,R5      ; Enemigo 2
6305 0281 011D 		        MVI xe3d3,R1
6307 02F9 0700 		        ADDI #$0700,R1
6309 0269 		        MVO@ R1,R5      ; Enemigo 3
630A 0281 010E 		        MVI x_bala2,R1
630C 02F9 0700 		        ADDI #$0700,R1
630E 0269 		        MVO@ R1,R5      ; Bala enemigos

630F 0004 0164 0133 		CALL sprites_y_nave
6312 00A5 			MOVR R4,R5
6313 0280 011E 		        MVI ye3d0,R0
6315 0080 		        TSTR R0
6316 0204 0003 		        BEQ @@vi4
6318 0020 		        NEGR R0
6319 02F8 0068 		        ADDI #104,R0
631B 0281 0128 		@@vi4:  MVI offset0temp,R1
631D 03F8 0100 			XORI #$0100,R0
631F 0268 			MVO@ R0,R5      ; Enemigo 0
6320 0280 011F 			MVI ye3d1,R0
6322 0080 			TSTR R0
6323 0204 0003 		        BEQ @@vi5
6325 0020 		        NEGR R0
6326 02F8 0068 		        ADDI #104,R0
6328 0281 0129 		@@vi5:  MVI offset1temp,R1
632A 0379 0014 			CMPI #$14,R1	; ¿Robot?
632C 0204 0004 			BEQ @@vi18
632E 0379 0018 			CMPI #$18,R1	; ¿Satélite?
6330 020C 0002 			BNE @@vi17
6332 03F8 0080 		@@vi18:	XORI #$0080,R0	; Sprite de 16 líneas
6334 03F8 0100 		@@vi17: XORI #$0100,R0
6336 0268 			MVO@ R0,R5      ; Enemigo 1
6337 0281 0129 			MVI offset1temp,R1
6339 0379 0013 			CMPI #$98/8,R1	; ¿Proyectil teledirigido?
633B 0280 011C 		        MVI xe3d2,R0
633D 0204 0004 			BEQ @@vi45	; Sí, salta, tiene una coordenada especial
633F 0280 0120 		        MVI ye3d2,R0
6341 0281 012A 			MVI offset2temp,R1
0x6343                  @@vi45: 
6343 0080 		        TSTR R0
6344 0204 0003 		        BEQ @@vi6
6346 0020 		        NEGR R0
6347 02F8 0068 		        ADDI #104,R0
0x6349                  @@vi6:  
6349 0379 0004 			CMPI #$04,R1	; ¿Robotote (mitad der.)?
634B 020C 0002 			BNE @@vi19
634D 03F8 0080 		@@vi32:	XORI #$0080,R0
634F 03F8 0100 		@@vi19:	XORI #$0100,R0
6351 0268 			MVO@ R0,R5      ; Enemigo 2
6352 0280 0121 		        MVI ye3d3,R0
6354 0080 		        TSTR R0
6355 0204 0003 		        BEQ @@vi7
6357 0020 		        NEGR R0
6358 02F8 0068 		        ADDI #104,R0
635A 0281 012B 		@@vi7:  MVI offset3temp,R1
635C 03F8 0100 			XORI #$0100,R0
635E 0268 			MVO@ R0,R5      ; Enemigo 3
635F 0280 010F 		        MVI y_bala2,R0
6361 0080 		        TSTR R0
6362 0204 0003 		        BEQ @@vi8
6364 0020 		        NEGR R0
6365 02F8 0068 		        ADDI #104,R0
6367 03F8 0100 		@@vi8:  XORI #$0100,R0
6369 0268 		        MVO@ R0,R5      ; Bala enemigos

636A 0004 0164 0143 		CALL sprites_color_nave
636D 00A5 			MOVR R4,R5
636E 0280 0128 		        MVI offset0temp,R0
			;	COLOR_SPRITE
6370 0082 			MOVR R0,R2
6371 02FA 67BC 			ADDI #color_sprites+3,R2
6373 0293 			MVI@ R2,R3
6374 0048 			SLL R0,1
6375 004C 			SLL R0,2
6376 00D8 			ADDR R3,R0
6377 02F8 0820 		        ADDI #$0820,R0
6379 0268 		        MVO@ R0,R5      ; Enemigo 0
637A 0280 0129 		        MVI offset1temp,R0
			;	COLOR_SPRITE
637C 0082 			MOVR R0,R2
637D 02FA 67BC 			ADDI #color_sprites+3,R2
637F 0293 			MVI@ R2,R3
6380 0048 			SLL R0,1
6381 004C 			SLL R0,2
6382 00D8 			ADDR R3,R0
6383 02F8 0820 		        ADDI #$0820,R0
6385 0268 			MVO@ R0,R5      ; Enemigo 1
6386 0280 0129 		        MVI offset1temp,R0
6388 0378 0013 			CMPI #$98/8,R0	; ¿Proyectil teledirigido?
638A 0204 0002 			BEQ @@vi47
638C 0280 012A 			MVI offset2temp,R0
0x638E                  @@vi47:
			;	COLOR_SPRITE
638E 0082 			MOVR R0,R2
638F 02FA 67BC 			ADDI #color_sprites+3,R2
6391 0293 			MVI@ R2,R3
6392 0048 			SLL R0,1
6393 004C 			SLL R0,2
6394 00D8 			ADDR R3,R0
6395 0281 0129 			MVI offset1temp,R1
6397 0379 0013 			CMPI #$98/8,R1	; ¿Proyectil teledirigido?
6399 020C 0002 			BNE @@vi46	; No, salta
639B 03B8 EFF8 			ANDI #$EFF8,R0	; Convierte en sombra negra
0x639D                  @@vi46: 
639D 02F8 0820 		        ADDI #$0820,R0
639F 0268 		        MVO@ R0,R5      ; Enemigo 2
63A0 0280 012B 		        MVI offset3temp,R0
			;	COLOR_SPRITE
63A2 0082 			MOVR R0,R2
63A3 02FA 67BC 			ADDI #color_sprites+3,R2
63A5 0293 			MVI@ R2,R3
63A6 0048 			SLL R0,1
63A7 004C 			SLL R0,2
63A8 00D8 			ADDR R3,R0
63A9 02F8 0820 		        ADDI #$0820,R0
63AB 0268 		        MVO@ R0,R5      ; Enemigo 3
63AC 02B8 0816 		        MVII #$0816,R0
63AE 0268 			MVO@ R0,R5      ; Bala enemigos


0x63AF                  @@vipuntos:
63AF 0280 013E 			MVI	titulo,R0
63B1 0080 			TSTR R0			; ¿Se halla en la pantalla de título?
63B2 020C 00AA 			BNE @@vi42		; Sí, salta.

63B4 0280 012E 			MVI nivel,R0
63B6 03B8 0001 			ANDI #1,R0		; ¿Nivel espacial?
63B8 020C 0037 			BNE @@vi21		; No, salta.
63BA 0280 0103 			MVI cuadro,R0
63BC 03B8 0001 			ANDI #1,R0		; 30 cuadros por segundo
63BE 020C 0031 			BNE @@vi21
				;
				; Scroll suave de las estrellas
				;
63C0 0280 0142 			MVI pixel,R0
63C2 0378 00FF 			CMPI #$FF,R0
63C4 0204 002B 			BEQ @@vi21
63C6 0085 			MOVR R0,R5
63C7 0064 			SLR R0,2
63C8 03B8 0007 			ANDI #7,R0
63CA 03BD 00F8 			ANDI #$F8,R5
63CC 00C5 			ADDR R0,R5
63CD 02FD 3920 			ADDI #$3920,R5
63CF 01C9 			CLRR R1
63D0 0269 			MVO@ R1,R5
63D1 0280 0142 			MVI pixel,R0
63D3 0008 			INCR R0
63D4 0378 00A0 			CMPI #160,R0
63D6 020C 0001 			BNE @@vi22
63D8 01C0 			CLRR R0
63D9 0240 0142 		@@vi22:	MVO R0,pixel
63DB 03B8 0007 			ANDI #7,R0
63DD 02B9 0001 			MVII #$01,R1
63DF 0204 0004 			BEQ @@vi23
63E1 0049 		@@vi24:	SLL R1,1
63E2 0010 			DECR R0
63E3 022C 0003 			BNE @@vi24
63E5 0280 0142 		@@vi23:	MVI pixel,R0
63E7 0085 			MOVR R0,R5
63E8 0064 			SLR R0,2
63E9 03B8 0007 			ANDI #7,R0
63EB 03BD 00F8 			ANDI #$F8,R5
63ED 00C5 			ADDR R0,R5
63EE 02FD 3920 			ADDI #$3920,R5
63F0 0269 			MVO@ R1,R5
0x63F1                  @@vi21:      
				;
			        ; Define el sprite de la nave
				; De esta forma tiene muchos cuadros de animación
			        ;
63F1 0280 0106 			MVI sprite_nave,R0
63F3 0281 0107 		        MVI ajuste_nave,R1
63F5 00C8 		        ADDR R1,R0
63F6 02F8 6561 		        ADDI #sprites_nave,R0
63F8 0084 		        MOVR R0,R4
63F9 02BD 3800 		        MVII #$3800,R5

63FB 02A1 		        MVI@    R4,     R1
63FC 0269 		        MVO@    R1,     R5
63FD 0041 		        SWAP    R1
63FE 0269 		        MVO@    R1,     R5
63FF 02A1 		        MVI@    R4,     R1
6400 0269 		        MVO@    R1,     R5
6401 0041 		        SWAP    R1
6402 0269 		        MVO@    R1,     R5
6403 02A1 		        MVI@    R4,     R1
6404 0269 		        MVO@    R1,     R5
6405 0041 		        SWAP    R1
6406 0269 		        MVO@    R1,     R5
6407 02A1 		        MVI@    R4,     R1
6408 0269 		        MVO@    R1,     R5
6409 0041 		        SWAP    R1
640A 0269 		        MVO@    R1,     R5

				;
			        ; Define la sombra de la nave (sólo tres cuadros de animación)
				;
640B 0280 0106 		        MVI sprite_nave,R0
640D 0378 000C 		        CMPI #$0c,R0
640F 0205 0008 		        BLT @@vi1
6411 0338 000C 		        SUBI #$0c,R0
6413 0378 000C 		        CMPI #$0c,R0
6415 0205 0002 		        BLT @@vi1
6417 0338 000C 		        SUBI #$0c,R0
6419 02F8 0024 		@@vi1:  ADDI #$24,R0
641B 02F8 6561 		        ADDI #sprites_nave,R0
641D 0084 		        MOVR R0,R4

641E 02A1 		        MVI@    R4,     R1
641F 0269 		        MVO@    R1,     R5
6420 0041 		        SWAP    R1
6421 0269 		        MVO@    R1,     R5
6422 02A1 		        MVI@    R4,     R1
6423 0269 		        MVO@    R1,     R5
6424 0041 		        SWAP    R1
6425 0269 		        MVO@    R1,     R5
6426 02A1 		        MVI@    R4,     R1
6427 0269 		        MVO@    R1,     R5
6428 0041 		        SWAP    R1
6429 0269 		        MVO@    R1,     R5
642A 02A1 		        MVI@    R4,     R1
642B 0269 		        MVO@    R1,     R5
642C 0041 		        SWAP    R1
642D 0269 		        MVO@    R1,     R5

				;
			        ; Define gráficos de nivel (máximo 2)
				;
642E 0280 0160 		        MVI def_nivel2,R0
6430 02BB 015A 			MVII #def_nivel,R3
6432 02BD 39D0 			MVII #$39D0,R5
6434 02BA 0006 			MVII #6,R2
6436 0081 		@@vi54:	MOVR R0,R1
6437 03B9 0001 			ANDI #1,R1
6439 020C 0009 			BNE @@vi53
643B 02FD 0008 			ADDI #8,R5
643D 0060 			SLR	R0,1
643E 000B 			INCR 	R3
643F 0012 			DECR 	R2
6440 022C 000B 			BNE @@vi54
6442 0200 001A 			B @@vi56

0x6444                  @@vi53:	
6444 0299 			MVI@	R3,R1
6445 004D 			SLL R1,2
6446 02F9 6769 			ADDI #graficos_nivel_sup,R1
6448 008C 			MOVR R1,R4
6449 02A1 		        MVI@    R4,     R1
644A 0269 		        MVO@    R1,     R5
644B 0041 		        SWAP    R1
644C 0269 		        MVO@    R1,     R5
644D 02A1 		        MVI@    R4,     R1
644E 0269 		        MVO@    R1,     R5
644F 0041 		        SWAP    R1
6450 0269 		        MVO@    R1,     R5
6451 02A1 		        MVI@    R4,     R1
6452 0269 		        MVO@    R1,     R5
6453 0041 		        SWAP    R1
6454 0269 		        MVO@    R1,     R5
6455 02A1 		        MVI@    R4,     R1
6456 0269 		        MVO@    R1,     R5
6457 0041 		        SWAP    R1
6458 0269 		        MVO@    R1,     R5
6459 0060 		@@vi55:	SLR	R0,1
645A 000B 			INCR 	R3
645B 0012 			DECR 	R2
645C 022C 0027 			BNE @@vi54
0x645E                  @@vi56:

0x645E                  @@vi42:
				;
				; El GRAM es accesible por más tiempo en el VBLANK
				; Así que aquí se actualiza la pantalla
				;
645E 0280 013E 			MVI titulo,R0
6460 0080 			TSTR R0
6461 020C 0094 			BNE @@vi2
				;
				; Ilustra la puntuación
				;
6463 0280 0312 			MVI puntos,R0
6465 02BD 0200 			MVII #$200,R5
6467 02BA 019D 			MVII #$33*8+$0005,R2
6469 026A 			MVO@ R2,R5
646A 02BA 007E 			MVII #$0F*8+$0006,R2
			;	DIGITO 10000
646C 02FA 0008 			ADDI #8,R2
646E 0338 2710 			SUBI #10000,R0
6470 0221 0005 			BC $-4
6472 02F8 2710 			ADDI #10000,R0
6474 037A 0086 			CMPI #$10*8+$0006,R2
6476 020C 0001 			BNE @@vi99
6478 01D2 			CLRR R2
6479 026A 		@@vi99:	MVO@ R2,R5
647A 02BA 007E 			MVII #$0F*8+$0006,R2
			;	DIGITO 1000
647C 02FA 0008 			ADDI #8,R2
647E 0338 03E8 			SUBI #1000,R0
6480 0221 0005 			BC $-4
6482 02F8 03E8 			ADDI #1000,R0
6484 026A 			MVO@ R2,R5
6485 02BA 007E 			MVII #$0F*8+$0006,R2
			;	DIGITO 100
6487 02FA 0008 			ADDI #8,R2
6489 0338 0064 			SUBI #100,R0
648B 0221 0005 			BC $-4
648D 02F8 0064 			ADDI #100,R0
648F 026A 			MVO@ R2,R5
6490 02BA 007E 			MVII #$0F*8+$0006,R2
			;	DIGITO 10
6492 02FA 0008 			ADDI #8,R2
6494 0338 000A 			SUBI #10,R0
6496 0221 0005 			BC $-4
6498 02F8 000A 			ADDI #10,R0
649A 026A 			MVO@ R2,R5
649B 02BA 007E 			MVII #$0F*8+$0006,R2
			;	DIGITO 1
649D 02FA 0008 			ADDI #8,R2
649F 0338 0001 			SUBI #1,R0
64A1 0221 0005 			BC $-4
64A3 02F8 0001 			ADDI #1,R0
64A5 026A 			MVO@ R2,R5
64A6 02BA 0086 			MVII #$10*8+$0006,R2
64A8 026A 			MVO@ R2,R5
				;
				; Dibuja el total de vidas
				;
64A9 0280 0311 			MVI vidas,R0
64AB 02BD 02D9 			MVII #$2D9,R5
64AD 02BA 081D 			MVII #$0103*8+$0005,R2
64AF 026A 			MVO@ R2,R5
64B0 000D 			INCR R5
64B1 02BA 007E 			MVII #$0F*8+$0006,R2	; +1 comienza en dígito cero
64B3 0080 			TSTR R0
64B4 0203 0003 			BPL @@vi98
64B6 01C0 			CLRR R0
64B7 02BA FFFE 			MVII #$0006-8,R2	; +1 será espacio
			;@@vi98:	DIGITO 1
64B9 02FA 0008 		@@vi98:	ADDI #8,R2
64BB 0338 0001 			SUBI #1,R0
64BD 0221 0005 			BC $-4
64BF 02F8 0001 			ADDI #1,R0
64C1 026A 			MVO@ R2,R5
				;
				; Dibuja la barra de combustible
				;
64C2 02BD 02E9 			MVII #$02E9,R5
64C4 02BA 0135 			MVII #$26*8+$0005,R2
64C6 026A 			MVO@ R2,R5
64C7 000D 			INCR R5
64C8 0280 0113 			MVI gasolina,R0
64CA 02BB 0003 			MVII #$0003,R3
64CC 0378 0010 			CMPI #$10,R0	; ¿Queda poca gasolina?
64CE 020E 000D 			BGT @@168	; No, salta.
64D0 0281 0311 			MVI vidas,R1
64D2 0089 			TSTR R1		; ¿Ya explotó?
64D3 020B 0008 			BMI @@168	; Sí, salta, no parpadea.
64D5 0281 0103 			MVI cuadro,R1
64D7 03B9 0008 			ANDI #8,R1	; ¿Tiempo de parpadear?
64D9 0204 0002 			BEQ @@168	; No, salta.
64DB 02BB 0002 			MVII #$0002,R3
64DD 02F8 0007 		@@168:	ADDI #$07,R0
64DF 0064 			SLR R0,2
64E0 0060 			SLR R0,1
64E1 02B9 0005 			MVII #5,R1
64E3 02BA 0000 		@@vi15:	MVII #$00*8,R2
64E5 01DA 			XORR R3,R2
64E6 0080 			TSTR R0
64E7 0204 000A 			BEQ @@vi16
64E9 02BA 0528 			MVII #$A5*8,R2
64EB 01DA 			XORR R3,R2
64EC 0010 			DECR R0
64ED 0204 0004 			BEQ @@vi16
64EF 02BA 02F8 			MVII #$5F*8,R2
64F1 01DA 			XORR R3,R2
64F2 0010 			DECR R0
64F3 026A 		@@vi16:	MVO@ R2,R5
64F4 0011 			DECR R1
64F5 022C 0013 			BNE @@vi15

0x64F7                  @@vi2:	
			        ; Incrementa el número de cuadro
64F7 0280 0103 		        MVI cuadro,R0
64F9 0008 		        INCR R0
64FA 0240 0103 		        MVO R0,cuadro

64FC 02B7 		        RETURN
			        ENDP

				; x_jugador va de 15 a 55 (derecha)
				; y_jugador va de 32 a 72 (abajo)
				; 72+8-7 = 104 - 73 = 31
				; 32+8-7 = 104 - 33 = 71
0x64FD                  sprites_x_nave:	PROC
64FD 02BC 0000 		        MVII #$0,R4     ; Coordenadas X
64FF 0280 0123 		        MVI offset9,R0
6501 0378 00FF 			CMPI #$FF,R0
6503 02B8 0100 			MVII #$100,R0
6505 0204 0018 			BEQ @@vi25
6507 0280 0104 			MVI x_jugador,R0
6509 0081 		        MOVR R0,R1
650A 0061 		        SLR R1,1
650B 0282 0105 		        MVI y_jugador,R2
650D 02FA 0008 		        ADDI #8,R2
650F 010A 		        SUBR R1,R2
6510 0022 		        NEGR R2
6511 02FA 0068 		        ADDI #104,R2
6513 03FA 0100 		        XORI #$0100,R2
6515 02BB 0026 		        MVII #38,R3
6517 010B 		        SUBR R1,R3
6518 0023 		        NEGR R3
6519 02FB 0068 		        ADDI #104,R3
651B 03FB 0100 		        XORI #$0100,R3
651D 02F8 0700 		        ADDI #$0700,R0
651F 0260 		@@vi25: MVO@ R0,R4      ; Nave
6520 0281 012E 			MVI nivel,R1
6522 03B9 0001 			ANDI #1,R1
6524 0204 0005 			BEQ @@vi12
6526 0281 0123 		        MVI offset9,R1
6528 0089 		        TSTR R1
6529 0204 0001 		        BEQ @@vi10
652B 01C0 		@@vi12: CLRR R0         ; Desactiva
652C 0260 		@@vi10: MVO@ R0,R4      ; Sombra
652D 0281 0108 		        MVI x_bala,R1
652F 02F9 0700 		        ADDI #$0700,R1
6531 0261 		        MVO@ R1,R4      ; Bala jugador
6532 00AF 			JR R5
				ENDP

0x6533                  sprites_y_nave:	PROC
6533 02BC 0008 		        MVII #$8,R4     ; Coordenadas Y
6535 0262 		        MVO@ R2,R4      ; Nave
6536 0263 		        MVO@ R3,R4      ; Sombra
6537 0280 0109 		        MVI y_bala,R0
6539 0080 		        TSTR R0
653A 0204 0003 		        BEQ @@vi9
653C 0020 		        NEGR R0
653D 02F8 0068 		        ADDI #104,R0
653F 03F8 0100 		@@vi9:  XORI #$0100,R0
6541 0260 		        MVO@ R0,R4      ; Bala jugador
6542 00AF 			JR R5
				ENDP

0x6543                  sprites_color_nave:	PROC
6543 02BC 0010 		        MVII #$10,R4    ; Colores y figuras
6545 0280 0123 		        MVI offset9,R0
6547 0080 		        TSTR R0
6548 0204 000D 		        BEQ @@vi14
654A 0064 			SLR R0,2
654B 0060 			SLR R0,1
			;	COLOR_SPRITE
654C 0082 			MOVR R0,R2
654D 02FA 67BC 			ADDI #color_sprites+3,R2
654F 0293 			MVI@ R2,R3
6550 0048 			SLL R0,1
6551 004C 			SLL R0,2
6552 00D8 			ADDR R3,R0
6553 02F8 0820 		        ADDI #$0820,R0
6555 0200 0002 			B @@vi11

6557 02B8 0807 		@@vi14:	MVII #$0807,R0
6559 0260 		@@vi11: MVO@ R0,R4      ; Nave
655A 02B8 0808 		        MVII #$0808,R0
655C 0260 		        MVO@ R0,R4      ; Sombra
655D 02B8 0817 		        MVII #$0817,R0
655F 0260 		        MVO@ R0,R4      ; Bala jugador
6560 00AF 			JR R5
				ENDP

0x6561                  sprites_nave:   PROC
			        ; Nave grande ($00)
6561 6D46 		        DECLE $6d46
6562 FEEF 		        DECLE $feef
6563 78FC 		        DECLE $78fc
6564 1C38 		        DECLE $1c38
			        ; Nave media ($08)
6565 6C40 		        DECLE $6c40
6566 FE6A 		        DECLE $fe6a
6567 70FC 		        DECLE $70fc
6568 0030 		        DECLE $0030
			        ; Nave chica ($10)
6569 3420 		        DECLE $3420
656A 7C7A 		        DECLE $7c7a
656B 1030 		        DECLE $1030
656C 0000 		        DECLE $0000
			        ; Nave grande yendo a izq. ($18)
656D CB86 		        DECLE $cb86
656E FE6F 		        DECLE $fe6f
656F 78FC 		        DECLE $78fc
6570 001C 		        DECLE $001c
			        ; Nave media yendo a izq. ($20)
6571 CC80 		        DECLE $cc80
6572 FE56 		        DECLE $fe56
6573 70FC 		        DECLE $70fc
6574 0000 		        DECLE $0000
			        ; Nave chica yendo a izq. ($28)
6575 6440 		        DECLE $6440
6576 3C7A 		        DECLE $3c7a
6577 0030 		        DECLE $0030
6578 0000 		        DECLE $0000
			        ; Nave grande yendo a der. ($30)
6579 6F26 		        DECLE $6f26
657A FEED 		        DECLE $feed
657B 387C 		        DECLE $387C
657C 0818 		        DECLE $0818
			        ; Nave media yendo a der. ($38)
657D 6C20 		        DECLE $6c20
657E FAEE 		        DECLE $faee
657F 707C 		        DECLE $707c
6580 1030 		        DECLE $1030
			        ; Nave chica yendo a der. ($40)
6581 7410 		        DECLE $7410
6582 3C7A 		        DECLE $3c7a
6583 1038 		        DECLE $1038
6584 0010 		        DECLE $0010
			        ; Sombra chica ($48)
6585 7C48 		        DECLE $7c48
6586 3078 		        DECLE $3078
6587 0020 		        DECLE $0020
6588 0000 		        DECLE $0000
			        ; Sombra media ($50)
6589 6C40 		        DECLE $6c40
658A 7C7E 		        DECLE $7c7e
658B 1030 		        DECLE $1030
658C 0000 		        DECLE $0000
			        ; Sombra grande ($58)
658D 7E6C 		        DECLE $7e6c
658E 7C7E 		        DECLE $7c7e
658F 3070 		        DECLE $3070
6590 0000 		        DECLE $0000
			        
			        ENDP
			        
			        ; Sin uso ($28)
			;        DECLE $7E3C
			;        DECLE $FFDB
			;        DECLE $C3FF
			;        DECLE $3C66

0x6591                  tabla_sprites:  PROC
			        ; Disparo ($10)
6591 00F0 		        DECLE $00F0
6592 0000 		        DECLE $0000
6593 0000 		        DECLE $0000
6594 0000 		        DECLE $0000
			        ; Nave media (carácter $103)
6595 6C40 		        DECLE $6c40
6596 FE6A 		        DECLE $fe6a
6597 70FC 		        DECLE $70fc
6598 0030 		        DECLE $0030
			        ; Antena 2 ($00)
6599 381C 		        DECLE $381C
659A 3837 		        DECLE $3837
659B 1C3E 		        DECLE $1C3E
659C 3818 		        DECLE $3818
			        ; Antena 3 ($08)
659D 1C38 		        DECLE $1C38
659E 1CEC 		        DECLE $1CEC
659F 387C 		        DECLE $387C
65A0 1C18 		        DECLE $1C18
			        ; Antena 4 ($10)
65A1 2E5C 		        DECLE $2E5C
65A2 2E16 		        DECLE $2E16
65A3 0C3E 		        DECLE $0C3E
65A4 1C18 		        DECLE $1C18
			        ; Antena 5 ($18)
65A5 3E5E 		        DECLE $3E5E
65A6 3E3E 		        DECLE $3E3E
65A7 0C1E 		        DECLE $0C1E
65A8 1C18 		        DECLE $1C18
			        ; Robotote ($20) (mitad der.)
65A9 3000 		        DECLE $3000
65AA FF0C 		        DECLE $FF0C
65AB 0F0F 		        DECLE $0F0F
65AC FFCC 		        DECLE $FFCC
65AD FFCC 		        DECLE $FFCC
65AE FFCC 		        DECLE $FFCC
65AF FFCC 		        DECLE $FFCC
65B0 3CCC 		        DECLE $3CCC
			        ; Avión grande ($30)
65B1 4202 		        DECLE $4202
65B2 3E66 		        DECLE $3E66
65B3 F85C 		        DECLE $F85C
65B4 04CC 		        DECLE $04CC
			        ; Avión medio ($38)
65B5 4200 		        DECLE $4200
65B6 3E66 		        DECLE $3E66
65B7 785C 		        DECLE $785C
65B8 040C 		        DECLE $040C
			        ; Avión chico ($40)
65B9 4400 		        DECLE $4400
65BA 3C6C 		        DECLE $3C6C
65BB 7058 		        DECLE $7058
65BC 0818 		        DECLE $0818
			        ; Explosión 1 ($48)
65BD 6600 		        DECLE $6600
65BE 1238 		        DECLE $1238
65BF 566C 		        DECLE $566C
65C0 0008 		        DECLE $0008
			        ; Cañón mirando a la der. ($50)
65C1 3C00 		        DECLE $3C00
65C2 3A7E 		        DECLE $3A7E
65C3 7E44 		        DECLE $7E44
65C4 397B 		        DECLE $397B
			        ; Explosión 2 ($58)
65C5 A649 		        DECLE $A649
65C6 1358 		        DECLE $1358
65C7 6644 		        DECLE $6644
65C8 2299 		        DECLE $2299
			        ; Agujero ($60)
65C9 3800 		        DECLE $3800
65CA C36E 		        DECLE $C36E
65CB 76C3 		        DECLE $76C3
65CC 183E 		        DECLE $183E
			        ; Cañón mirando a la izq. ($68)
65CD 3C00 		        DECLE $3C00
65CE 5C7E 		        DECLE $5C7E
65CF 7E22 		        DECLE $7E22
65D0 9CDE 		        DECLE $9CDE
			        ; Combustible ($70)
65D1 7E3C 		        DECLE $7E3C
65D2 5A3C 		        DECLE $5A3C
65D3 7E66 		        DECLE $7E66
65D4 3C7E 		        DECLE $3C7E
			        ; Antena ($78)
65D5 743A 		        DECLE $743A
65D6 7468 		        DECLE $7468
65D7 307C 		        DECLE $307C
65D8 3818 		        DECLE $3818
			        ; Agujero disparando ($80)
65D9 5C28 		        DECLE $5C28
65DA DF3A 		        DECLE $DF3A
65DB 7FEB 		        DECLE $7FEB
65DC 5FBE 		        DECLE $5FBE
			        ; Misil vertical ($88)
65DD 3810 		        DECLE $3810
65DE 3838 		        DECLE $3838
65DF 7C38 		        DECLE $7C38
65E0 3838 		        DECLE $3838
			        ; Alienígena ($90)
65E1 7C38 		        DECLE $7C38
65E2 BA7C 		        DECLE $BA7C
65E3 44BA 		        DECLE $44BA
65E4 387C 		        DECLE $387C
			        ; Misil teledirigido ($98)
65E5 0A02 		        DECLE $0A02
65E6 1C0E 		        DECLE $1C0E
65E7 F07E 		        DECLE $F07E
65E8 00C0 		        DECLE $00C0
			        ; Robotote ($a0)
65E9 C030 		        DECLE $C030
65EA C3FC 		        DECLE $C3FC
65EB CFC3 		        DECLE $CFC3
65EC CFFF 		        DECLE $CFFF
65ED CCFF 		        DECLE $CCFF
65EE CFFC 		        DECLE $CFFC
65EF 3FFF 		        DECLE $3FFF
65F0 0003 		        DECLE $0003
			        ; Adorno en pared de fortaleza ($b0)
65F1 DCB8 		        DECLE $DCB8
65F2 F3EE 		        DECLE $F3EE
65F3 FCFF 		        DECLE $FCFF
65F4 C0F0 		        DECLE $C0F0
			        ; Electricidad ($b8)
65F5 5948 			DECLE $5948
65F6 852B 			DECLE $852B
65F7 5948 			DECLE $5948
65F8 052B 			DECLE $052B
			        ; Satélite ($c0)
65F9 7C30 		        DECLE $7C30
65FA 7A7E 		        DECLE $7A7E
65FB 3A7A 		        DECLE $3A7A
65FC 205E 		        DECLE $205E
65FD 183E 		        DECLE $183E
65FE 3050 		        DECLE $3050
65FF 1418 		        DECLE $1418
6600 1038 		        DECLE $1038
			        ; Mira ($d0)
6601 4400 		        DECLE $4400
6602 0028 		        DECLE $0028
6603 4428 		        DECLE $4428
6604 0000 		        DECLE $0000
			        ; Antena 6 ($D8)
6605 3E1C 		        DECLE $3E1C
6606 3E3E 		        DECLE $3E3E
6607 1C3E 		        DECLE $1C3E
6608 3818 		        DECLE $3818
			        ; Adorno 2 ($e0)
6609 F0C0 		        DECLE $F0C0
660A FFFC 		        DECLE $FFFC
660B FCFF 		        DECLE $FCFF
660C C0F0 		        DECLE $C0F0
			        ; Adorno de piso ($e8)
660D 3C08 		        DECLE $3C08
660E CFF2 		        DECLE $CFF2
660F 7F3F 		        DECLE $7F3F
6610 307C 		        DECLE $307C
			        ; Planetoide ($f0)
6611 3D1B 		        DECLE $3D1B
6612 7A7D 		        DECLE $7A7D
6613 8E76 		        DECLE $8E76
6614 D8BC 		        DECLE $D8BC
			        ; Planetoide ($f8)
6615 3800 		        DECLE $3800
6616 7C7C 		        DECLE $7C7C
6617 7C7C 		        DECLE $7C7C
6618 0038 		        DECLE $0038
				ENDP

0x6619                  dibujo_estrellas:	PROC
				; $00
6619 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
661C 0000 
				; $01
661D 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6620 0000 
				; $02
6621 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6624 0000 
				; $03
6625 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6628 0000 
				; $04
6629 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
662C 0000 
				; $05
662D 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6630 0000 
				; $06
6631 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6634 0000 
				; $07
6635 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6638 0000 
				; $08
6639 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
663C 0000 
				; $09
663D 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6640 0000 
				; $0a
6641 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6644 0000 
				; $0b
6645 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6648 0000 
				; $0c
6649 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
664C 0000 
				; $0d
664D 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6650 0000 
				; $0e
6651 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6654 0000 
				; $0f
6655 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6658 0000 
				; $10
6659 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
665C 0000 
				; $11
665D 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6660 0000 
				; $12
6661 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6664 0000 
				; $13
6665 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6668 0000 

				ENDP

0x6669                  dibujo_abismos:	PROC
6669 0000 E080 F0F8 		DECLE $0000,$E080,$F0F8,$7060	; $124 - Abismo entrada 1
666C 7060 
666D 7F7F 1F3F 030F 		DECLE $7F7F,$1F3F,$030F,$0001	; $125 - Abismo entrada 2
6670 0001 
6671 C080 C0E0 C080 		DECLE $C080,$C0E0,$C080,$FFF8	; $126 - Abismo entrada 3
6674 FFF8 
6675 7F7F 0F3F 0003 		DECLE $7F7F,$0F3F,$0003,$0000	; $127 - Abismo entrada 4
6678 0000 
6679 C080 C080 FCF0 		DECLE $C080,$C080,$FCF0,$FCF8	; $128 - Abismo entrada 5
667C FCF8 
667D 0F1F 0307 0001 		DECLE $0F1F,$0307,$0001,$0000	; $129 - Abismo entrada 6
6680 0000 
6681 C000 C080 E0F0 		DECLE $C000,$C080,$E0F0,$FEF0	; $12A - Abismo entrada 7
6684 FEF0 
6685 1FFF 0000 0000 		DECLE $1FFF,$0000,$0000,$0000	; $12B - Abismo entrada 8
6688 0000 
6689 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
668C 0000 
668D 8000 6018 040C 		DECLE $8000,$6018,$040C,$1C0F	; $12D - Abismo salida 1
6690 1C0F 
6691 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6694 0000 
6695 20C0 3010 3870 		DECLE $20C0,$3010,$3870,$0106	; $12F - Abismo salida 2
6698 0106 
6699 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
669C 0000 
669D 30C0 3870 0204 		DECLE $30C0,$3870,$0204,$0306	; $131 - Abismo salida 3
66A0 0306 
66A1 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
66A4 0000 
66A5 20C0 3860 1808 		DECLE $20C0,$3860,$1808,$010F	; $133 - Abismo salida 4
66A8 010F 
				ENDP

0x66A9                  dibujo_muros:	PROC
				; $124 - $00+$01
66A9 0000 0000 2000 		DECLE $0000,$0000,$2000,$F870	; 1 - Tope izq.
66AC F870 
66AD BE7C EFDF BB77 		DECLE $BE7C,$EFDF,$BB77,$EEDD	; 2 - Intermedio 1
66B0 EEDD 
				; $126 - $02+$02
66B1 AA66 EECC BB77 		DECLE $AA66,$EECC,$BB77,$EEDD	; 3 - Intermedio 2
66B4 EEDD 
66B5 AA66 EECC BB77 		DECLE $AA66,$EECC,$BB77,$EEDD	; 3 - Intermedio 2
66B8 EEDD 
				; $128 - $03+nada
66B9 2A66 0E0C 0307 		DECLE $2A66,$0E0C,$0307,$0001	; 4 - Intermedio 3
66BC 0001 
66BD 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
66C0 0000 
				; $12A - $04+$05
66C1 0000 8000 80C0 		DECLE $0000,$8000,$80C0,$C040	; 5 - Hueco 1
66C4 C040 
66C5 A0C0 F870 BE7C 		DECLE $A0C0,$F870,$BE7C,$EEDF	; 6 - Hueco 2
66C8 EEDF 
				; $12C - $06+$07
66C9 0000 8000 A0C0 		DECLE $0000,$8000,$A0C0,$F870	; 7 - Tope der.
66CC F870 
66CD B87C ECD4 A86C 		DECLE $B87C,$ECD4,$A86C,$ECC4	; 8 - Lado der 1.
66D0 ECC4 
				; $12E - $08+$08
66D1 A86C ECC4 A86C 		DECLE $A86C,$ECC4,$A86C,$ECC4	; 9 - Lado der 2.
66D4 ECC4 
66D5 A86C ECC4 A86C 		DECLE $A86C,$ECC4,$A86C,$ECC4	; 9 - Lado der 2.
66D8 ECC4 
				; $130 - $09+nada
66D9 286C 0000 0000 		DECLE $286C,$0000,$0000,$0000	; 10 - Inf. der.
66DC 0000 
66DD 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
66E0 0000 
				; $132 - $06+$01
66E1 0000 8000 A0C0 		DECLE $0000,$8000,$A0C0,$F870	; 7 - Tope der.
66E4 F870 
66E5 BE7C EFDF BB77 		DECLE $BE7C,$EFDF,$BB77,$EEDD	; 2 - Intermedio 1
66E8 EEDD 
				; $134 - $00+$07
66E9 0000 0000 2000 		DECLE $0000,$0000,$2000,$F870	; 1 - Tope izq.
66EC F870 
66ED B87C ECD4 A86C 		DECLE $B87C,$ECD4,$A86C,$ECC4	; 8 - Lado der 1.
66F0 ECC4 

			        ENDP

0x66F1                  dibujo_muros_ancho:	PROC
				; $124 - $00+$01
66F1 0000 0000 2000 		DECLE $0000,$0000,$2000,$F870	; 1 - Tope izq.
66F4 F870 
66F5 BE7C EFDF BB77 		DECLE $BE7C,$EFDF,$BB77,$EEDD	; 2 - Intermedio 1
66F8 EEDD 
				; $126 - $02+$02
66F9 AA66 EECC BB77 		DECLE $AA66,$EECC,$BB77,$EEDD	; 3 - Intermedio 2
66FC EEDD 
66FD AA66 EECC BB77 		DECLE $AA66,$EECC,$BB77,$EEDD	; 3 - Intermedio 2
6700 EEDD 
				; $128 - $03+nada
6701 2A66 0E0C 0307 		DECLE $2A66,$0E0C,$0307,$0001	; 4 - Intermedio 3
6704 0001 
6705 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6708 0000 
				; $12A - $08+$08
6709 A86C ECC4 A86C 		DECLE $A86C,$ECC4,$A86C,$ECC4	; 9 - Lado der 2.
670C ECC4 
670D A86C ECC4 A86C 		DECLE $A86C,$ECC4,$A86C,$ECC4	; 9 - Lado der 2.
6710 ECC4 
				; $12C - $09+nada
6711 286C 0000 0000 		DECLE $286C,$0000,$0000,$0000	; 10 - Inf. der.
6714 0000 
6715 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6718 0000 
				; $12E - $00+$07
6719 0000 0000 2000 		DECLE $0000,$0000,$2000,$F870	; 1 - Tope izq.
671C F870 
671D B87C ECD4 A86C 		DECLE $B87C,$ECD4,$A86C,$ECC4	; 8 - Lado der 1.
6720 ECC4 
				; $130 - $04+$0a
6721 0000 8000 80C0 		DECLE $0000,$8000,$80C0,$C040	; 5 - Hueco 1
6724 C040 
6725 A0C0 F870 BE7C 		DECLE $A0C0,$F870,$BE7C,$EFDF	; 11 - Hueco 3
6728 EFDF 
				; $132 - $0b+$02
6729 AB67 EECD BB77 		DECLE $AB67,$EECD,$BB77,$EEDD	; 12 - Hueco 4
672C EEDD 
672D AA66 EECC BB77 		DECLE $AA66,$EECC,$BB77,$EEDD	; 3 - Intermedio 2
6730 EEDD 
				; $134 - $0C+$05
6731 0000 0000 0000 		DECLE $0000,$0000,$0000,$8000	; 13 - Hueco 5
6734 8000 
6735 A0C0 F870 BE7C 		DECLE $A0C0,$F870,$BE7C,$EEDF	; 6 - Hueco 2
6738 EEDF 

			        ENDP

0x6739                  tabla_paredes:	PROC
				; Pared con hueco a izq.
				; No utiliza $6e-$76 (5)
6739 0060 0066 0060 		DECLE $60,$66,$60,$68
673C 0068 
673D 0062 0062 0062 		DECLE $62,$62,$62,$6A
6740 006A 
6741 0062 0062 0062 		DECLE $62,$62,$62,$6A
6744 006A 
6745 0064 0064 0064 		DECLE $64,$64,$64,$6C
6748 006C 

				; Pared con hueco a der.
				; No utiliza $68 y $72-$76 (4)
6749 0060 006E 0066 		DECLE $60,$6E,$66,$70
674C 0070 
674D 0062 0062 0062 		DECLE $62,$62,$62,$6A
6750 006A 
6751 0062 0062 0062 		DECLE $62,$62,$62,$6A
6754 006A 
6755 0064 0064 0064 		DECLE $64,$64,$64,$6C
6758 006C 

				; Pared con hueco amplio
6759 0060 006C 0070 		DECLE $60,$6C,$70,$6A
675C 006A 
675D 0062 006E 0062 		DECLE $62,$6E,$62,$66
6760 0066 
6761 0062 0062 0062 		DECLE $62,$62,$62,$66
6764 0066 
6765 0064 0064 0064 		DECLE $64,$64,$64,$68
6768 0068 
				ENDP

				; Esto me fue más fácil lograrlo experimentando con IntyBASIC :)
				; GRAFICOS:
				; GRAFICOS
0x6769                  graficos_nivel_sup:	; 
				; 	BITMAP "11111111"	; 0
				; 	BITMAP "11111111"
6769 FFFF 			DECLE 65535
				; 	BITMAP "00111111"
				; 	BITMAP "11001111"
676A CF3F 			DECLE 53055
				; 	BITMAP "11110011"
				; 	BITMAP "11111100"
676B FCF3 			DECLE 64755
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
676C FFFF 			DECLE 65535
				; 
				; 	BITMAP "11111100"	; 1
				; 	BITMAP "11111111"
676D FFFC 			DECLE 65532
				; 	BITMAP "00111111"
				; 	BITMAP "11001111"
676E CF3F 			DECLE 53055
				; 	BITMAP "11110011"
				; 	BITMAP "11111100"
676F FCF3 			DECLE 64755
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
6770 FFFF 			DECLE 65535
				; 
				; 	BITMAP "11110000"	; 2
				; 	BITMAP "11111100"
6771 FCF0 			DECLE 64752
				; 	BITMAP "00111111"
				; 	BITMAP "11001111"
6772 CF3F 			DECLE 53055
				; 	BITMAP "11110011"
				; 	BITMAP "11111100"
6773 FCF3 			DECLE 64755
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
6774 FFFF 			DECLE 65535
				; 
				; 	BITMAP "11000000"	; 3
				; 	BITMAP "11110000"
6775 F0C0 			DECLE 61632
				; 	BITMAP "00111100"
				; 	BITMAP "11001111"
6776 CF3C 			DECLE 53052
				; 	BITMAP "11110011"
				; 	BITMAP "11111100"
6777 FCF3 			DECLE 64755
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
6778 FFFF 			DECLE 65535
				; 
				; 	BITMAP "00000000"	; 4
				; 	BITMAP "11000000"
6779 C000 			DECLE 49152
				; 	BITMAP "00110000"
				; 	BITMAP "11001100"
677A CC30 			DECLE 52272
				; 	BITMAP "11110011"
				; 	BITMAP "11111100"
677B FCF3 			DECLE 64755
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
677C FFFF 			DECLE 65535
				; 
				; 	BITMAP "00000000"	; 5
				; 	BITMAP "00000000"
677D 0000 			DECLE 0
				; 	BITMAP "00000000"
				; 	BITMAP "11000000"
677E C000 			DECLE 49152
				; 	BITMAP "11110000"
				; 	BITMAP "11111100"
677F FCF0 			DECLE 64752
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
6780 FFFF 			DECLE 65535
				; 
				; 	BITMAP "00000000"	; 6
				; 	BITMAP "00000000"
6781 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "11110000"
6782 F0C0 			DECLE 61632
				; 	BITMAP "11111100"
				; 	BITMAP "11111111"
6783 FFFC 			DECLE 65532
				; 	BITMAP "11111111"
				; 	BITMAP "11111111"
6784 FFFF 			DECLE 65535
				; 
				; 	BITMAP "00000000"	; 7
				; 	BITMAP "00000000"
6785 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "00110000"
6786 30C0 			DECLE 12480
				; 	BITMAP "11001100"
				; 	BITMAP "11110011"
6787 F3CC 			DECLE 62412
				; 	BITMAP "11111100"
				; 	BITMAP "11111111"
6788 FFFC 			DECLE 65532
				; 
				; 	BITMAP "00000000"	; 8
				; 	BITMAP "00000000"
6789 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "00110000"
678A 30C0 			DECLE 12480
				; 	BITMAP "00001100"
				; 	BITMAP "11000011"
678B C30C 			DECLE 49932
				; 	BITMAP "11110000"
				; 	BITMAP "11111100"
678C FCF0 			DECLE 64752
				; 
				; 	BITMAP "00000000"	; 9
				; 	BITMAP "00000000"
678D 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "00110000"
678E 30C0 			DECLE 12480
				; 	BITMAP "00001100"
				; 	BITMAP "00000011"
678F 030C 			DECLE 780
				; 	BITMAP "11000000"
				; 	BITMAP "11110000"
6790 F0C0 			DECLE 61632
				; 
				; 	BITMAP "00000000"	; 10
				; 	BITMAP "00000000"
6791 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "00110000"
6792 30C0 			DECLE 12480
				; 	BITMAP "00001100"
				; 	BITMAP "00000011"
6793 030C 			DECLE 780
				; 	BITMAP "00000000"
				; 	BITMAP "11000000"
6794 C000 			DECLE 49152
				; 
				; 	BITMAP "00000000"	; 11
				; 	BITMAP "00000000"
6795 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "00110000"
6796 30C0 			DECLE 12480
				; 	BITMAP "00001100"
				; 	BITMAP "00000011"
6797 030C 			DECLE 780
				; 	BITMAP "00000000"
				; 	BITMAP "00000000"
6798 0000 			DECLE 0
				; 
				; GRAFICOS2:
				; GRAFICOS2
0x6799                  graficos_nivel_inf:
				; 	BITMAP "11111111"	; 12
				; 	BITMAP "11111111"
6799 FFFF 			DECLE 65535
				; 	BITMAP "00111111"
				; 	BITMAP "11001111"
679A CF3F 			DECLE 53055
				; 	BITMAP "11110011"
				; 	BITMAP "00111100"
679B 3CF3 			DECLE 15603
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
679C 030F 			DECLE 783
				; 
				; 	BITMAP "11111100"	; 13
				; 	BITMAP "11111111"
679D FFFC 			DECLE 65532
				; 	BITMAP "00111111"
				; 	BITMAP "11001111"
679E CF3F 			DECLE 53055
				; 	BITMAP "11110011"
				; 	BITMAP "00111100"
679F 3CF3 			DECLE 15603
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
67A0 030F 			DECLE 783
				; 
				; 	BITMAP "11110000"	; 14
				; 	BITMAP "11111100"
67A1 FCF0 			DECLE 64752
				; 	BITMAP "00111111"
				; 	BITMAP "11001111"
67A2 CF3F 			DECLE 53055
				; 	BITMAP "11110011"
				; 	BITMAP "00111100"
67A3 3CF3 			DECLE 15603
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
67A4 030F 			DECLE 783
				; 
				; 	BITMAP "11000000"	; 15
				; 	BITMAP "11110000"
67A5 F0C0 			DECLE 61632
				; 	BITMAP "00111100"
				; 	BITMAP "11001111"
67A6 CF3C 			DECLE 53052
				; 	BITMAP "11110011"
				; 	BITMAP "00111100"
67A7 3CF3 			DECLE 15603
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
67A8 030F 			DECLE 783
				; 
				; 	BITMAP "00000000"	; 16
				; 	BITMAP "11000000"
67A9 C000 			DECLE 49152
				; 	BITMAP "00110000"
				; 	BITMAP "11001100"
67AA CC30 			DECLE 52272
				; 	BITMAP "11110011"
				; 	BITMAP "00111100"
67AB 3CF3 			DECLE 15603
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
67AC 030F 			DECLE 783
				; 
				; 	BITMAP "00000000"	; 17
				; 	BITMAP "00000000"
67AD 0000 			DECLE 0
				; 	BITMAP "00000000"
				; 	BITMAP "11000000"
67AE C000 			DECLE 49152
				; 	BITMAP "11110000"
				; 	BITMAP "00111100"
67AF 3CF0 			DECLE 15600
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
67B0 030F 			DECLE 783
				; 
				; 	BITMAP "00000000"	; 18
				; 	BITMAP "00000000"
67B1 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "11110000"
67B2 F0C0 			DECLE 61632
				; 	BITMAP "11111100"
				; 	BITMAP "00111111"
67B3 3FFC 			DECLE 16380
				; 	BITMAP "00001111"
				; 	BITMAP "00000011"
67B4 030F 			DECLE 783
				; 
				; 	BITMAP "00000000"	; 19
				; 	BITMAP "00000000"
67B5 0000 			DECLE 0
				; 	BITMAP "11000000"
				; 	BITMAP "00110000"
67B6 30C0 			DECLE 12480
				; 	BITMAP "11001100"
				; 	BITMAP "00110011"
67B7 33CC 			DECLE 13260
				; 	BITMAP "00001100"
				; 	BITMAP "00000011"
67B8 030C 			DECLE 780


0x67B9                  color_sprites:	proc
67B9 0007 			decle $0007
67BA 0000 			decle $0000
67BB 000F 			decle $000f
67BC 0007 			decle $0007	; Antena 2
67BD 0007 			decle $0007	; Antena 3
67BE 0007 			decle $0007	; Antena 4
67BF 0007 			decle $0007	; Antena 5
67C0 0007 			decle $0007	; Antena 6
67C1 0007 			decle $0007
67C2 1001 			decle $1001	; Avión grande
67C3 1001 			decle $1001	; Avión medio
67C4 1001 			decle $1001	; Avión chico
67C5 0002 			decle $0002	; Explosión 1
67C6 0005 			decle $0005	; Cañón mirando a la der.
67C7 1002 			decle $1002	; Explosión 2
67C8 0003 			decle $0003	; Agujero
67C9 0005 			decle $0005	; Cañón mirando a la izq.
67CA 1001 			decle $1001	; Combustible
67CB 0007 			decle $0007	; Antena
67CC 0002 			decle $0002	; Agujero disparando
67CD 1006 			decle $1006	; Misil vertical
67CE 0002 			decle $0002	; Alienígena
67CF 1002 			decle $1002	; Misil teledirigido
67D0 0007 			decle $0007	; Robotote
67D1 0007 			decle $0007	; Robotote
67D2 1002 			decle $1002	; Adorno en pared de fortaleza
67D3 0007 			decle $0007
67D4 1000 			decle $1000	; Satélite
67D5 1000 			decle $1000
67D6 1002 			decle $1002	; Mira
67D7 0007 			decle $0007
67D8 0006 			decle $0006	; Adorno 2
67D9 1000 			decle $1000	; Adorno de piso
67DA 0004 			decle $0004	; Planetoide
67DB 0001 			decle $0001	; Planetoide
67DC 0000 			decle $0000	; $20
67DD 0000 			decle $0000
67DE 0000 			decle $0000
67DF 0000 			decle $0000
67E0 0000 			decle $0000	; $24
67E1 0000 			decle $0000
67E2 0000 			decle $0000
67E3 0000 			decle $0000
67E4 0000 			decle $0000	; $28
67E5 0000 			decle $0000
67E6 0000 			decle $0000
67E7 0000 			decle $0000
67E8 0000 			decle $0000	; $2c
67E9 0000 			decle $0000
67EA 0000 			decle $0000
67EB 0000 			decle $0000
67EC 0000 			decle $0000	; $30
67ED 0000 			decle $0000
67EE 0000 			decle $0000
67EF 0000 			decle $0000
67F0 0000 			decle $0000	; $34
67F1 0000 			decle $0000
67F2 0000 			decle $0000
67F3 0000 			decle $0000
67F4 0000 			decle $0000	; $38
67F5 0000 			decle $0000
67F6 0000 			decle $0000
67F7 0000 			decle $0000
67F8 0000 			decle $0000	; $3c
67F9 0000 			decle $0000
67FA 0000 			decle $0000
67FB 0000 			decle $0000
67FC 0000 			decle $0000	; $20
67FD 0000 			decle $0000
67FE 0000 			decle $0000
67FF 0000 			decle $0000
6800 0000 			decle $0000	; $24
6801 0000 			decle $0000
6802 0000 			decle $0000
6803 0000 			decle $0000
6804 0000 			decle $0000	; $28
6805 0000 			decle $0000
6806 0000 			decle $0000
6807 0000 			decle $0000
6808 0000 			decle $0000	; $2c
6809 0000 			decle $0000
680A 0000 			decle $0000
680B 0000 			decle $0000
680C 0000 			decle $0000	; $30
680D 0000 			decle $0000
680E 0000 			decle $0000
680F 0000 			decle $0000
6810 0000 			decle $0000	; $34
6811 0000 			decle $0000
6812 0000 			decle $0000
6813 0000 			decle $0000
6814 0000 			decle $0000	; $38
6815 0000 			decle $0000
6816 0000 			decle $0000
6817 0000 			decle $0000
6818 0000 			decle $0000	; $3c
6819 0000 			decle $0000
681A 0000 			decle $0000
681B 0000 			decle $0000
681C 0007 			decle $0007	; $20
681D 0007 			decle $0007
681E 0007 			decle $0007
681F 0007 			decle $0007
6820 0007 			decle $0007	; $24
6821 0007 			decle $0007
6822 0007 			decle $0007
6823 0007 			decle $0007
6824 0007 			decle $0007	; $28
6825 0007 			decle $0007
6826 0007 			decle $0007
6827 0007 			decle $0007
6828 0007 			decle $0007	; $2c
6829 0007 			decle $0007
682A 0007 			decle $0007
682B 0007 			decle $0007
682C 0007 			decle $0007	; $30
682D 0007 			decle $0007
682E 0007 			decle $0007
682F 0007 			decle $0007
6830 0007 			decle $0007	; $34
6831 0007 			decle $0007
6832 0007 			decle $0007
6833 0007 			decle $0007
6834 0007 			decle $0007	; $38
6835 0007 			decle $0007
6836 0007 			decle $0007
6837 0007 			decle $0007
6838 0007 			decle $0007	; $3c
6839 0007 			decle $0007
683A 0007 			decle $0007
683B 0007 			decle $0007
				endp

				; Tabla de niveles
0x683C                  niveles:	PROC
683C 6844 			DECLE espacio_1
683D 6850 			DECLE fortaleza_1
683E 6868 			DECLE espacio_2
683F 6875 			DECLE fortaleza_2
6840 688E 			DECLE espacio_3
6841 6898 			DECLE fortaleza_3
6842 68B0 			DECLE espacio_4
6843 68BC 			DECLE fortaleza_4
				ENDP

			        ; Espacio 1
0x6844                  espacio_1:      PROC
6844 38F0 		        DECLE $38F0
6845 3A39 		        DECLE $3A39
6846 3B34 		        DECLE $3B34
6847 3C48 		        DECLE $3C48
6848 3D34 		        DECLE $3D34
6849 C020 		        DECLE $C020
684A 3B39 		        DECLE $3B39
684B 3C20 		        DECLE $3C20
684C 3D34 		        DECLE $3D34
684D 3848 		        DECLE $3848
684E 343A 		        DECLE $343A
684F 0000 		        DECLE $0000
			        ENDP

				; Fortaleza 1
0x6850                  fortaleza_1:	PROC
6850 D6DF 			DECLE $D6DF
6851 7170 			DECLE $7170
6852 E96B 			DECLE $E96B
6853 E862 			DECLE $E862
6854 7963 			DECLE $7963
6855 5368 			DECLE $5368
6856 61E8 			DECLE $61E8
6857 62E8 			DECLE $62E8
6858 6A70 			DECLE $6A70
6859 63EA 			DECLE $63EA
685A 6079 			DECLE $6079
685B 63EA 			DECLE $63EA
685C 7252 			DECLE $7252
685D 6A61 			DECLE $6A61
685E BC78 			DECLE $BC78
685F 709B 			DECLE $709B
6860 7373 			DECLE $7373
6861 9379 			DECLE $9379
6862 516A 			DECLE $516A
6863 716B 			DECLE $716B
6864 6260 			DECLE $6260
6865 6278 			DECLE $6278
6866 E6C6 			DECLE $E6C6
6867 0000 			DECLE $0000	; Fin del nivel
				ENDP

			        ; Espacio 2
0x6868                  espacio_2:	PROC
6868 3AF1 			DECLE $3AF1
6869 C020 			DECLE $C020
686A 343B 			DECLE $343B
686B 343C 			DECLE $343C
686C 343D 			DECLE $343D
686D 3A38 			DECLE $3A38
686E 3948 			DECLE $3948
686F 483B 			DECLE $483B
6870 343C 			DECLE $343C
6871 483D 			DECLE $483D
6872 39C0 			DECLE $39C0
6873 343A 			DECLE $343A
6874 0000 			DECLE $0000	; Fin del nivel
				ENDP

				; Fortaleza 2
0x6875                  fortaleza_2:	PROC
6875 CEDF 			DECLE $CEDF
6876 4342 			DECLE $4342
6877 7171 			DECLE $7171
6878 EA60 			DECLE $EA60
6879 E863 			DECLE $E863
687A 7A61 			DECLE $7A61
687B 5168 			DECLE $5168
687C 6B6A 			DECLE $6B6A
687D 7279 			DECLE $7279
687E BC9B 			DECLE $BC9B
687F 61E8 			DECLE $61E8
6880 6093 			DECLE $6093
6881 BD68 			DECLE $BD68
6882 7273 			DECLE $7273
6883 7B78 			DECLE $7B78
6884 73BC 			DECLE $73BC
6885 7972 			DECLE $7972
6886 BD9B 			DECLE $BD9B
6887 7040 			DECLE $7040
6888 9393 			DECLE $9393
6889 4393 			DECLE $4393
688A 717A 			DECLE $717A
688B A37B 			DECLE $A37B
688C E6CE 			DECLE $E6CE
688D 0000 			DECLE $0000	; Fin de nivel
				ENDP

			        ; Espacio 3
0x688E                  espacio_3:	PROC
688E 483B 			DECLE $483B
688F 343C 			DECLE $343C
6890 203D 			DECLE $203D
6891 38C0 			DECLE $38C0
6892 3A39 			DECLE $3A39
6893 3934 			DECLE $3934
6894 203B 			DECLE $203B
6895 343C 			DECLE $343C
6896 483D 			DECLE $483D
6897 0038 			DECLE $0038	; Fin de nivel
				ENDP

			        ; Fortaleza 3 (46 bytes + 1 final)
0x6898                  fortaleza_3:	PROC
6898 CEDF 			DECLE $CEDF
6899 6A70 			DECLE $6A70
689A 63EA 			DECLE $63EA
689B 6079 			DECLE $6079
689C 63EA 			DECLE $63EA
689D 7252 			DECLE $7252
689E 6A61 			DECLE $6A61
689F BC78 			DECLE $BC78
68A0 709B 			DECLE $709B
68A1 7373 			DECLE $7373
68A2 9379 			DECLE $9379
68A3 516A 			DECLE $516A
68A4 716B 			DECLE $716B
68A5 6260 			DECLE $6260
68A6 6278 			DECLE $6278
68A7 7170 			DECLE $7170
68A8 E96B 			DECLE $E96B
68A9 E862 			DECLE $E862
68AA 7963 			DECLE $7963
68AB 5368 			DECLE $5368
68AC 61E8 			DECLE $61E8
68AD 62E8 			DECLE $62E8
68AE E6C6 			DECLE $E6C6
68AF 0000 			DECLE $0000	; Fin de nivel
				ENDP

			        ; Espacio 4
0x68B0                  espacio_4:	PROC
68B0 483B 			DECLE $483B
68B1 343C 			DECLE $343C
68B2 483D 			DECLE $483D
68B3 39C0 			DECLE $39C0
68B4 343A 			DECLE $343A
68B5 203A 			DECLE $203A
68B6 483A 			DECLE $483A
68B7 3BC0 			DECLE $3BC0
68B8 3C34 			DECLE $3C34
68B9 3D34 			DECLE $3D34
68BA 3834 			DECLE $3834
68BB 0039 			DECLE $0039
				ENDP

			        ; Fortaleza 4 (48 bytes + 1 final)
0x68BC                  fortaleza_4:	PROC
68BC C6DF 			DECLE $C6DF
68BD BC9B 			DECLE $BC9B
68BE 61E8 			DECLE $61E8
68BF 6093 			DECLE $6093
68C0 BD68 			DECLE $BD68
68C1 7273 			DECLE $7273
68C2 7B78 			DECLE $7B78
68C3 73BC 			DECLE $73BC
68C4 7972 			DECLE $7972
68C5 4342 			DECLE $4342
68C6 7171 			DECLE $7171
68C7 EA60 			DECLE $EA60
68C8 E863 			DECLE $E863
68C9 7A61 			DECLE $7A61
68CA 9368 			DECLE $9368
68CB 6A51 			DECLE $6A51
68CC 796B 			DECLE $796B
68CD 9B72 			DECLE $9B72
68CE 40BD 			DECLE $40BD
68CF 9370 			DECLE $9370
68D0 4393 			DECLE $4393
68D1 717A 			DECLE $717A
68D2 A37B 			DECLE $A37B
68D3 E6C6 			DECLE $E6C6
68D4 0000 			DECLE $0000	; Fin de nivel
				ENDP

0x68D5                  base_sonido:
68D5 0000 			DECLE $0000

				; Disparo del jugador
0x68D6                  sonido_1:
68D6 0481 0000 			DECLE $0481,$0000
68D8 0682 0000 			DECLE $0682,$0000
68DA 0983 0000 			DECLE $0983,$0000
68DC 0943 0000 			DECLE $0943,$0000
68DE 0903 0000 			DECLE $0903,$0000
68E0 0000 			DECLE $0000

				; Disparo enemigo
0x68E1                  sonido_2:
68E1 00E1 0040 			DECLE $00E1,$0040
68E3 00C1 0010 			DECLE $00C1,$0010
68E5 00A1 0020 			DECLE $00A1,$0020
68E7 0081 0010 			DECLE $0081,$0010
68E9 0061 0060 			DECLE $0061,$0060
68EB 0000 			DECLE $0000

				; Explosión
0x68EC                  sonido_3:
68EC 0882 0000 			DECLE $0882,$0000
68EE 09E3 0000 			DECLE $09E3,$0000
68F0 0AE3 0000 			DECLE $0AE3,$0000
68F2 0BA2 0000 			DECLE $0BA2,$0000
68F4 0C62 0000 			DECLE $0C62,$0000
68F6 1062 0000 			DECLE $1062,$0000
68F8 1462 0000 			DECLE $1462,$0000
68FA 1C65 0000 			DECLE $1C65,$0000
68FC 1F05 0000 			DECLE $1F05,$0000
68FE 1F05 0000 			DECLE $1F05,$0000
6900 0000 			DECLE $0000

				; Lanzamiento
0x6901                  sonido_4:
6901 1F8A 0000 			DECLE $1F8A,$0000
6903 10EA 0000 			DECLE $10EA,$0000
6905 0EF4 0000 			DECLE $0EF4,$0000
6907 0000 			DECLE $0000

				; Los siguientes cuatro son sonidos de fondo continuos

				; Satélite
0x6908                  sonido_5:
6908 0C07 0035 			DECLE $0C07,3579545/2/32/1048
690A 0C03 006A 			DECLE $0C03,3579545/2/32/524
690C 0F07 0035 			DECLE $0F07,3579545/2/32/1048
690E 0F03 006A 			DECLE $0F03,3579545/2/32/524
6910 0000 			DECLE $0000

				; Misil teledirigido
0x6911                  sonido_6:
6911 0F01 0052 			DECLE $0F01,3579545/4/32/338
6913 0F02 00F7 			DECLE $0F02,3579545/4/32/113
6915 0F03 0149 			DECLE $0F03,3579545/4/32/85
6917 0000 			DECLE $0000

				; Electricidad
0x6918                  sonido_7:
6918 0802 00A5 			DECLE $0802,3579545/4/32/169
691A 0F01 0052 			DECLE $0F01,3579545/4/32/338
691C 0C02 00F7 			DECLE $0C02,3579545/4/32/113
691E 0000 			DECLE $0000

				; Robotote
0x691F                  sonido_8:
691F 0C05 0011 			DECLE $0C05,3579545/2/32/3144
6921 0C05 000A 			DECLE $0C05,3579545/2/32/5240
6923 0C05 000E 			DECLE $0C05,3579545/2/32/3930
6925 0C05 0020 			DECLE $0C05,3579545/2/32/1747
6927 0C05 0011 			DECLE $0C05,3579545/2/32/3144
6929 0C05 0018 			DECLE $0C05,3579545/2/32/2246
692B 0000 			DECLE $0000

				; Música de Game Over
0x692C                  sonido_9:
692C 0F0C 00D5 			DECLE $0F0C,3579545/32/524
692E 0804 00D5 			DECLE $0804,3579545/32/524
6930 0F08 00D5 			DECLE $0F08,3579545/32/524
6932 0804 00D5 			DECLE $0804,3579545/32/524
6934 0F08 00D5 			DECLE $0F08,3579545/32/524
6936 0804 00D5 			DECLE $0804,3579545/32/524
6938 0F30 00AA 			DECLE $0F30,3579545/32/655
693A 0808 00AA 			DECLE $0808,3579545/32/655
693C 0F20 008E 			DECLE $0F20,3579545/32/786
693E 0808 008E 			DECLE $0808,3579545/32/786
6940 0F20 0078 			DECLE $0F20,3579545/32/925
6942 0808 0078 			DECLE $0808,3579545/32/925
6944 0F20 0080 			DECLE $0F20,3579545/32/873
6946 0808 0080 			DECLE $0808,3579545/32/873
6948 0F30 008E 			DECLE $0F30,3579545/32/786
694A 0808 008E 			DECLE $0808,3579545/32/786
694C 0F02 0087 			DECLE $0F02,3579545/32/827
694E 0F02 0080 			DECLE $0F02,3579545/32/873
6950 0F02 0078 			DECLE $0F02,3579545/32/925
6952 0F02 0071 			DECLE $0F02,3579545/32/983
6954 0F02 006A 			DECLE $0F02,3579545/32/1048
6956 0F02 0063 			DECLE $0F02,3579545/32/1123
6958 0F02 005C 			DECLE $0F02,3579545/32/1209
695A 0F02 0055 			DECLE $0F02,3579545/32/1310
695C 0F02 004E 			DECLE $0F02,3579545/32/1429
695E 0F02 0047 			DECLE $0F02,3579545/32/1572
6960 0F02 0040 			DECLE $0F02,3579545/32/1747
6962 0F02 0038 			DECLE $0F02,3579545/32/1965
6964 0F02 0031 			DECLE $0F02,3579545/32/2246
6966 0F02 002A 			DECLE $0F02,3579545/32/2620
6968 0F02 0023 			DECLE $0F02,3579545/32/3144
696A 0F02 001C 			DECLE $0F02,3579545/32/3930
696C 0F02 0015 			DECLE $0F02,3579545/32/5240
			;	DECLE $0F02,3579545/32/7860	; evita frecuencia menor al doblar voz
696E 8000 			DECLE $8000	; Evita repetición

				; Sonido de vida extra
0x696F                  sonido_10:
696F 0F02 0103 			DECLE $0F02,3579545/32/431
6971 0002 0103 			DECLE $0002,3579545/32/431
6973 0F02 00CF 			DECLE $0F02,3579545/32/539
6975 0002 00CF 			DECLE $0002,3579545/32/539
6977 0F02 00A6 			DECLE $0F02,3579545/32/673
6979 0002 00A6 			DECLE $0002,3579545/32/673
697B 0F02 0084 			DECLE $0F02,3579545/32/842
697D 0002 0084 			DECLE $0002,3579545/32/842
697F 0F02 006A 			DECLE $0F02,3579545/32/1052
6981 0002 006A 			DECLE $0002,3579545/32/1052
6983 0F02 0055 			DECLE $0F02,3579545/32/1315
6985 0002 0055 			DECLE $0002,3579545/32/1315
6987 0F02 0044 			DECLE $0F02,3579545/32/1644
6989 0002 0044 			DECLE $0002,3579545/32/1644
698B 0F02 0036 			DECLE $0F02,3579545/32/2048
698D 0002 0036 			DECLE $0002,3579545/32/2048
698F 0F02 002B 			DECLE $0F02,3579545/32/2560
6991 0002 002B 			DECLE $0002,3579545/32/2560
6993 0F02 0022 			DECLE $0F02,3579545/32/3200
6995 0002 0022 			DECLE $0002,3579545/32/3200
6997 0F02 001B 			DECLE $0F02,3579545/32/4000
6999 0002 001B 			DECLE $0002,3579545/32/4000
699B 0F02 0016 			DECLE $0F02,3579545/32/5000
699D 0002 0016 			DECLE $0002,3579545/32/5000
699F 0000 			DECLE $0000

				; Sonido de combustible agotado
0x69A0                  sonido_11:
69A0 0F08 045E 			DECLE $0F08,3579545/32/100
69A2 0004 045E 			DECLE $0004,3579545/32/100
69A4 0F04 026D 			DECLE $0F04,3579545/32/180
69A6 0004 026D 			DECLE $0004,3579545/32/180
69A8 0000 			DECLE $0000


				; Offset Y de elementos en fortaleza
0x69A9                  offset_y:	PROC
			    if 0
				DECLE 35
				DECLE 45
				DECLE 55
				DECLE 65
				DECLE 81
				DECLE 105
				DECLE 113
				DECLE 107
			    else
69A9 0028 			DECLE 40
69AA 0032 			DECLE 50
69AB 003C 			DECLE 60
69AC 0046 			DECLE 70
69AD 0056 			DECLE 86
69AE 006E 			DECLE 110
69AF 0076 			DECLE 118
69B0 0070 			DECLE 112
			    endi
				ENDP

				; Estructura de bordes para la fortaleza
0x69B1                  borde_fortaleza_12:
			;	DECLE -16
			;	DECLE 4,148*8+1,150*8+1,152*8+1,154*8+1
			;	DECLE -12
			;	DECLE 4,148*8+1,150*8+1,152*8+1,154*8+1
			;	DECLE 0,4,95*8+1
69B1 FFF8 			DECLE -8	; Linea 0
69B2 0004 04A1 04B1 		DECLE 4,148*8+1,150*8+1,152*8+1,154*8+1
69B5 04C1 04D1 
69B7 0000 0008 02F9 		DECLE 0,8,95*8+1
69BA FFFC 			DECLE -4	; Linea 1
69BB 0004 04A1 04B1 		DECLE 4,148*8+1,150*8+1,152*8+1,154*8+1
69BE 04C1 04D1 
69C0 0000 000C 02F9 		DECLE 0,12,95*8+1
69C3 0004 09D7 04B1 		DECLE 4,314*8+7,150*8+1,152*8+1,154*8+1
69C6 04C1 04D1 
69C8 0000 0010 02F9 		DECLE 0,16,95*8+1

0x4                     COLOR_RAYA:	EQU $0004

69CB 0002 09DF 2000 		DECLE 2,315*8+7,$2000
69CE 0000 0010 0000 		DECLE 0,16,0*8+0
69D1 0002 0534 0544 		DECLE 2,166*8+COLOR_RAYA,168*8+COLOR_RAYA
69D4 0002 29E7 2000 		DECLE 2,316*8+$2007,$2000
69D7 0000 000C 0000 		DECLE 0,12,0*8+0
69DA 0004 0534 0544 		DECLE 4,166*8+COLOR_RAYA,168*8+COLOR_RAYA,170*8+COLOR_RAYA,172*8+COLOR_RAYA
69DD 0554 0564 
69DF 0000 0002 0000 		DECLE 0,2,0*8+0
69E2 0002 29EF 2000 		DECLE 2,317*8+$2007,$2000
69E5 0000 0008 0000 		DECLE 0,8,0*8+0
69E8 0004 0534 0544 		DECLE 4,166*8+COLOR_RAYA,168*8+COLOR_RAYA,170*8+COLOR_RAYA,172*8+COLOR_RAYA
69EB 0554 0564 
69ED 0000 0006 0000 		DECLE 0,6,0*8+0
69F0 0002 29F7 2000 		DECLE 2,318*8+$2007,$2000
69F3 0000 0004 0000 		DECLE 0,4,0*8+0
69F6 0004 0534 0544 		DECLE 4,166*8+COLOR_RAYA,168*8+COLOR_RAYA,170*8+COLOR_RAYA,172*8+COLOR_RAYA
69F9 0554 0564 
69FB 0000 000A 0000 		DECLE 0,10,0*8+0
69FE 0002 29FF 2000 		DECLE 2,319*8+$2007,$2000
6A01 0004 0534 0544 		DECLE 4,166*8+COLOR_RAYA,168*8+COLOR_RAYA,170*8+COLOR_RAYA,172*8+COLOR_RAYA
6A04 0554 0564 
6A06 0000 000E 0000 		DECLE 0,14,0*8+0
6A09 0002 0554 0564 		DECLE 2,170*8+COLOR_RAYA,172*8+COLOR_RAYA
6A0C 0000 0012 0000 		DECLE 0,18,0*8+0

6A0F 0001 22F9 			DECLE 1,$2000+95*8+1
6A11 0000 000F 02F9 		DECLE 0,15,95*8+1
6A14 0004 24A0 04B0 		DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
6A17 04C0 04D0 
6A19 0000 0001 22F9 		DECLE 0,1,$2000+95*8+1
6A1C 0000 000B 02F9 		DECLE 0,11,95*8+1
6A1F 0004 24A0 04B0 		DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
6A22 04C0 04D0 
6A24 0000 0001 2000 		DECLE 0,1,$2000
6A27 0000 0003 0000 		DECLE 0,3,0
6A2A 0000 0008 02F9 		DECLE 0,8,95*8+1
6A2D 0004 24A0 04B0 		DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
6A30 04C0 04D0 
6A32 0000 0001 2000 		DECLE 0,1,$2000
6A35 0000 0007 0000 		DECLE 0,7,0
			;	DECLE 0,4,95*8+1
			;	DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
			;	DECLE 0,1,$2000
			;	DECLE 0,11,0
			;	DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
			;	DECLE 0,1,$2000
			;	DECLE 0,15,0
6A38 0000 0000 			DECLE 0,0

				; Estructura de bordes para la fortaleza
0x6A3A                  borde_fortaleza_34:

0x4                     COLOR_FON2:	equ $0004

			;	DECLE -16
			;	DECLE 4,148*8+COLOR_FON2,150*8+COLOR_FON2,152*8+COLOR_FON2,154*8+COLOR_FON2
			;	DECLE -12
			;	DECLE 4,148*8+COLOR_FON2,150*8+COLOR_FON2,152*8+COLOR_FON2,154*8+COLOR_FON2
			;	DECLE 0,4,95*8+COLOR_FON2
6A3A FFF8 			DECLE -8
6A3B 0004 04A4 04B4 		DECLE 4,148*8+COLOR_FON2,150*8+COLOR_FON2,152*8+COLOR_FON2,154*8+COLOR_FON2
6A3E 04C4 04D4 
6A40 0000 0008 02FC 		DECLE 0,8,95*8+COLOR_FON2
6A43 FFFC 			DECLE -4
6A44 0004 04A4 04B4 		DECLE 4,148*8+COLOR_FON2,150*8+COLOR_FON2,152*8+COLOR_FON2,154*8+COLOR_FON2
6A47 04C4 04D4 
6A49 0000 000C 02FC 		DECLE 0,12,95*8+COLOR_FON2
6A4C 0004 09D7 04B4 		DECLE 4,314*8+7,150*8+COLOR_FON2,152*8+COLOR_FON2,154*8+COLOR_FON2
6A4F 04C4 04D4 
6A51 0000 0010 02FC 		DECLE 0,16,95*8+COLOR_FON2

0x1                     COLOR_RAY2:	EQU $0001

6A54 0002 09DF 2000 		DECLE 2,315*8+7,$2000
6A57 0000 0010 0000 		DECLE 0,16,0*8+0
6A5A 0002 0531 0541 		DECLE 2,166*8+COLOR_RAY2,168*8+COLOR_RAY2
6A5D 0002 29E7 2000 		DECLE 2,316*8+$2007,$2000
6A60 0000 000C 0000 		DECLE 0,12,0*8+0
6A63 0004 0531 0541 		DECLE 4,166*8+COLOR_RAY2,168*8+COLOR_RAY2,170*8+COLOR_RAY2,172*8+COLOR_RAY2
6A66 0551 0561 
6A68 0000 0002 0000 		DECLE 0,2,0*8+0
6A6B 0002 29EF 2000 		DECLE 2,317*8+$2007,$2000
6A6E 0000 0008 0000 		DECLE 0,8,0*8+0
6A71 0004 0531 0541 		DECLE 4,166*8+COLOR_RAY2,168*8+COLOR_RAY2,170*8+COLOR_RAY2,172*8+COLOR_RAY2
6A74 0551 0561 
6A76 0000 0006 0000 		DECLE 0,6,0*8+0
6A79 0002 29F7 2000 		DECLE 2,318*8+$2007,$2000
6A7C 0000 0004 0000 		DECLE 0,4,0*8+0
6A7F 0004 0531 0541 		DECLE 4,166*8+COLOR_RAY2,168*8+COLOR_RAY2,170*8+COLOR_RAY2,172*8+COLOR_RAY2
6A82 0551 0561 
6A84 0000 000A 0000 		DECLE 0,10,0*8+0
6A87 0002 29FF 2000 		DECLE 2,319*8+$2007,$2000
6A8A 0004 0531 0541 		DECLE 4,166*8+COLOR_RAY2,168*8+COLOR_RAY2,170*8+COLOR_RAY2,172*8+COLOR_RAY2
6A8D 0551 0561 
6A8F 0000 000E 0000 		DECLE 0,14,0*8+0
6A92 0002 0551 0561 		DECLE 2,170*8+COLOR_RAY2,172*8+COLOR_RAY2
6A95 0000 0012 0000 		DECLE 0,18,0*8+0

6A98 0001 22FC 			DECLE 1,$2000+95*8+COLOR_FON2
6A9A 0000 000F 02FC 		DECLE 0,15,95*8+COLOR_FON2
6A9D 0004 24A0 04B0 		DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
6AA0 04C0 04D0 
6AA2 0000 0001 22FC 		DECLE 0,1,$2000+95*8+COLOR_FON2
6AA5 0000 000B 02FC 		DECLE 0,11,95*8+COLOR_FON2
6AA8 0004 24A0 04B0 		DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
6AAB 04C0 04D0 
6AAD 0000 0001 2000 		DECLE 0,1,$2000
6AB0 0000 0003 0000 		DECLE 0,3,0
6AB3 0000 0008 02FC 		DECLE 0,8,95*8+COLOR_FON2
6AB6 0004 24A0 04B0 		DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
6AB9 04C0 04D0 
6ABB 0000 0001 2000 		DECLE 0,1,$2000
6ABE 0000 0007 0000 		DECLE 0,7,0
			;	DECLE 0,4,95*8+COLOR_FON2
			;	DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
			;	DECLE 0,1,$2000
			;	DECLE 0,11,0
			;	DECLE 4,$2000+148*8+0,150*8+0,152*8+0,154*8+0
			;	DECLE 0,1,$2000
			;	DECLE 0,15,0
6AC1 0000 0000 			DECLE 0,0

				; Cuadros para antena animada
0x6AC3                  antena:	PROC
6AC3 0078 0000 0008 		DECLE $78,$00,$08,$10,$18,$D8,$D8,$78
6AC6 0010 0018 00D8 00D8 0078 
				ENDP

			;	; Gráficos para pared
			;graficos_pared:
			;	DECLE $0000,$0000,$2000,$F870	; 1 - Tope izq.
			;	DECLE $BE7C,$EFDF,$BB77,$EEDD	; 2 - Intermedio 1
			;	DECLE $AA66,$EECC,$BB77,$EEDD	; 3 - Intermedio 2
			;	DECLE $2A66,$0E0C,$0307,$0001	; 4 - Intermedio 3
			;	DECLE $0000,$8000,$80C0,$C040	; 5 - Hueco 1
			;	DECLE $A0C0,$F870,$BE7C,$EEDF	; 6 - Hueco 2
			;	DECLE $0000,$8000,$A0C0,$F870	; 7 - Tope der.
			;	DECLE $B87C,$ECD4,$A86C,$ECC4	; 8 - Lado der 1.
			;	DECLE $A86C,$ECC4,$A86C,$ECC4	; 9 - Lado der 2.
			;	DECLE $286C,$0000,$0000,$0000	; 10 - Inf. der.
			;	DECLE $A0C0,$F870,$BE7C,$EFDF	; 11 - Hueco 3
			;	DECLE $AB67,$EECD,$BB77,$EEDD	; 12 - Hueco 4
			;	DECLE $0000,$0000,$0000,$8000	; 13 - Hueco 5

			;	DECLE $0000,$E080,$F0F8,$7060	; 14 - Abismo entrada 1
			;	DECLE $7F7F,$1F3F,$030F,$0001	; 15 - Abismo entrada 2
			;	DECLE $C080,$C0E0,$C080,$FFF8	; 16 - Abismo entrada 3
			;	DECLE $7F7F,$0F3F,$0003,$0000	; 17 - Abismo entrada 4
			;	DECLE $C080,$C080,$FCF0,$FCF8	; 18 - Abismo entrada 5
			;	DECLE $0F1F,$0307,$0001,$0000	; 19 - Abismo entrada 6
			;	DECLE $C000,$C080,$E0F0,$FEF0	; 20 - Abismo entrada 7
			;	DECLE $1FFF,$0000,$0000,$0000	; 21 - Abismo entrada 8

			;	DECLE $8000,$6018,$040C,$1C0F	; 22 - Abismo salida 1
			;	DECLE $20C0,$3010,$3870,$0106	; 23 - Abismo salida 2
			;	DECLE $30C0,$3870,$0204,$0306	; 24 - Abismo salida 3
			;	DECLE $20C0,$3860,$1808,$010F	; 25 - Abismo salida 4

			;	DECLE $0000,$0000,$0000,$0000	; 26 - Vacío

				; Pared con hueco a izq.
			;	DECLE $00,$01,$02,$02,$02,$02,$03
			;	DECLE     $04,$05,$02,$02,$02,$02,$03
			;	DECLE         $00,$01,$02,$02,$02,$02,$03
			;	DECLE             $06,$07,$08,$08,$08,$08,$09

				; Pared con hueco a der.
			;	DECLE $00,$01,$02,$02,$02,$02,$03
			;	DECLE     $06,$01,$02,$02,$02,$02,$03
			;	DECLE         $04,$05,$02,$02,$02,$02,$03
			;	DECLE             $00,$07,$08,$08,$08,$08,$09

				; Pared con hueco amplio
			;	DECLE $00,$01,$02,$02,$02,$02,$03
			;	DECLE     $04,$0A,$0B,$02,$02,$02,$03
			;	DECLE         $0c,$05,$02,$02,$02,$02,$03
			;	DECLE             $00,$07,$08,$08,$08,$08,$09

				; Abismo de entrada
			;	DECLE $19,$19,$19,$19,$19,$0D,$0E
			;	DECLE     $19,$19,$19,$19,$19,$0F,$10
			;	DECLE         $19,$19,$19,$19,$19,$11,$12
			;	DECLE             $19,$19,$19,$19,$19,$13,$14

				; Abismo de salida
			;	DECLE $19,$19,$19,$19,$19,$19,$15
			;	DECLE     $19,$19,$19,$19,$19,$19,$16
			;	DECLE         $19,$19,$19,$19,$19,$19,$17
			;	DECLE             $19,$19,$19,$19,$19,$19,$18

0x7                     COLOR_ESTRELLA:	EQU $07

				; Tabla de estrellas
0x6ACB                  tabla_estrellas:	PROC
6ACB 09BF 			DECLE $137*8+COLOR_ESTRELLA
6ACC 097F 			DECLE $12F*8+COLOR_ESTRELLA
6ACD 093F 			DECLE $127*8+COLOR_ESTRELLA
6ACE 099F 			DECLE $133*8+COLOR_ESTRELLA

6ACF 097F 			DECLE $12F*8+COLOR_ESTRELLA
6AD0 095F 			DECLE $12B*8+COLOR_ESTRELLA
6AD1 093F 			DECLE $127*8+COLOR_ESTRELLA
6AD2 09BF 			DECLE $137*8+COLOR_ESTRELLA

6AD3 097F 			DECLE $12F*8+COLOR_ESTRELLA
6AD4 095F 			DECLE $12B*8+COLOR_ESTRELLA
6AD5 09BF 			DECLE $137*8+COLOR_ESTRELLA
6AD6 097F 			DECLE $12F*8+COLOR_ESTRELLA
				ENDP

				INCLUDE "logo.asm"
0x6AD7                  logo_pantalla:	PROC
6AD7 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
6ADA 0000 0000 0000 0000 0000 0000 0000 
6AE1 0800 0000 0000 		DECLE $0800,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
6AE4 0000 0000 0000 0000 0000 0000 0000 
6AEB 0000 0000 0808 		DECLE $0000,$0000,$0808,$0810,$0810,$0810,$0818,$0810,$0820,$0828
6AEE 0810 0810 0810 0818 0810 0820 0828 
6AF5 0830 0838 0808 		DECLE $0830,$0838,$0808,$0810,$0840,$0848,$0818,$0810,$0840,$0848
6AF8 0810 0840 0848 0818 0810 0840 0848 
6AFF 0000 0000 0850 		DECLE $0000,$0000,$0850,$0858,$0860,$0868,$0870,$0878,$0880,$0888
6B02 0858 0860 0868 0870 0878 0880 0888 
6B09 0890 0898 08A0 		DECLE $0890,$0898,$08A0,$08A8,$08B0,$0000,$08B8,$08C0,$08C8,$08D0
6B0C 08A8 08B0 0000 08B8 08C0 08C8 08D0 
6B13 0000 08D8 08E0 		DECLE $0000,$08D8,$08E0,$08E8,$08F0,$08F8,$0900,$0908,$0910,$0918
6B16 08E8 08F0 08F8 0900 0908 0910 0918 
6B1D 0920 0928 0930 		DECLE $0920,$0928,$0930,$0938,$08D8,$08D8,$0940,$0948,$0950,$0958
6B20 0938 08D8 08D8 0940 0948 0950 0958 
6B27 0000 0960 0960 		DECLE $0000,$0960,$0960,$0960,$0968,$0970,$0978,$0960,$0980,$0960
6B2A 0960 0968 0970 0978 0960 0980 0960 
6B31 0960 0988 0990 		DECLE $0960,$0988,$0990,$0998,$0960,$0960,$0960,$0960,$0968,$0970
6B34 0998 0960 0960 0960 0960 0968 0970 
6B3B 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$09A0,$09A8,$0000,$0000
6B3E 0000 0000 0000 09A0 09A8 0000 0000 
6B45 0000 0800 09B0 		DECLE $0000,$0800,$09B0,$0000,$0000,$0000,$0000,$0000,$0000,$0000
6B48 0000 0000 0000 0000 0000 0000 0000 
6B4F 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$09B8,$0818,$0810,$0820
6B52 0000 0000 0000 09B8 0818 0810 0820 
6B59 0828 0830 0838 		DECLE $0828,$0830,$0838,$09C0,$0818,$0810,$0820,$0000,$0000,$0000
6B5C 09C0 0818 0810 0820 0000 0000 0000 
6B63 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0870,$0878,$0880
6B66 0000 0000 0000 0000 0870 0878 0880 
6B6D 0888 0890 0898 		DECLE $0888,$0890,$0898,$0870,$0870,$0878,$0880,$0600,$0000,$0000
6B70 0870 0870 0878 0880 0600 0000 0000 
6B77 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0870,$09C8,$09D0
6B7A 0000 0000 0000 0000 0870 09C8 09D0 
6B81 0918 0920 0928 		DECLE $0918,$0920,$0928,$09D8,$0900,$0908,$09E0,$0600,$0000,$0000
6B84 09D8 0900 0908 09E0 0600 0000 0000 
6B8B 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$09E8,$0600,$09F0
6B8E 0000 0000 0000 0000 09E8 0600 09F0 
6B95 0960 0960 0988 		DECLE $0960,$0960,$0988,$0990,$0998,$0960,$09F8,$0000,$0000,$0000
6B98 0990 0998 0960 09F8 0000 0000 0000 
6B9F 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
6BA2 0000 0000 0000 0000 0000 0000 0000 
6BA9 0000 0000 0000 		DECLE $0000,$0000,$0000,$09B0,$0000,$0000,$0000,$0000,$0000,$0000
6BAC 09B0 0000 0000 0000 0000 0000 0000 
6BB3 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
6BB6 0000 0000 0000 0000 0000 0000 0000 
6BBD 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
6BC0 0000 0000 0000 0000 0000 0000 0000 
				ENDP

0x6BC7                  logo_bitmap:	PROC
6BC7 0000 0600 0B0E 		DECLE $0000,$0600,$0B0E,$1519
6BCA 1519 
6BCB 0300 0D06 371B 		DECLE $0300,$0D06,$371B,$DF6F
6BCE DF6F 
6BCF FF00 FF00 FFFF 		DECLE $FF00,$FF00,$FFFF,$FFFF
6BD2 FFFF 
6BD3 FF00 BF80 BFBF 		DECLE $FF00,$BF80,$BFBF,$BFBF
6BD6 BFBF 
6BD7 F000 CC18 F3E6 		DECLE $F000,$CC18,$F3E6,$FDF9
6BDA FDF9 
6BDB 0000 0000 0100 		DECLE $0000,$0000,$0100,$0301
6BDE 0301 
6BDF 2F26 DF4F BF9F 		DECLE $2F26,$DF4F,$BF9F,$7F3F
6BE2 7F3F 
6BE3 4080 2060 90B0 		DECLE $4080,$2060,$90B0,$C8D8
6BE6 C8D8 
6BE7 FF00 FF00 FEFF 		DECLE $FF00,$FF00,$FEFF,$F9FC
6BEA F9FC 
6BEB FC00 980C 6030 		DECLE $FC00,$980C,$6030,$80C0
6BEE 80C0 
6BEF BFBF BFBF BFBF 		DECLE $BFBF,$BFBF,$BFBF,$87BF
6BF2 87BF 
6BF3 80C0 87BF FEF0 		DECLE $80C0,$87BF,$FEF0,$FFFF
6BF6 FFFF 
6BF7 0000 FFFF 1FFC 		DECLE $0000,$FFFF,$1FFC,$FEC0
6BFA FEC0 
6BFB 0000 FFFF 8000 		DECLE $0000,$FFFF,$8000,$1FF8
6BFE 1FF8 
6BFF BEBE BEBE BEBE 		DECLE $BEBE,$BEBE,$BEBE,$BEBE
6C02 BEBE 
6C03 0001 FFFE 8080 		DECLE $0001,$FFFE,$8080,$8080
6C06 8080 
6C07 FEFE 3E7E BEBE 		DECLE $FEFE,$3E7E,$BEBE,$BEBE
6C0A BEBE 
6C0B 8682 8D84 9389 		DECLE $8682,$8D84,$9389,$A793
6C0E A793 
6C0F FF7F F1FF E6E0 		DECLE $FF7F,$F1FF,$E6E0,$CBCE
6C12 CBCE 
6C13 F4E4 FBF2 7DF9 		DECLE $F4E4,$FBF2,$7DF9,$3E7C
6C16 3E7C 
6C17 BFBF BEBE BEBE 		DECLE $BFBF,$BEBE,$BEBE,$DEBE
6C1A DEBE 
6C1B 00C0 7F3F 8080 		DECLE $00C0,$7F3F,$8080,$8080
6C1E 8080 
6C1F 0203 FCFC 0000 		DECLE $0203,$FCFC,$0000,$0000
6C22 0000 
6C23 BEBE BEBE BFBE 		DECLE $BEBE,$BEBE,$BFBE,$BFBF
6C26 BFBF 
6C27 0000 FFFF FF00 		DECLE $0000,$FFFF,$FF00,$FFFF
6C2A FFFF 
6C2B 0203 FFFC FF00 		DECLE $0203,$FFFC,$FF00,$FEFF
6C2E FEFF 
6C2F 0000 FC00 980C 		DECLE $0000,$FC00,$980C,$6030
6C32 6030 
6C33 0000 0000 FF00 		DECLE $0000,$0000,$FF00,$FF00
6C36 FF00 
6C37 78C0 000F FF00 		DECLE $78C0,$000F,$FF00,$FF00
6C3A FF00 
6C3B 0F7F F080 FF1F 		DECLE $0F7F,$F080,$FF1F,$FF00
6C3E FF00 
6C3F FFFF 3FFF EF1F 		DECLE $FFFF,$3FFF,$EF1F,$FF0F
6C42 FF0F 
6C43 F8C3 FCFE F3F8 		DECLE $F8C3,$FCFE,$F3F8,$CCE6
6C46 CCE6 
6C47 BEBE BEBE BEBE 		DECLE $BEBE,$BEBE,$BEBE,$BFBE
6C4A BFBE 
6C4B 8080 8080 FF80 		DECLE $8080,$8080,$FF80,$FF00
6C4E FF00 
6C4F BEBE BCBE 39BD 		DECLE $BEBE,$BCBE,$39BD,$F672
6C52 F672 
6C53 CFEF 9FDF 3FBF 		DECLE $CFEF,$9FDF,$3FBF,$FF7E
6C56 FF7E 
6C57 9199 2030 7F60 		DECLE $9199,$2030,$7F60,$FE00
6C5A FE00 
6C5B 9F3E 4F9F A74F 		DECLE $9F3E,$4F9F,$A74F,$53D7
6C5E 53D7 
6C5F 6E5E B62E DB96 		DECLE $6E5E,$B62E,$DB96,$E4C9
6C62 E4C9 
6C63 8080 8080 3F40 		DECLE $8080,$8080,$3F40,$FF80
6C66 FF80 
6C67 BFBF BEBE BEBE 		DECLE $BFBF,$BEBE,$BEBE,$FF3E
6C6A FF3E 
6C6B FFFF 0000 FFFF 		DECLE $FFFF,$0000,$FFFF,$FF00
6C6E FF00 
6C6F FDFC 0203 FFFC 		DECLE $FDFC,$0203,$FFFC,$FF00
6C72 FF00 
6C73 80C0 0000 FE00 		DECLE $80C0,$0000,$FE00,$CC06
6C76 CC06 
6C77 FFFF FFFF 0000 		DECLE $FFFF,$FFFF,$0000,$FFFF
6C7A FFFF 
6C7B FFFF FCFE 0301 		DECLE $FFFF,$FCFE,$0301,$FCFE
6C7E FCFE 
6C7F 3098 C060 0080 		DECLE $3098,$C060,$0080,$0000
6C82 0000 
6C83 BFBF BFBF BEBE 		DECLE $BFBF,$BFBF,$BEBE,$BEBE
6C86 BEBE 
6C87 CDE4 99C9 3010 		DECLE $CDE4,$99C9,$3010,$FFFF
6C8A FFFF 
6C8B 296B 94B5 0B1A 		DECLE $296B,$94B5,$0B1A,$F9F9
6C8E F9F9 
6C8F F2F6 F9FB 7C7D 		DECLE $F2F6,$F9FB,$7C7D,$B379
6C92 B379 
6C93 7FFF 3F7F 8080 		DECLE $7FFF,$3F7F,$8080,$FFFF
6C96 FFFF 
6C97 BEBE BEBE BCBE 		DECLE $BEBE,$BEBE,$BCBE,$B2B9
6C9A B2B9 
6C9B 8080 8080 8080 		DECLE $8080,$8080,$8080,$0000
6C9E 0000 
6C9F CC86 3058 0020 		DECLE $CC86,$3058,$0020,$0000
6CA2 0000 
6CA3 8CA6 B098 C0E0 		DECLE $8CA6,$B098,$C0E0,$80C0
6CA6 80C0 
6CA7 FF00 BE80 BEBE 		DECLE $FF00,$BE80,$BEBE,$BEBE
6CAA BEBE 
6CAB E7CF 99B3 868C 		DECLE $E7CF,$99B3,$868C,$8183
6CAE 8183 
6CAF FEFE FEFE 7EFE 		DECLE $FEFE,$FEFE,$7EFE,$9F3E
6CB2 9F3E 
6CB3 3E3E BEBE DEDE 		DECLE $3E3E,$BEBE,$DEDE,$EEEE
6CB6 EEEE 
6CB7 BEBE BEBE 3EBE 		DECLE $BEBE,$BEBE,$3EBE,$FC7E
6CBA FC7E 
6CBB BEBE BEBE 8080 		DECLE $BEBE,$BEBE,$8080,$FFFF
6CBE FFFF 
6CBF 67CF 1933 060C 		DECLE $67CF,$1933,$060C,$0103
6CC2 0103 
6CC3 F3F9 CCE6 3018 		DECLE $F3F9,$CCE6,$3018,$C0E0
6CC6 C0E0 
				ENDP


				; GAME OVER
6CC7 0007 013F 		mensaje_1:	DECLE $07+$00*8,$07+$27*8
6CC9 010F 016F 			DECLE $07+$21*8,$07+$2D*8
6CCB 012F 0007 			DECLE $07+$25*8,$07+$00*8
6CCD 017F 01B7 			DECLE $07+$2F*8,$07+$36*8
6CCF 012F 0197 			DECLE $07+$25*8,$07+$32*8
6CD1 0007 			DECLE $07+$00*8

				; PRESS FIRE
0x6CD2                  mensaje_2:
6CD2 0183 			DECLE $0030*8+3
6CD3 0193 			DECLE $0032*8+3
6CD4 012B 			DECLE $0025*8+3
6CD5 019B 			DECLE $0033*8+3
6CD6 019B 			DECLE $0033*8+3
6CD7 0003 			DECLE $0000*8+3
6CD8 0133 			DECLE $0026*8+3
6CD9 014B 			DECLE $0029*8+3
6CDA 0193 			DECLE $0032*8+3
6CDB 012B 			DECLE $0025*8+3

0x6CDC                  mensaje_3:
				;   "    Space Raid      "
6CDC 0000 056B 055B 		DECLE $0000,$00ad*8+3,$00ab*8+3,$00a9*8+3,$00a7*8+3,$0033*8+7
6CDF 054B 053B 019F 
6CE2 0287 020F 021F 		DECLE $0050*8+7,$0041*8+7,$0043*8+7,$0045*8+7,$0000
6CE5 022F 0000 
6CE7 0197 020F 024F 		DECLE $0032*8+7,$0041*8+7,$0049*8+7,$0044*8+7,$00a6*8+3
6CEA 0227 0533 
6CEC 0543 0553 0563 		DECLE $00a8*8+3,$00aa*8+3,$00ac*8+3,$0000
6CEF 0000 
				;   "  Oscar Toledo G.   "
6CF0 0000 0003 0003 		DECLE $0000,$0000*8+3,$0000*8+3,$002F*8+3,$0053*8+3,$0043*8+3
6CF3 017B 029B 021B 
6CF6 020B 0293 0003 		DECLE $0041*8+3,$0052*8+3,$0000*8+3,$0034*8+3,$004F*8+3
6CF9 01A3 027B 
6CFB 0263 022B 0223 		DECLE $004C*8+3,$0045*8+3,$0044*8+3,$004F*8+3,$0000*8+3
6CFE 027B 0003 
6D00 013B 0073 0003 		DECLE $0027*8+3,$000E*8+3,$0000*8+3,$0000*8+3
6D03 0003 
				;   “                    “
6D04 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D07 0000 0000 
6D09 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D0C 0000 0000 
6D0E 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D11 0000 0000 
6D13 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D16 0000 0000 
				;   "   Published by:    "
6D18 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0030*8+7,$0055*8+7
6D1B 0000 0187 02AF 
6D1E 0217 0267 024F 		DECLE $0042*8+7,$004C*8+7,$0049*8+7,$0053*8+7,$0048*8+7
6D21 029F 0247 
6D23 022F 0227 0007 		DECLE $0045*8+7,$0044*8+7,$0000*8+7,$0042*8+7,$0059*8+7
6D26 0217 02CF 
6D28 00D7 0000 0000 		DECLE $001a*8+7,$0000,$0000,$0000
6D2B 0000 
				;   "  Collectorvision   "
6D2C 0000 0003 0003 		DECLE $0000,$0000*8+3,$0000*8+3,$0023*8+3,$004F*8+3,$004C*8+3
6D2F 011B 027B 0263 
6D32 0263 022B 021B 		DECLE $004C*8+3,$0045*8+3,$0043*8+3,$0054*8+3,$004F*8+3
6D35 02A3 027B 
6D37 0293 02B3 024B 		DECLE $0052*8+3,$0056*8+3,$0049*8+3,$0053*8+3,$0049*8+3
6D3A 029B 024B 
6D3C 027B 0273 0003 		DECLE $004F*8+3,$004E*8+3,$0000*8+3,$0000*8+3
6D3F 0003 
				;   “                    “
6D40 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D43 0000 0000 
6D45 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D48 0000 0000 
6D4A 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D4D 0000 0000 
6D4F 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D52 0000 0000 
				;   "  Harvey deKleine   "
6D54 0000 0006 0006 		DECLE $0000,$0000*8+6,$0000*8+6,$0028*8+6,$0041*8+6,$0052*8+6
6D57 0146 020E 0296 
6D5A 02B6 022E 02CE 		DECLE $0056*8+6,$0045*8+6,$0059*8+6,$0000*8+6,$0044*8+6
6D5D 0006 0226 
6D5F 022E 015E 0266 		DECLE $0045*8+6,$002B*8+6,$004C*8+6,$0045*8+6,$0049*8+6
6D62 022E 024E 
6D64 0276 022E 0006 		DECLE $004E*8+6,$0045*8+6,$0000*8+6,$0000*8+6
6D67 0006 
				;   "     J.F.Dupuis     "
6D68 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D6B 0000 0000 
6D6D 0156 0076 0136 		DECLE $002A*8+6,$000E*8+6,$0026*8+6,$000E*8+6,$0024*8+6
6D70 0076 0126 
6D72 02AE 0286 02AE 		DECLE $0055*8+6,$0050*8+6,$0055*8+6,$0049*8+6,$0053*8+6
6D75 024E 029E 
6D77 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6D7A 0000 0000 
				;   "   Vince Godefroy   "
6D7C 0000 0000 0000 		DECLE $0000,$0000,$0000,$0036*8+6,$0049*8+6
6D7F 01B6 024E 
6D81 0276 021E 022E 		DECLE $004E*8+6,$0043*8+6,$0045*8+6,$0000*8+6,$0027*8+6
6D84 0006 013E 
6D86 027E 0226 022E 		DECLE $004f*8+6,$0044*8+6,$0045*8+6,$0046*8+6,$0052*8+6
6D89 0236 0296 
6D8B 027E 02CE 0006 		DECLE $004f*8+6,$0059*8+6,$0000*8+6,$0000*8+6,$0000
6D8E 0006 0000 
			        ;   "   Tobie St-Aubin   "
6D90 0000 0000 0000 		DECLE $0000,$0000,$0000,$0034*8+6,$004f*8+6
6D93 01A6 027E 
6D95 0216 024E 022E 		DECLE $0042*8+6,$0049*8+6,$0045*8+6,$0000*8+6,$0033*8+6
6D98 0006 019E 
6D9A 02A6 006E 010E 		DECLE $0054*8+6,$000d*8+6,$0021*8+6,$0055*8+6,$0042*8+6
6D9D 02AE 0216 
6D9F 024E 0276 0006 		DECLE $0049*8+6,$004e*8+6,$0000*8+6,$0000*8+6,$0000
6DA2 0006 0000 
				;   “                    “
6DA4 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6DA7 0000 0000 
6DA9 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6DAC 0000 0000 
6DAE 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6DB1 0000 0000 
6DB3 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6DB6 0000 0000 
				;   "  ROM Mar/03/2014   "
6DB8 0000 0000 0000 		DECLE $0000,$0000,$0000,$0032*8+3,$002f*8+3,$002d*8+3
6DBB 0193 017B 016B 
6DBE 0003 016B 020B 		DECLE $0000*8+3,$002d*8+3,$0041*8+3,$0052*8+3,$000f*8+3
6DC1 0293 007B 
6DC3 0083 009B 007B 		DECLE $0010*8+3,$0013*8+3,$000f*8+3,$0012*8+3,$0010*8+3
6DC6 0093 0083 
6DC8 008B 00A3 0003 		DECLE $0011*8+3,$0014*8+3,$0000*8+3,$0000*8+3
6DCB 0003 

0x6DCC                  mensaje_5:
				;   "   Beta testing:    "
6DCC 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0022*8+7,$0045*8+7
6DCF 0000 0117 022F 
6DD2 02A7 020F 0007 		DECLE $0054*8+7,$0041*8+7,$0000*8+7,$0054*8+7,$0045*8+7
6DD5 02A7 022F 
6DD7 029F 02A7 024F 		DECLE $0053*8+7,$0054*8+7,$0049*8+7,$004e*8+7,$0047*8+7
6DDA 0277 023F 
6DDC 00D7 0000 0000 		DECLE $001a*8+7,$0000,$0000,$0000
6DDF 0000 
				;   “      cmart604      "
6DE0 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000
6DE3 0000 0000 0000 
6DE6 021E 026E 020E 		DECLE $0043*8+6,$004d*8+6,$0041*8+6,$0052*8+6,$0054*8+6
6DE9 0296 02A6 
6DEB 00B6 0086 00A6 		DECLE $0016*8+6,$0010*8+6,$0014*8+6,$0000,$0000
6DEE 0000 0000 
6DF0 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6DF3 0000 
				;   "       ed1475       “
6DF4 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000
6DF7 0000 0000 0000 
6DFA 0000 022E 0226 		DECLE $0000,$0045*8+6,$0044*8+6,$0011*8+6,$0014*8+6
6DFD 008E 00A6 
6DFF 00BE 00AE 0000 		DECLE $0017*8+6,$0015*8+6,$0000,$0000,$0000
6E02 0000 0000 
6E04 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6E07 0000 
				;   "     GroovyBee      "
6E08 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000,$0000
6E0B 0000 0000 0000 
6E0E 013E 0296 027E 		DECLE $0027*8+6,$0052*8+6,$004f*8+6,$004f*8+6,$0056*8+6
6E11 027E 02B6 
6E13 02CE 0116 022E 		DECLE $0059*8+6,$0022*8+6,$0045*8+6,$0045*8+6,$0000
6E16 022E 0000 
6E18 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000
6E1B 0000 
				;   “                    “
6E1C 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6E1F 0000 0000 
6E21 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6E24 0000 0000 
6E26 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6E29 0000 0000 
6E2B 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0000
6E2E 0000 0000 
				;   “   Dedicated to:    “
6E30 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0024*8+7,$0045*8+7
6E33 0000 0127 022F 
6E36 0227 024F 021F 		DECLE $0044*8+7,$0049*8+7,$0043*8+7,$0041*8+7,$0054*8+7
6E39 020F 02A7 
6E3B 022F 0227 0000 		DECLE $0045*8+7,$0044*8+7,$0000,$0054*8+7,$004f*8+7
6E3E 02A7 027F 
6E40 00D7 0000 0000 		DECLE $001a*8+7,$0000,$0000,$0000
6E43 0000 
				;   “   Ana Sylvia R.    “
6E44 0000 0000 0000 		DECLE $0000,$0000,$0000,$0000,$0021*8+6,$004e*8+6
6E47 0000 010E 0276 
6E4A 020E 0000 019E 		DECLE $0041*8+6,$0000,$0033*8+6,$0059*8+6,$004c*8+6
6E4D 02CE 0266 
6E4F 02B6 024E 020E 		DECLE $0056*8+6,$0049*8+6,$0041*8+6,$0000,$0032*8+6
6E52 0000 0196 
6E54 0076 0000 0000 		DECLE $000e*8+6,$0000,$0000,$0000
6E57 0000 

0x6E58                  mensaje_4:
				;   "Great Warriors"
6E58 013A 0292 022A 		DECLE $0027*8+2,$0052*8+2,$0045*8+2,$0041*8+2,$0054*8+2
6E5B 020A 02A2 
6E5D 0002 01BA 020A 		DECLE $0000*8+2,$0037*8+2,$0041*8+2,$0052*8+2,$0052*8+2
6E60 0292 0292 
6E62 024A 027A 0292 		DECLE $0049*8+2,$004f*8+2,$0052*8+2,$0053*8+2
6E65 029A 

			        INCLUDE "print.asm"     ; Rutinas PRINT.xxx
			;* ======================================================================== *;
			;*  These routines are placed into the public domain by their author.  All  *;
			;*  copyright rights are hereby relinquished on the routines and data in    *;
			;*  this file.  -- Joseph Zbiciak, 2008                                     *;
			;* ======================================================================== *;

			;; ======================================================================== ;;
			;;  PRINT.xxx     Prints an ASCIIZ string.                                  ;;
			;;                                                                          ;;
			;;  PRINT.R       Ptr to string in R0, format in R1, location in R4.        ;;
			;;  PRINT.S       String follows CALL.  Format in R1, location in R4.       ;;
			;;  PRINT.LS      Location and string itself follows CALL.  Format in R1.   ;;
			;;  PRINT.FLS     Format, location, and string itself follows CALL          ;;
			;;  PRINT.P       Ptr to string follows CALL.  Format in R1, loc. in R4.    ;;
			;;  PRINT.LP      Location and ptr to string follows CALL.  Format in R1.   ;;
			;;  PRINT.FLP     Format, location, and ptr to string follows CALL          ;;
			;;                                                                          ;;
			;;  PRINT alone is an alias for PRINT.FLS.                                  ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.R:                                                     ;;
			;;      R0 -- Pointer to ASCIIZ string                                      ;;
			;;      R1 -- Screen format word                                            ;;
			;;      R4 -- Pointer to display location                                   ;;
			;;      R5 -- Return address                                                ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.S:                                                     ;;
			;;      R1 -- Screen format word                                            ;;
			;;      R4 -- Pointer to display location                                   ;;
			;;      R5 -- Invocation record, followed by return code.                   ;;
			;;              String                      n DECLEs (NUL terminated)       ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.LS:                                                    ;;
			;;      R1 -- Screen format word                                            ;;
			;;      R5 -- Invocation record, followed by return code.                   ;;
			;;              Ptr to display location     1 DECLE                         ;;
			;;              String                      n DECLEs (NUL terminated)       ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.FLS:                                                   ;;
			;;      R5 -- Invocation record, followed by return code.                   ;;
			;;              Screen format word          1 DECLE                         ;;
			;;              Ptr to display location     1 DECLE                         ;;
			;;              String                      n DECLEs (NUL terminated)       ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.P:                                                     ;;
			;;      R1 -- Screen format word                                            ;;
			;;      R4 -- Pointer to display location                                   ;;
			;;      R5 -- Invocation record, followed by return code.                   ;;
			;;              Pointer to ASCIIZ string    1 DECLE                         ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.LP:                                                    ;;
			;;      R1 -- Screen format word                                            ;;
			;;      R5 -- Invocation record, followed by return code.                   ;;
			;;              Ptr to display location     1 DECLE                         ;;
			;;              Pointer to ASCIIZ string    1 DECLE                         ;;
			;;                                                                          ;;
			;;  INPUTS for PRINT.FLP:                                                   ;;
			;;      R5 -- Invocation record, followed by return code.                   ;;
			;;              Screen format word          1 DECLE                         ;;
			;;              Location                    1 DECLE                         ;;
			;;              Pointer to ASCIIZ string    1 DECLE                         ;;
			;;                                                                          ;;
			;;  OUTPUTS:                                                                ;;
			;;      R0 -- Trashed                                                       ;;
			;;      R1 -- Same as screen format word, EXCEPT Bit 15 is modified.        ;;
			;;      R4 -- Points to display location just after displayed string.       ;;
			;;      R5 -- Points just past end of source string in memory.              ;;
			;;      R2 and R3 are not modified.                                         ;;
			;;                                                                          ;;
			;;  NOTES                                                                   ;;
			;;      ASCIIZ strings are ASCII strings that are terminated with a         ;;
			;;      single NUL character.  Although it was originally intended for use  ;;
			;;      with ASCII strings, this routine does allow for characters outside  ;;
			;;      the normal range of ASCII characters as well.  This can be useful   ;;
			;;      for displaying graphic characters within a string.                  ;;
			;;                                                                          ;;
			;;      The card # displayed for a given character in the string is given   ;;
			;;      by the following formula:                                           ;;
			;;                                                                          ;;
			;;          (character_number - 32) + (format_word SHR 3) = card_number.    ;;
			;;                                                                          ;;
			;;      To display a single character from GRAM, for instance, just         ;;
			;;      insert a word whose value is "GRAM_picture_number + 288" in your    ;;
			;;      string.                                                             ;;
			;;                                                                          ;;
			;;      You can use PRINT to display entire strings of characters in        ;;
			;;      alternate fonts (such as a font loaded in GRAM) as well.  To do     ;;
			;;      this, merely add the appropriate offset to the format_word.         ;;
			;;      The correct offset depends on what characters are in your font      ;;
			;;      and where your font begins in GRAM.                                 ;;
			;;                                                                          ;;
			;;      For example, suppose your font only contains uppercase alphabetic   ;;
			;;      characters, and is loaded in GRAM positions 10 through 35.  That    ;;
			;;      is, the picture for 'A' is in GRAM position #10, and 'Z' is in      ;;
			;;      GRAM position #35.  We want 'A' to map to GRAM position #10.        ;;
			;;      GRAM position #10 is equivalent to card #266.  The ASCII value for  ;;
			;;      'A' is 65.  Using the relationship given above, we have:            ;;
			;;                                                                          ;;
			;;          (character_number - 32) + (format_word SHR 3) = card_number.    ;;
			;;          (        65       - 32) + (format_word SHR 3) = 266             ;;
			;;                                                                          ;;
			;;      Solving this, we get:                                               ;;
			;;                                                                          ;;
			;;          format_word SHR 3 = 233                                         ;;
			;;          format_word       = 233 SHL 3                                   ;;
			;;                                                                          ;;
			;;      So, to display this particular GRAM font, we must add 233 SHL 3     ;;
			;;      to our format word.  (We can still set other bits in the format     ;;
			;;      word to control its color, etc.)                                    ;;
			;; ======================================================================== ;;
0x6E66                  PRINT   PROC
6E66 02A9 		@@FLS:  MVI@    R5,     R1      ; Load format word from invoc. record
6E67 02AC 		@@LS:   MVI@    R5,     R4      ; Load ptr to display loc from invoc record
6E68 0200 0007 		        B       @@S             ; Continue w/ string pointer in R5.

6E6A 02A9 		@@FLP:  MVI@    R5,     R1      ; Load ptr to string from invoc. record
6E6B 02AC 		@@LP:   MVI@    R5,     R4      ; Load format word from invoc. record
6E6C 02A8 		@@P:    MVI@    R5,     R0      ; Load ptr to display loc from invoc record

6E6D 0275 		@@R:    PSHR    R5              ; Save return address if string ptr is in R0
6E6E 0085 		        MOVR    R0,     R5      ; Use auto-incr pointer for reading string
6E6F 0007 		        SETC                    ; Flag:  C==1 means ret addr is on stack
6E70 000F 		        INCR    PC              ; Skip the CLRC.

6E71 0006 		@@S     CLRC                    ; Flag:  C==0 means return after string.
6E72 0049 		        SLL     R1,     1       ; \__ Hide the flag in MSB of screen fmt word
6E73 0071 		        RRC     R1,     1       ; /
6E74 0200 0006 		        B       @@1st           ; Get first char of string
0x6E76                  @@tloop:
6E76 0338 0020 		        SUBI    #32,    R0      ; Shift ASCII range to charset
6E78 004C 		        SLL     R0,     2       ; Move it to position for BTAB word
6E79 0048 		        SLL     R0,     1
6E7A 00C8 		        ADDR    R1,     R0      ; Merge with color info
6E7B 0260 		        MVO@    R0,     R4      ; Write to display
6E7C 02A8 		@@1st:  MVI@    R5,     R0      ; Get next character
6E7D 0080 		        TSTR    R0              ; Is it NUL?
6E7E 022C 0009 		        BNEQ    @@tloop         ; --> No, keep copying then

6E80 0089 		        TSTR    R1              ; Is MSB set?                             
6E81 020B 0001 		        BMI     @@pulr          ; Yes:  PULR PC to exit
6E83 00AF 		        JR      R5              ; Return to R5 if flag was clear
6E84 02B7 		@@pulr: PULR    PC              ; Return to saved address if flag was set.
			        ENDP

			;; ======================================================================== ;;
			;;  End of File:  print.asm                                                 ;;
			;; ======================================================================== ;;
 ERROR SUMMARY - ERRORS DETECTED 0
               -  WARNINGS       4
